<!DOCTYPE html>
<html lang="en" class="scroll-smooth">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>SkillShield ‚Äî Secure SKILL.md Directory</title>
  <meta name="description" content="The only skill marketplace with mandatory security scanning. Pre-scanned SKILL.md files for malicious code, prompt injection attacks, and security vulnerabilities.">
  
  <!-- Tailwind CSS -->
  <script src="https://cdn.tailwindcss.com"></script>
  
  <!-- Favicon -->
  <link rel="icon" type="image/x-icon" href="/favicon.ico">
  <link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
  
  <!-- OG / Twitter Meta Tags -->
  <meta property="og:title" content="SkillShield ‚Äî Secure SKILL.md Directory">
  <meta property="og:description" content="The only skill marketplace with mandatory security scanning. 12% of skills contain malicious code. We scan them all.">
  <meta property="og:type" content="website">
  <meta property="og:url" content="https://skillshield.pages.dev">
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:title" content="SkillShield ‚Äî Secure SKILL.md Directory">
  <meta name="twitter:description" content="The only skill marketplace with mandatory security scanning.">
  <meta property="og:image" content="https://skillshield.dev/logo.png">
  <meta name="twitter:image" content="https://skillshield.dev/logo.png">
  <meta name="robots" content="index, follow">
  
  <!-- Lucide Icons -->
  <script src="https://unpkg.com/lucide@0.344.0"></script>
  
  <!-- Google Fonts -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&family=JetBrains+Mono:wght@400;500;600&display=swap" rel="stylesheet">
  
  <script>
    tailwind.config = {
      theme: {
        extend: {
          colors: {
            slate: {
              850: '#1e293b',
              900: '#0f172a',
              950: '#020617',
            },
            emerald: {
              400: '#34d399',
              500: '#10b981',
              600: '#059669',
            },
            amber: {
              400: '#fbbf24',
              500: '#f59e0b',
            },
            red: {
              400: '#f87171',
              500: '#ef4444',
            }
          },
          fontFamily: {
            sans: ['Inter', 'system-ui', 'sans-serif'],
            mono: ['JetBrains Mono', 'monospace'],
          },
          animation: {
            'scan-line': 'scanLine 3s linear infinite',
            'pulse-glow': 'pulseGlow 2s ease-in-out infinite',
            'counter': 'counter 2s ease-out forwards',
            'fade-in': 'fadeIn 0.5s ease-out forwards',
            'slide-up': 'slideUp 0.5s ease-out forwards',
            'ticker': 'ticker 20s linear infinite',
          },
          keyframes: {
            scanLine: {
              '0%': { transform: 'translateY(-100%)' },
              '100%': { transform: 'translateY(100vh)' },
            },
            pulseGlow: {
              '0%, 100%': { boxShadow: '0 0 20px rgba(16, 185, 129, 0.3)' },
              '50%': { boxShadow: '0 0 40px rgba(16, 185, 129, 0.6)' },
            },
            counter: {
              '0%': { opacity: '0', transform: 'translateY(20px)' },
              '100%': { opacity: '1', transform: 'translateY(0)' },
            },
            fadeIn: {
              '0%': { opacity: '0' },
              '100%': { opacity: '1' },
            },
            slideUp: {
              '0%': { opacity: '0', transform: 'translateY(30px)' },
              '100%': { opacity: '1', transform: 'translateY(0)' },
            },
            ticker: {
              '0%': { transform: 'translateX(0)' },
              '100%': { transform: 'translateX(-50%)' },
            },
          },
        },
      },
    }
  </script>
  
  <style>
    /* Custom scrollbar */
    ::-webkit-scrollbar {
      width: 8px;
      height: 8px;
    }
    ::-webkit-scrollbar-track {
      background: #0f172a;
    }
    ::-webkit-scrollbar-thumb {
      background: #334155;
      border-radius: 4px;
    }
    ::-webkit-scrollbar-thumb:hover {
      background: #475569;
    }
    
    /* Grid pattern background */
    .grid-pattern {
      background-image: 
        linear-gradient(rgba(16, 185, 129, 0.03) 1px, transparent 1px),
        linear-gradient(90deg, rgba(16, 185, 129, 0.03) 1px, transparent 1px);
      background-size: 40px 40px;
    }
    
    /* Scan line effect */
    .scan-line {
      position: absolute;
      width: 100%;
      height: 2px;
      background: linear-gradient(90deg, transparent, rgba(16, 185, 129, 0.5), transparent);
      animation: scanLine 3s linear infinite;
      pointer-events: none;
    }
    
    /* Glow effects */
    .glow-emerald {
      box-shadow: 0 0 30px rgba(16, 185, 129, 0.2);
    }
    
    .hover-glow:hover {
      box-shadow: 0 0 30px rgba(16, 185, 129, 0.3);
    }
    
    /* Card security borders */
    .card-clean {
      border-color: #10b981;
    }
    .card-warning {
      border-color: #f59e0b;
    }
    .card-quarantined {
      border-color: #ef4444;
    }
    
    /* Terminal text effect */
    .terminal-text {
      font-family: 'JetBrains Mono', monospace;
    }
    
    /* Security badge glow */
    .badge-glow {
      box-shadow: 0 0 10px currentColor;
    }
    
    /* Filter pill default state */
    .filter-pill {
      background: transparent;
      border-color: #334155;
      color: #94a3b8;
    }
    
    /* Filter pill hover state */
    .filter-pill:hover {
      border-color: #10b981;
      color: #34d399;
    }
    
    /* Filter pill active state */
    .filter-pill.active {
      background: rgba(16, 185, 129, 0.2);
      border-color: #10b981;
      color: #34d399;
    }
    
    /* Filter pill active count */
    .filter-pill.active span {
      color: #34d399;
    }
    
    /* Filter pill non-active count */
    .filter-pill:not(.active) span {
      color: #64748b;
    }
    
    /* FAQ accordion */
    .faq-content {
      max-height: 0;
      overflow: hidden;
      transition: max-height 0.3s ease-out;
    }
    .faq-content.open {
      max-height: 500px;
    }
    
    /* Ticker pause on hover */
    .ticker-container:hover .ticker-content {
      animation-play-state: paused;
    }
    
    /* Search focus ring */
    .search-focus:focus-within {
      box-shadow: 0 0 0 3px rgba(16, 185, 129, 0.3);
    }
    
    /* Number counter animation */
    .counter-value {
      font-variant-numeric: tabular-nums;
    }
    
    /* Mobile menu */
    .mobile-menu {
      transform: translateX(-100%);
      transition: transform 0.3s ease-out;
    }
    .mobile-menu.open {
      transform: translateX(0);
    }
    
    /* Skill card hover preview */
    .skill-card .security-preview {
      opacity: 0;
      transform: translateY(10px);
      transition: all 0.3s ease-out;
    }
    .skill-card:hover .security-preview {
      opacity: 1;
      transform: translateY(0);
    }
    
    /* Animated gradient border */
    .gradient-border {
      position: relative;
      background: linear-gradient(135deg, #0f172a, #1e293b);
    }
    .gradient-border::before {
      content: '';
      position: absolute;
      inset: 0;
      padding: 1px;
      border-radius: inherit;
      background: linear-gradient(135deg, #10b981, #059669);
      -webkit-mask: linear-gradient(#fff 0 0) content-box, linear-gradient(#fff 0 0);
      mask: linear-gradient(#fff 0 0) content-box, linear-gradient(#fff 0 0);
      -webkit-mask-composite: xor;
      mask-composite: exclude;
    }

    /* Skill Detail Modal */
    .skill-modal-overlay {
      opacity: 0;
      transition: opacity 0.25s ease-out;
    }
    .skill-modal-overlay.open {
      opacity: 1;
    }
    .skill-modal-panel {
      transform: translateY(24px) scale(0.97);
      opacity: 0;
      transition: transform 0.3s cubic-bezier(0.16, 1, 0.3, 1), opacity 0.25s ease-out;
    }
    .skill-modal-overlay.open .skill-modal-panel {
      transform: translateY(0) scale(1);
      opacity: 1;
    }
    .skill-modal-body {
      max-height: 70vh;
      overflow-y: auto;
    }
    @media (max-width: 640px) {
      .skill-modal-panel {
        margin: 0;
        border-radius: 0;
        min-height: 100vh;
        max-height: 100vh;
      }
      .skill-modal-body {
        max-height: calc(100vh - 160px);
      }
    }
    /* Expandable issues */
    .issues-expand-wrapper {
      max-height: 0;
      overflow: hidden;
      transition: max-height 0.4s cubic-bezier(0.16, 1, 0.3, 1);
    }
    .issues-expand-wrapper.expanded {
      max-height: 400px;
    }
    .issues-scrollable {
      max-height: 400px;
      overflow-y: auto;
      padding-right: 4px;
    }
    .issues-scrollable::-webkit-scrollbar {
      width: 6px;
    }
    .issues-scrollable::-webkit-scrollbar-track {
      background: rgba(15, 23, 42, 0.5);
      border-radius: 3px;
    }
    .issues-scrollable::-webkit-scrollbar-thumb {
      background: #334155;
      border-radius: 3px;
    }
    .issues-scrollable::-webkit-scrollbar-thumb:hover {
      background: #475569;
    }
    .expand-issues-btn {
      transition: all 0.2s ease;
    }
    .expand-issues-btn:hover {
      background: rgba(16, 185, 129, 0.15);
      border-color: rgba(16, 185, 129, 0.4);
    }
    .expand-issues-btn .chevron {
      transition: transform 0.3s ease;
    }
    .expand-issues-btn.expanded .chevron {
      transform: rotate(180deg);
    }
    .severity-group-header {
      font-family: 'JetBrains Mono', monospace;
      font-size: 10px;
      letter-spacing: 0.1em;
      text-transform: uppercase;
    }
    .issue-item {
      font-family: 'JetBrains Mono', monospace;
    }
    /* Score ring */
    .score-ring {
      transform: rotate(-90deg);
    }
    .score-ring-track {
      stroke: #1e293b;
    }
    .score-ring-fill {
      stroke-dasharray: 283;
      stroke-linecap: round;
      transition: stroke-dashoffset 0.8s cubic-bezier(0.16, 1, 0.3, 1);
    }
    /* External link button on card */
    .card-ext-link {
      opacity: 0.5;
      transition: opacity 0.2s, background 0.2s;
    }
    .skill-card:hover .card-ext-link {
      opacity: 1;
    }
    .card-ext-link:hover {
      background: rgba(16, 185, 129, 0.25) !important;
    }

    /* ========================================
       SEARCH DROPDOWN
       ======================================== */

    /* Container ‚Äî positioned relative to the search wrapper */
    .search-dropdown {
      position: absolute;
      top: calc(100% + 6px);
      left: 0;
      right: 0;
      z-index: 45;
      background: #0f172a;
      border: 1px solid #334155;
      border-radius: 0.75rem;
      box-shadow: 0 25px 50px -12px rgba(0, 0, 0, 0.7), 0 0 30px rgba(16, 185, 129, 0.08);
      max-height: 420px;
      overflow-y: auto;
      overflow-x: hidden;
      opacity: 0;
      transform: translateY(-4px);
      transition: opacity 0.15s ease-out, transform 0.15s ease-out;
      pointer-events: none;
    }
    .search-dropdown.open {
      opacity: 1;
      transform: translateY(0);
      pointer-events: auto;
    }

    /* Scrollbar for dropdown */
    .search-dropdown::-webkit-scrollbar {
      width: 6px;
    }
    .search-dropdown::-webkit-scrollbar-track {
      background: transparent;
    }
    .search-dropdown::-webkit-scrollbar-thumb {
      background: #334155;
      border-radius: 3px;
    }

    /* Section headers inside dropdown */
    .sdd-section-label {
      padding: 10px 16px 6px;
      font-size: 11px;
      font-weight: 600;
      text-transform: uppercase;
      letter-spacing: 0.05em;
      color: #64748b;
      display: flex;
      align-items: center;
      gap: 6px;
    }

    /* Individual skill result item */
    .sdd-item {
      display: flex;
      align-items: center;
      gap: 12px;
      padding: 10px 16px;
      cursor: pointer;
      transition: background 0.1s ease;
      border-left: 2px solid transparent;
    }
    .sdd-item:hover,
    .sdd-item.sdd-active {
      background: rgba(30, 41, 59, 0.8);
      border-left-color: #10b981;
    }
    .sdd-item.sdd-active {
      background: rgba(16, 185, 129, 0.08);
    }

    /* Skill info inside dropdown item */
    .sdd-item-name {
      font-size: 14px;
      font-weight: 500;
      color: #e2e8f0;
      overflow: hidden;
      text-overflow: ellipsis;
      white-space: nowrap;
    }
    .sdd-item-meta {
      font-size: 11px;
      color: #64748b;
      overflow: hidden;
      text-overflow: ellipsis;
      white-space: nowrap;
    }

    /* Risk dot indicator */
    .sdd-risk-dot {
      width: 8px;
      height: 8px;
      border-radius: 50%;
      flex-shrink: 0;
    }
    .sdd-risk-dot.critical { background: #ef4444; box-shadow: 0 0 6px rgba(239, 68, 68, 0.5); }
    .sdd-risk-dot.high { background: #f97316; box-shadow: 0 0 6px rgba(249, 115, 22, 0.4); }
    .sdd-risk-dot.medium { background: #eab308; box-shadow: 0 0 6px rgba(234, 179, 8, 0.3); }
    .sdd-risk-dot.low { background: #10b981; box-shadow: 0 0 6px rgba(16, 185, 129, 0.3); }

    /* Score pill in dropdown */
    .sdd-score-pill {
      font-family: 'JetBrains Mono', monospace;
      font-size: 11px;
      font-weight: 600;
      padding: 2px 8px;
      border-radius: 9999px;
      flex-shrink: 0;
      white-space: nowrap;
    }
    .sdd-score-pill.critical { background: rgba(239, 68, 68, 0.15); color: #f87171; }
    .sdd-score-pill.high { background: rgba(249, 115, 22, 0.15); color: #fb923c; }
    .sdd-score-pill.medium { background: rgba(234, 179, 8, 0.15); color: #facc15; }
    .sdd-score-pill.low { background: rgba(16, 185, 129, 0.15); color: #34d399; }

    /* Risk badge in dropdown */
    .sdd-risk-badge {
      font-size: 10px;
      font-weight: 700;
      padding: 1px 6px;
      border-radius: 4px;
      flex-shrink: 0;
      text-transform: uppercase;
      letter-spacing: 0.03em;
    }
    .sdd-risk-badge.critical { background: rgba(239, 68, 68, 0.15); color: #f87171; }
    .sdd-risk-badge.high { background: rgba(249, 115, 22, 0.15); color: #fb923c; }
    .sdd-risk-badge.medium { background: rgba(234, 179, 8, 0.15); color: #facc15; }
    .sdd-risk-badge.low { background: rgba(16, 185, 129, 0.15); color: #34d399; }

    /* Category suggestion item */
    .sdd-category {
      display: flex;
      align-items: center;
      gap: 10px;
      padding: 8px 16px;
      cursor: pointer;
      transition: background 0.1s ease;
      border-left: 2px solid transparent;
    }
    .sdd-category:hover,
    .sdd-category.sdd-active {
      background: rgba(30, 41, 59, 0.8);
      border-left-color: #10b981;
    }
    .sdd-category-label {
      font-size: 13px;
      color: #e2e8f0;
      font-weight: 500;
    }
    .sdd-category-count {
      font-size: 11px;
      color: #64748b;
      margin-left: auto;
    }

    /* Popular search pills */
    .sdd-popular-pills {
      display: flex;
      flex-wrap: wrap;
      gap: 8px;
      padding: 8px 16px 14px;
    }
    .sdd-popular-pill {
      padding: 6px 14px;
      font-size: 13px;
      color: #94a3b8;
      background: rgba(30, 41, 59, 0.6);
      border: 1px solid #334155;
      border-radius: 9999px;
      cursor: pointer;
      transition: all 0.15s ease;
      white-space: nowrap;
    }
    .sdd-popular-pill:hover {
      background: rgba(16, 185, 129, 0.1);
      border-color: rgba(16, 185, 129, 0.4);
      color: #34d399;
    }

    /* "Show all X results" button */
    .sdd-show-all {
      display: flex;
      align-items: center;
      justify-content: center;
      gap: 6px;
      padding: 12px 16px;
      font-size: 13px;
      font-weight: 600;
      color: #34d399;
      cursor: pointer;
      border-top: 1px solid #1e293b;
      transition: background 0.1s ease;
    }
    .sdd-show-all:hover,
    .sdd-show-all.sdd-active {
      background: rgba(16, 185, 129, 0.08);
    }

    /* No results state */
    .sdd-no-results {
      padding: 24px 16px;
      text-align: center;
    }
    .sdd-no-results-title {
      font-size: 14px;
      color: #64748b;
      margin-bottom: 8px;
    }
    .sdd-no-results-suggestions {
      font-size: 12px;
      color: #475569;
    }
    .sdd-no-results-suggestions a {
      color: #34d399;
      cursor: pointer;
      text-decoration: none;
    }
    .sdd-no-results-suggestions a:hover {
      text-decoration: underline;
    }

    /* Highlight matching text */
    .sdd-highlight {
      color: #34d399;
      font-weight: 600;
    }

    /* Separator line */
    .sdd-separator {
      height: 1px;
      background: #1e293b;
      margin: 4px 0;
    }

    /* Mobile adjustments */
    @media (max-width: 640px) {
      .search-dropdown {
        max-height: 60vh;
        border-radius: 0 0 0.75rem 0.75rem;
        top: 100%;
      }
      .sdd-item {
        padding: 12px 14px;
      }
      .sdd-popular-pills {
        gap: 6px;
      }
    }

    /* ============================================
       CATEGORY DROPDOWN
       ============================================ */
    .category-dropdown {
      position: relative;
      display: inline-block;
    }

    .category-trigger {
      display: flex;
      align-items: center;
      gap: 8px;
      padding: 8px 14px;
      background: #0f172a;
      border: 1px solid #334155;
      border-radius: 0.5rem;
      color: #cbd5e1;
      font-size: 0.875rem;
      font-weight: 500;
      cursor: pointer;
      transition: all 0.2s ease;
      white-space: nowrap;
      min-width: 180px;
    }

    .category-trigger:hover {
      border-color: #10b981;
      color: #fff;
    }

    .category-trigger.active {
      border-color: rgba(16, 185, 129, 0.5);
      color: #34d399;
      background: rgba(16, 185, 129, 0.08);
    }

    .category-trigger .trigger-chevron {
      margin-left: auto;
      transition: transform 0.2s ease;
    }

    .category-trigger.open .trigger-chevron {
      transform: rotate(180deg);
    }

    .category-trigger .clear-btn {
      display: flex;
      align-items: center;
      justify-content: center;
      width: 18px;
      height: 18px;
      border-radius: 50%;
      background: rgba(100, 116, 139, 0.3);
      color: #94a3b8;
      font-size: 12px;
      line-height: 1;
      transition: all 0.15s ease;
      flex-shrink: 0;
    }

    .category-trigger .clear-btn:hover {
      background: rgba(239, 68, 68, 0.3);
      color: #f87171;
    }

    .category-panel {
      position: absolute;
      top: calc(100% + 6px);
      left: 0;
      min-width: 280px;
      max-height: 440px;
      overflow-y: auto;
      z-index: 30;
      background: #0f172a;
      border: 1px solid #334155;
      border-radius: 0.75rem;
      box-shadow: 0 25px 50px -12px rgba(0, 0, 0, 0.6);
      opacity: 0;
      transform: translateY(-8px);
      transition: opacity 0.2s ease, transform 0.2s ease;
      pointer-events: none;
      overscroll-behavior: contain;
    }

    .category-panel.open {
      opacity: 1;
      transform: translateY(0);
      pointer-events: auto;
    }

    .category-panel::-webkit-scrollbar {
      width: 6px;
    }

    .category-panel::-webkit-scrollbar-track {
      background: transparent;
    }

    .category-panel::-webkit-scrollbar-thumb {
      background: #334155;
      border-radius: 3px;
    }

    .category-option {
      display: flex;
      align-items: center;
      gap: 10px;
      padding: 10px 14px;
      cursor: pointer;
      transition: background 0.15s ease;
      border-left: 3px solid transparent;
    }

    .category-option:first-child {
      border-radius: 0.75rem 0.75rem 0 0;
    }

    .category-option:last-child {
      border-radius: 0 0 0.75rem 0.75rem;
    }

    .category-option:hover {
      background: rgba(30, 41, 59, 0.8);
      border-left-color: rgba(16, 185, 129, 0.4);
    }

    .category-option.selected {
      background: rgba(16, 185, 129, 0.12);
      border-left-color: #10b981;
    }

    .category-option.selected .cat-name {
      color: #34d399;
      font-weight: 600;
    }

    .category-option .cat-icon {
      width: 20px;
      height: 20px;
      flex-shrink: 0;
      color: #64748b;
    }

    .category-option.selected .cat-icon {
      color: #34d399;
    }

    .category-option:hover .cat-icon {
      color: #94a3b8;
    }

    .category-option .cat-name {
      flex: 1;
      font-size: 0.875rem;
      color: #cbd5e1;
    }

    .category-option .cat-count {
      font-size: 0.75rem;
      font-family: 'JetBrains Mono', monospace;
      color: #64748b;
      background: rgba(30, 41, 59, 0.8);
      padding: 2px 8px;
      border-radius: 9999px;
      flex-shrink: 0;
    }

    .category-option.selected .cat-count {
      background: rgba(16, 185, 129, 0.15);
      color: #34d399;
    }

    /* Divider between "All" and category list */
    .category-divider {
      height: 1px;
      background: #1e293b;
      margin: 0;
    }

    /* Mobile responsiveness */
    @media (max-width: 640px) {
      .category-dropdown {
        display: block;
        width: 100%;
      }
      .category-trigger {
        width: 100%;
      }
      .category-panel {
        left: 0;
        right: 0;
        min-width: unset;
        max-height: 60vh;
      }
    }
  </style>
  
  <!-- Schema.org Structured Data -->
  <script type="application/ld+json">
  {
    "@context": "https://schema.org",
    "@type": "SoftwareApplication",
    "name": "SkillShield",
    "applicationCategory": "SecurityApplication",
    "description": "Security scanner for AI agent skills and MCPs. Scans 33,530+ extensions for malicious code, prompt injection attacks, and security vulnerabilities.",
    "url": "https://skillshield.dev",
    "operatingSystem": "Any",
    "offers": {
      "@type": "Offer",
      "price": "0",
      "priceCurrency": "USD"
    },
    "softwareVersion": "2.0",
    "author": {
      "@type": "Organization",
      "name": "SkillShield"
    }
  }
  </script>
</head>
<body class="bg-slate-950 text-slate-200 font-sans antialiased">
  
  <!-- Navigation -->
  <nav class="fixed top-0 left-0 right-0 z-50 bg-slate-950/80 backdrop-blur-xl border-b border-slate-800">
    <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
      <div class="flex items-center justify-between h-16">
        <!-- Logo -->
        <a href="#" class="flex items-center gap-3 group">
          <img src="/logo.png" alt="SkillShield" class="w-10 h-10 rounded-lg object-cover group-hover:shadow-lg group-hover:shadow-emerald-500/30 transition-all">
          <span class="font-bold text-xl text-white">
            Skill<span class="text-emerald-400">Shield</span>
          </span>
        </a>
        
        <!-- Desktop Nav -->
        <div class="hidden md:flex items-center gap-6">
          <a href="#browse" class="text-sm text-slate-400 hover:text-white transition-colors">Browse</a>
          <a href="/blog/" class="text-sm text-slate-400 hover:text-white transition-colors">Blog</a>
          <a href="#security" class="text-sm text-slate-400 hover:text-white transition-colors">Security</a>
          <a href="/faq" class="text-sm text-slate-400 hover:text-white transition-colors">FAQ</a>
          <a href="#security" class="text-sm text-slate-400 hover:text-white transition-colors">API</a>
        </div>
        
        <!-- Desktop Actions -->
        <div class="hidden md:flex items-center gap-3">
          <button onclick="alert('Coming Soon! Sign-in launching Q2 2026.')" class="px-4 py-2 text-sm text-slate-300 hover:text-white transition-colors">
            Sign In
          </button>
          <button onclick="alert('Coming Soon! Skill submissions opening Q2 2026.')" class="px-4 py-2 text-sm bg-emerald-600 hover:bg-emerald-500 text-white rounded-lg font-medium transition-all hover:shadow-lg hover:shadow-emerald-500/25">
            Submit Skill
          </button>
        </div>
        
        <!-- Mobile Menu Button -->
        <button id="mobile-menu-btn" class="md:hidden p-2 text-slate-400 hover:text-white">
          <i data-lucide="menu" class="w-6 h-6"></i>
        </button>
      </div>
    </div>
    
    <!-- Mobile Menu -->
    <div id="mobile-menu" class="mobile-menu fixed inset-0 top-16 bg-slate-950 border-r border-slate-800 md:hidden z-40">
      <div class="p-4 space-y-4">
        <a href="#browse" class="block py-2 text-slate-300 hover:text-white">Browse</a>
        <a href="/blog/" class="block py-2 text-slate-300 hover:text-white">Blog</a>
        <a href="#security" class="block py-2 text-slate-300 hover:text-white">Security</a>
        <a href="/faq" class="block py-2 text-slate-300 hover:text-white">FAQ</a>
        <a href="#security" class="block py-2 text-slate-300 hover:text-white">API</a>
        <hr class="border-slate-800">
        <button onclick="alert('Coming Soon! Sign-in launching Q2 2026.')" class="w-full py-2 text-slate-300 hover:text-white text-left">Sign In</button>
        <button onclick="alert('Coming Soon! Skill submissions opening Q2 2026.')" class="w-full py-2 bg-emerald-600 hover:bg-emerald-500 text-white rounded-lg font-medium">
          Submit Skill
        </button>
      </div>
    </div>
  </nav>

  <!-- Hero Section -->
  <section class="relative min-h-screen flex items-center justify-center pt-16 overflow-hidden">
    <!-- Background Effects -->
    <div class="absolute inset-0 grid-pattern"></div>
    <div class="absolute inset-0 bg-gradient-to-b from-slate-950 via-transparent to-slate-950"></div>
    
    <!-- Scan Line Animation -->
    <div class="scan-line"></div>
    
    <!-- Glow Orbs -->
    <div class="absolute top-1/4 left-1/4 w-96 h-96 bg-emerald-500/10 rounded-full blur-3xl"></div>
    <div class="absolute bottom-1/4 right-1/4 w-96 h-96 bg-emerald-500/5 rounded-full blur-3xl"></div>
    
    <div class="relative z-10 max-w-5xl mx-auto px-4 sm:px-6 lg:px-8 text-center">
      <!-- Malicious Stat Warning -->
      <div class="inline-flex items-center gap-2 px-4 py-2 rounded-full bg-red-500/10 border border-red-500/30 mb-4 animate-fade-in">
        <i data-lucide="alert-triangle" class="w-4 h-4 text-red-400"></i>
        <span class="text-sm text-red-400 font-medium">32% of ClawHub skills contain malicious code ‚Äî 33,746 extensions scanned</span>
      </div>
      <br>
      <!-- Security Badge -->
      <div class="inline-flex items-center gap-2 px-4 py-2 rounded-full bg-emerald-500/10 border border-emerald-500/30 mb-8 animate-fade-in">
        <i data-lucide="lock" class="w-4 h-4 text-emerald-400"></i>
        <span class="text-sm text-emerald-400 font-medium">Mandatory Security Scanning</span>
      </div>
      
      <!-- Main Headline -->
      <h1 class="text-4xl sm:text-5xl lg:text-7xl font-bold text-white mb-6 leading-tight animate-slide-up">
        The Only Skill Directory<br>
        <span class="text-transparent bg-clip-text bg-gradient-to-r from-emerald-400 to-emerald-600">
          With Security First
        </span>
      </h1>
      
      <!-- Tagline -->
      <p class="text-lg sm:text-xl text-slate-400 mb-8 max-w-2xl mx-auto animate-slide-up" style="animation-delay: 0.1s;">
        Every SKILL.md pre-scanned for malicious code, prompt injection attacks, 
        and security vulnerabilities before listing.
      </p>
      
      <!-- Animated Counter -->
      <div class="flex items-center justify-center gap-2 mb-3 animate-slide-up" style="animation-delay: 0.2s;">
        <i data-lucide="activity" class="w-5 h-5 text-emerald-400"></i>
        <span class="text-slate-400">AI Extensions Scanned:</span>
        <span id="hero-counter" class="counter-value text-2xl sm:text-3xl font-bold text-emerald-400 font-mono">0</span>
      </div>
      <div class="text-sm text-slate-500 mb-2 animate-slide-up" style="animation-delay: 0.25s;">
        <span id="hero-breakdown">1,541 Skills ‚Ä¢ 32,205 MCP Servers</span>
      </div>
      <div class="text-xs text-slate-500 mb-8 animate-slide-up" style="animation-delay: 0.28s;">
        6 Sources ‚Ä¢ ClawHub, SkillsMP, Skills.lc, MCP Registry, MCPMarket, Awesome MCP
      </div>
      
      <!-- Search Bar -->
      <div class="max-w-2xl mx-auto mb-8 animate-slide-up" style="animation-delay: 0.3s;">
        <div class="relative" id="search-wrapper">
          <div class="search-focus relative flex items-center bg-slate-900 border border-slate-700 rounded-xl overflow-hidden transition-all">
            <i data-lucide="search" class="absolute left-4 w-5 h-5 text-slate-500"></i>
            <input 
              type="text" 
              id="hero-search"
              placeholder="Search secure skills..." 
              class="w-full pl-12 pr-24 py-4 bg-transparent text-white placeholder-slate-500 focus:outline-none"
              role="combobox"
              aria-expanded="false"
              aria-controls="search-dropdown"
              aria-autocomplete="list"
              autocomplete="off"
            >
            <div class="absolute right-4 flex items-center gap-1 text-xs text-slate-500">
              <kbd class="px-2 py-1 bg-slate-800 rounded">‚åò</kbd>
              <kbd class="px-2 py-1 bg-slate-800 rounded">K</kbd>
            </div>
          </div>
          <!-- Search Dropdown -->
          <div id="search-dropdown" class="search-dropdown" role="listbox" aria-label="Search suggestions">
            <!-- Dynamically rendered by JS -->
          </div>
        </div>
      </div>
      
      <!-- CTAs -->
      <div class="flex flex-col sm:flex-row items-center justify-center gap-4 animate-slide-up" style="animation-delay: 0.4s;">
        <a href="#browse" class="w-full sm:w-auto px-8 py-3 bg-emerald-600 hover:bg-emerald-500 text-white rounded-xl font-semibold transition-all hover:shadow-lg hover:shadow-emerald-500/25 flex items-center justify-center gap-2">
          <i data-lucide="shield" class="w-5 h-5"></i>
          Browse Verified Skills
        </a>
        <button id="security-report-btn" class="w-full sm:w-auto px-8 py-3 bg-slate-800 hover:bg-slate-700 text-slate-300 hover:text-white rounded-xl font-semibold transition-all border border-slate-700 flex items-center justify-center gap-2">
          <i data-lucide="file-text" class="w-5 h-5"></i>
          Security Report
        </button>
      </div>
    </div>
    
    <!-- Scroll Indicator -->
    <div class="absolute bottom-8 left-1/2 -translate-x-1/2 animate-bounce">
      <i data-lucide="chevron-down" class="w-6 h-6 text-slate-600"></i>
    </div>
  </section>

  <!-- Trust Indicators Bar -->
  <section class="relative py-6 bg-slate-900/50 border-y border-slate-800">
    <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
      <div class="grid grid-cols-2 md:grid-cols-4 gap-6 md:gap-8">
        <!-- Stat 1 -->
        <div class="text-center">
          <div class="text-2xl md:text-3xl font-bold text-emerald-400 font-mono counter-value" data-target="33746">0</div>
          <div class="text-xs md:text-sm text-slate-500 mt-1">AI Extensions Scanned</div>
        </div>
        <!-- Stat 2 -->
        <div class="text-center">
          <div class="text-2xl md:text-3xl font-bold text-red-400 font-mono counter-value" data-target="533">0</div>
          <div class="text-xs md:text-sm text-slate-500 mt-1">Malicious Blocked</div>
        </div>
        <!-- Stat 3 -->
        <div class="text-center">
          <div class="text-2xl md:text-3xl font-bold text-emerald-400 font-mono">99.8%</div>
          <div class="text-xs md:text-sm text-slate-500 mt-1">Detection Rate</div>
        </div>
        <!-- Stat 4 -->
        <div class="text-center">
          <div class="text-sm md:text-base font-mono text-slate-300" id="last-scan">Just now</div>
          <div class="text-xs md:text-sm text-slate-500 mt-1">Last Scan</div>
        </div>
      </div>
      
      <!-- Security Badges -->
      <div class="flex flex-wrap items-center justify-center gap-3 mt-6 pt-6 border-t border-slate-800">
        <div class="flex items-center gap-2 px-3 py-1.5 rounded-full bg-emerald-500/10 border border-emerald-500/30">
          <i data-lucide="check-circle" class="w-4 h-4 text-emerald-400"></i>
          <span class="text-xs text-emerald-400">Prompt Injection Tested</span>
        </div>
        <div class="flex items-center gap-2 px-3 py-1.5 rounded-full bg-emerald-500/10 border border-emerald-500/30">
          <i data-lucide="box" class="w-4 h-4 text-emerald-400"></i>
          <span class="text-xs text-emerald-400">Sandbox Verified</span>
        </div>
        <div class="flex items-center gap-2 px-3 py-1.5 rounded-full bg-emerald-500/10 border border-emerald-500/30">
          <i data-lucide="shield-off" class="w-4 h-4 text-emerald-400"></i>
          <span class="text-xs text-emerald-400">No Exfiltration Code</span>
        </div>
      </div>
    </div>
  </section>

  <!-- Risk Breakdown Section -->
  <section class="relative py-10 bg-slate-950">
    <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
      <div class="text-center mb-8">
        <h2 class="text-2xl font-bold text-white mb-2">Risk Breakdown by Marketplace</h2>
        <p class="text-slate-400 text-sm">Real scan data from 33,746 extensions across 6 sources</p>
      </div>
      <div class="grid grid-cols-1 md:grid-cols-3 gap-6">
        <!-- ClawHub -->
        <div class="p-6 rounded-xl bg-slate-900 border border-red-500/30">
          <div class="flex items-center justify-between mb-4">
            <div class="flex items-center gap-2">
              <div class="w-8 h-8 rounded-lg bg-red-500/10 flex items-center justify-center">
                <i data-lucide="alert-octagon" class="w-4 h-4 text-red-400"></i>
              </div>
              <div>
                <h3 class="font-semibold text-white">clawhub.ai</h3>
                <p class="text-xs text-slate-500">1,416 skills</p>
              </div>
            </div>
            <span class="px-2 py-1 rounded-full text-xs font-bold bg-red-500/20 text-red-400 border border-red-500/30">‚ö†Ô∏è HIGH RISK</span>
          </div>
          <div class="space-y-2">
            <div class="flex items-center justify-between">
              <span class="text-sm text-slate-400">CRITICAL</span>
              <div class="flex items-center gap-2">
                <div class="w-24 h-2 bg-slate-700 rounded-full overflow-hidden"><div class="h-full bg-red-500 rounded-full" style="width: 32.6%"></div></div>
                <span class="text-xs text-red-400 font-mono w-12 text-right">461</span>
              </div>
            </div>
            <div class="flex items-center justify-between">
              <span class="text-sm text-slate-400">HIGH</span>
              <div class="flex items-center gap-2">
                <div class="w-24 h-2 bg-slate-700 rounded-full overflow-hidden"><div class="h-full bg-orange-500 rounded-full" style="width: 5%"></div></div>
                <span class="text-xs text-orange-400 font-mono w-12 text-right">71</span>
              </div>
            </div>
            <div class="flex items-center justify-between">
              <span class="text-sm text-slate-400">MEDIUM</span>
              <div class="flex items-center gap-2">
                <div class="w-24 h-2 bg-slate-700 rounded-full overflow-hidden"><div class="h-full bg-amber-500 rounded-full" style="width: 10.9%"></div></div>
                <span class="text-xs text-amber-400 font-mono w-12 text-right">154</span>
              </div>
            </div>
            <div class="flex items-center justify-between">
              <span class="text-sm text-slate-400">LOW</span>
              <div class="flex items-center gap-2">
                <div class="w-24 h-2 bg-slate-700 rounded-full overflow-hidden"><div class="h-full bg-emerald-500 rounded-full" style="width: 51.6%"></div></div>
                <span class="text-xs text-emerald-400 font-mono w-12 text-right">730</span>
              </div>
            </div>
          </div>
          <div class="mt-4 pt-4 border-t border-slate-800">
            <p class="text-xs text-red-400 font-medium">‚ö° 32.6% CRITICAL ‚Äî nearly 1 in 3 skills are dangerous</p>
          </div>
        </div>

        <!-- skillsmp.com -->
        <div class="p-6 rounded-xl bg-slate-900 border border-emerald-500/30">
          <div class="flex items-center justify-between mb-4">
            <div class="flex items-center gap-2">
              <div class="w-8 h-8 rounded-lg bg-emerald-500/10 flex items-center justify-center">
                <i data-lucide="shield-check" class="w-4 h-4 text-emerald-400"></i>
              </div>
              <div>
                <h3 class="font-semibold text-white">skillsmp.com</h3>
                <p class="text-xs text-slate-500">160 skills</p>
              </div>
            </div>
            <span class="px-2 py-1 rounded-full text-xs font-bold bg-emerald-500/20 text-emerald-400 border border-emerald-500/30">‚úÖ CLEAN</span>
          </div>
          <div class="space-y-2">
            <div class="flex items-center justify-between">
              <span class="text-sm text-slate-400">CRITICAL</span>
              <div class="flex items-center gap-2">
                <div class="w-24 h-2 bg-slate-700 rounded-full overflow-hidden"><div class="h-full bg-red-500 rounded-full" style="width: 0%"></div></div>
                <span class="text-xs text-slate-500 font-mono w-12 text-right">0</span>
              </div>
            </div>
            <div class="flex items-center justify-between">
              <span class="text-sm text-slate-400">HIGH</span>
              <div class="flex items-center gap-2">
                <div class="w-24 h-2 bg-slate-700 rounded-full overflow-hidden"><div class="h-full bg-orange-500 rounded-full" style="width: 0%"></div></div>
                <span class="text-xs text-slate-500 font-mono w-12 text-right">0</span>
              </div>
            </div>
            <div class="flex items-center justify-between">
              <span class="text-sm text-slate-400">MEDIUM</span>
              <div class="flex items-center gap-2">
                <div class="w-24 h-2 bg-slate-700 rounded-full overflow-hidden"><div class="h-full bg-amber-500 rounded-full" style="width: 2.5%"></div></div>
                <span class="text-xs text-amber-400 font-mono w-12 text-right">4</span>
              </div>
            </div>
            <div class="flex items-center justify-between">
              <span class="text-sm text-slate-400">LOW</span>
              <div class="flex items-center gap-2">
                <div class="w-24 h-2 bg-slate-700 rounded-full overflow-hidden"><div class="h-full bg-emerald-500 rounded-full" style="width: 97.5%"></div></div>
                <span class="text-xs text-emerald-400 font-mono w-12 text-right">156</span>
              </div>
            </div>
          </div>
          <div class="mt-4 pt-4 border-t border-slate-800">
            <p class="text-xs text-emerald-400 font-medium">‚úÖ 97.5% clean ‚Äî well-curated marketplace</p>
          </div>
        </div>

        <!-- skills.lc -->
        <div class="p-6 rounded-xl bg-slate-900 border border-emerald-500/30">
          <div class="flex items-center justify-between mb-4">
            <div class="flex items-center gap-2">
              <div class="w-8 h-8 rounded-lg bg-emerald-500/10 flex items-center justify-center">
                <i data-lucide="shield-check" class="w-4 h-4 text-emerald-400"></i>
              </div>
              <div>
                <h3 class="font-semibold text-white">skills.lc</h3>
                <p class="text-xs text-slate-500">100 skills</p>
              </div>
            </div>
            <span class="px-2 py-1 rounded-full text-xs font-bold bg-emerald-500/20 text-emerald-400 border border-emerald-500/30">‚úÖ CLEAN</span>
          </div>
          <div class="space-y-2">
            <div class="flex items-center justify-between">
              <span class="text-sm text-slate-400">CRITICAL</span>
              <div class="flex items-center gap-2">
                <div class="w-24 h-2 bg-slate-700 rounded-full overflow-hidden"><div class="h-full bg-red-500 rounded-full" style="width: 0%"></div></div>
                <span class="text-xs text-slate-500 font-mono w-12 text-right">0</span>
              </div>
            </div>
            <div class="flex items-center justify-between">
              <span class="text-sm text-slate-400">HIGH</span>
              <div class="flex items-center gap-2">
                <div class="w-24 h-2 bg-slate-700 rounded-full overflow-hidden"><div class="h-full bg-orange-500 rounded-full" style="width: 1%"></div></div>
                <span class="text-xs text-orange-400 font-mono w-12 text-right">1</span>
              </div>
            </div>
            <div class="flex items-center justify-between">
              <span class="text-sm text-slate-400">MEDIUM</span>
              <div class="flex items-center gap-2">
                <div class="w-24 h-2 bg-slate-700 rounded-full overflow-hidden"><div class="h-full bg-amber-500 rounded-full" style="width: 5%"></div></div>
                <span class="text-xs text-amber-400 font-mono w-12 text-right">5</span>
              </div>
            </div>
            <div class="flex items-center justify-between">
              <span class="text-sm text-slate-400">LOW</span>
              <div class="flex items-center gap-2">
                <div class="w-24 h-2 bg-slate-700 rounded-full overflow-hidden"><div class="h-full bg-emerald-500 rounded-full" style="width: 94%"></div></div>
                <span class="text-xs text-emerald-400 font-mono w-12 text-right">94</span>
              </div>
            </div>
          </div>
          <div class="mt-4 pt-4 border-t border-slate-800">
            <p class="text-xs text-emerald-400 font-medium">‚úÖ 94% clean ‚Äî trusted open source skills</p>
          </div>
        </div>
      </div>
    </div>
  </section>

  <!-- Browse Section -->
  <section id="browse" class="relative py-20">
    <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
      <!-- Section Header -->
      <div class="flex flex-col md:flex-row md:items-end md:justify-between gap-4 mb-8">
        <div>
          <h2 class="text-3xl font-bold text-white mb-2">Browse Skills</h2>
          <p class="text-slate-400">Discover verified, secure SKILL.md files for your AI workflows</p>
        </div>
        
        <!-- Sort Dropdown -->
        <div class="relative">
          <select id="sort-select" class="appearance-none bg-slate-900 border border-slate-700 text-slate-300 rounded-lg px-4 py-2 pr-10 focus:outline-none focus:border-emerald-500">
            <option value="security" selected>Risk Level (Worst First)</option>
            <option value="score-asc">Score (Lowest First)</option>
            <option value="score-desc">Score (Highest First)</option>
            <option value="name">Name (A-Z)</option>
          </select>
          <i data-lucide="chevron-down" class="absolute right-3 top-1/2 -translate-y-1/2 w-4 h-4 text-slate-500 pointer-events-none"></i>
        </div>
      </div>
      
      <!-- Risk Filter Tabs -->
      <div class="flex flex-wrap gap-2 mb-6">
        <button class="filter-tab active px-4 py-2 rounded-lg text-sm font-medium bg-emerald-600 text-white transition-all" data-filter="all">
          All <span class="opacity-70 ml-1" id="count-all"></span>
        </button>
        <button class="filter-tab px-4 py-2 rounded-lg text-sm font-medium bg-slate-800 text-slate-400 hover:text-white hover:bg-slate-700 transition-all" data-filter="CRITICAL">
          üî¥ Critical <span class="opacity-70 ml-1" id="count-critical"></span>
        </button>
        <button class="filter-tab px-4 py-2 rounded-lg text-sm font-medium bg-slate-800 text-slate-400 hover:text-white hover:bg-slate-700 transition-all" data-filter="HIGH">
          üü† High <span class="opacity-70 ml-1" id="count-high"></span>
        </button>
        <button class="filter-tab px-4 py-2 rounded-lg text-sm font-medium bg-slate-800 text-slate-400 hover:text-white hover:bg-slate-700 transition-all" data-filter="MEDIUM">
          ‚ö†Ô∏è Medium <span class="opacity-70 ml-1" id="count-medium"></span>
        </button>
        <button class="filter-tab px-4 py-2 rounded-lg text-sm font-medium bg-slate-800 text-slate-400 hover:text-white hover:bg-slate-700 transition-all" data-filter="LOW">
          ‚úÖ Low <span class="opacity-70 ml-1" id="count-low"></span>
        </button>
      </div>
      
      <!-- Category Filter Dropdown -->
      <div class="mb-6">
        <div class="category-dropdown" id="category-dropdown">
          <button class="category-trigger" id="category-trigger" type="button" aria-haspopup="listbox" aria-expanded="false">
            <i data-lucide="layers" class="w-4 h-4 flex-shrink-0" style="color: #64748b;"></i>
            <span id="category-trigger-label">All Categories</span>
            <span id="category-clear-btn" class="clear-btn hidden" title="Clear category filter">&times;</span>
            <i data-lucide="chevron-down" class="w-4 h-4 trigger-chevron flex-shrink-0"></i>
          </button>
          <div class="category-panel" id="category-panel" role="listbox" aria-label="Select category">
            <!-- Options injected by JS -->
          </div>
        </div>
      </div>

      <!-- Type Filter Pills -->
      <div class="flex flex-wrap items-center gap-2 mb-6" id="type-filter-bar">
        <button class="filter-pill type-pill active px-4 py-2 rounded-full text-sm border transition-all" data-type="all">
          All <span class="ml-1 text-xs" id="count-type-all">33,746</span>
        </button>
        <button class="filter-pill type-pill px-4 py-2 rounded-full text-sm border transition-all" data-type="skill">
          üîå Skills <span class="ml-1 text-xs" id="count-type-skill">1,541</span>
        </button>
        <button class="filter-pill type-pill px-4 py-2 rounded-full text-sm border transition-all" data-type="mcp">
          ‚ö° MCP Servers <span class="ml-1 text-xs" id="count-type-mcp">32,205</span>
        </button>
      </div>
      
      <!-- Source Pills -->
      <div class="flex flex-wrap gap-2 mb-8" id="source-filter-bar">
        <button class="filter-pill source-pill active px-4 py-2 rounded-full text-sm border border-slate-700 text-slate-400 hover:border-emerald-500 hover:text-emerald-400 transition-all" data-source="all">
          All Sources
        </button>
        <button class="filter-pill source-pill px-4 py-2 rounded-full text-sm border border-slate-700 text-slate-400 hover:border-emerald-500 hover:text-emerald-400 transition-all" data-source="clawhub.ai">
          üî• clawhub.ai
        </button>
        <button class="filter-pill source-pill px-4 py-2 rounded-full text-sm border border-slate-700 text-slate-400 hover:border-emerald-500 hover:text-emerald-400 transition-all" data-source="skillsmp.com">
          skillsmp.com
        </button>
        <button class="filter-pill source-pill px-4 py-2 rounded-full text-sm border border-slate-700 text-slate-400 hover:border-emerald-500 hover:text-emerald-400 transition-all" data-source="skills.lc">
          skills.lc
        </button>
      </div>
      
      <!-- Skills Grid -->
      <div id="skills-grid" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
        <!-- Skill cards will be injected by JavaScript -->
      </div>
      
      <!-- Infinite Scroll Status -->
      <div class="text-center mt-10 space-y-3">
        <div id="loading-more" class="hidden items-center justify-center gap-2 text-sm text-slate-400">
          <i data-lucide="loader-2" class="w-4 h-4 animate-spin"></i>
          Loading more...
        </div>
        <div id="scroll-sentinel" class="h-6"></div>
        <div id="load-more" class="text-xs text-slate-500">Showing 0 of 0</div>
      </div>
    </div>
  </section>

  <!-- Security Features Section -->
  <section id="security" class="relative py-20 bg-slate-900/30">
    <div class="absolute inset-0 grid-pattern opacity-50"></div>
    
    <div class="relative max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
      <!-- Section Header -->
      <div class="text-center mb-16">
        <h2 class="text-3xl md:text-4xl font-bold text-white mb-4">How We Protect You</h2>
        <p class="text-slate-400 max-w-2xl mx-auto">
          Every skill undergoes a rigorous 3-step security analysis before being listed in our directory.
        </p>
      </div>
      
      <!-- Process Steps -->
      <div class="flex flex-col md:flex-row items-center justify-center gap-6 md:gap-4 mb-16">
        <!-- Step 1 -->
        <div class="relative text-center flex-1 max-w-xs">
          <div class="w-20 h-20 mx-auto mb-6 rounded-2xl bg-slate-800 border border-slate-700 flex items-center justify-center relative">
            <i data-lucide="upload" class="w-8 h-8 text-slate-400"></i>
            <div class="absolute -top-2 -right-2 w-6 h-6 rounded-full bg-slate-700 text-xs flex items-center justify-center text-slate-300 font-mono">1</div>
          </div>
          <h3 class="text-xl font-semibold text-white mb-2">Upload</h3>
          <p class="text-slate-400 text-sm">
            Developers submit their SKILL.md files through our secure portal or API.
          </p>
        </div>
        
        <!-- Arrow -->
        <div class="hidden md:block flex-shrink-0 pt-0 md:-mt-16">
          <i data-lucide="arrow-right" class="w-8 h-8 text-slate-600"></i>
        </div>
        
        <!-- Step 2 -->
        <div class="relative text-center flex-1 max-w-xs">
          <div class="w-20 h-20 mx-auto mb-6 rounded-2xl bg-emerald-500/10 border border-emerald-500/30 flex items-center justify-center relative glow-emerald">
            <i data-lucide="scan" class="w-8 h-8 text-emerald-400"></i>
            <div class="absolute -top-2 -right-2 w-6 h-6 rounded-full bg-emerald-600 text-xs flex items-center justify-center text-white font-mono">2</div>
          </div>
          <h3 class="text-xl font-semibold text-white mb-2">Scan</h3>
          <p class="text-slate-400 text-sm">
            Our automated systems perform static analysis, prompt injection detection, and sandbox testing.
          </p>
        </div>
        
        <!-- Arrow -->
        <div class="hidden md:block flex-shrink-0 pt-0 md:-mt-16">
          <i data-lucide="arrow-right" class="w-8 h-8 text-slate-600"></i>
        </div>
        
        <!-- Step 3 -->
        <div class="relative text-center flex-1 max-w-xs">
          <div class="w-20 h-20 mx-auto mb-6 rounded-2xl bg-slate-800 border border-slate-700 flex items-center justify-center relative">
            <i data-lucide="badge-check" class="w-8 h-8 text-emerald-400"></i>
            <div class="absolute -top-2 -right-2 w-6 h-6 rounded-full bg-slate-700 text-xs flex items-center justify-center text-slate-300 font-mono">3</div>
          </div>
          <h3 class="text-xl font-semibold text-white mb-2">Verify</h3>
          <p class="text-slate-400 text-sm">
            Clean skills receive a security score and are listed. Suspicious files are quarantined.
          </p>
        </div>
      </div>
      
      <!-- Security Features Grid -->
      <div class="grid grid-cols-1 md:grid-cols-3 gap-6">
        <!-- Feature 1 -->
        <div class="p-6 rounded-xl bg-slate-900 border border-slate-800 hover:border-emerald-500/50 transition-all hover-glow">
          <div class="w-12 h-12 rounded-lg bg-blue-500/10 flex items-center justify-center mb-4">
            <i data-lucide="code-2" class="w-6 h-6 text-blue-400"></i>
          </div>
          <h4 class="text-lg font-semibold text-white mb-2">Static Analysis</h4>
          <p class="text-slate-400 text-sm mb-4">
            Deep code inspection for malicious patterns, hidden commands, and suspicious API calls.
          </p>
          <a href="#security" class="text-sm text-emerald-400 hover:text-emerald-300 flex items-center gap-1">
            Learn more <i data-lucide="arrow-right" class="w-4 h-4"></i>
          </a>
        </div>
        
        <!-- Feature 2 -->
        <div class="p-6 rounded-xl bg-slate-900 border border-slate-800 hover:border-emerald-500/50 transition-all hover-glow">
          <div class="w-12 h-12 rounded-lg bg-amber-500/10 flex items-center justify-center mb-4">
            <i data-lucide="alert-triangle" class="w-6 h-6 text-amber-400"></i>
          </div>
          <h4 class="text-lg font-semibold text-white mb-2">Prompt Injection Detection</h4>
          <p class="text-slate-400 text-sm mb-4">
            Specialized testing for jailbreak attempts, instruction overrides, and manipulation techniques.
          </p>
          <a href="#security" class="text-sm text-emerald-400 hover:text-emerald-300 flex items-center gap-1">
            Learn more <i data-lucide="arrow-right" class="w-4 h-4"></i>
          </a>
        </div>
        
        <!-- Feature 3 -->
        <div class="p-6 rounded-xl bg-slate-900 border border-slate-800 hover:border-emerald-500/50 transition-all hover-glow">
          <div class="w-12 h-12 rounded-lg bg-purple-500/10 flex items-center justify-center mb-4">
            <i data-lucide="container" class="w-6 h-6 text-purple-400"></i>
          </div>
          <h4 class="text-lg font-semibold text-white mb-2">Behavior Sandbox</h4>
          <p class="text-slate-400 text-sm mb-4">
            Isolated execution environment to observe actual runtime behavior and network activity.
          </p>
          <a href="#security" class="text-sm text-emerald-400 hover:text-emerald-300 flex items-center gap-1">
            Learn more <i data-lucide="arrow-right" class="w-4 h-4"></i>
          </a>
        </div>
      </div>
      
      <!-- Methodology Link -->
      <div class="text-center mt-10">
        <a href="#security" class="inline-flex items-center gap-2 px-6 py-3 bg-slate-800 hover:bg-slate-700 text-slate-300 hover:text-white rounded-lg font-medium transition-all border border-slate-700">
          <i data-lucide="book-open" class="w-5 h-5"></i>
          Read Full Security Methodology
        </a>
      </div>
    </div>
  </section>

  <!-- Recent Scans Feed -->
  <section class="relative py-8 bg-slate-950 border-y border-slate-800 overflow-hidden">
    <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 mb-4">
      <div class="flex items-center gap-2 text-sm text-slate-500">
        <i data-lucide="activity" class="w-4 h-4 text-emerald-400"></i>
        <span>Live Activity Feed</span>
      </div>
    </div>
    
    <div class="ticker-container relative">
      <div class="ticker-content flex gap-8 animate-ticker whitespace-nowrap" id="scan-ticker">
        <!-- Ticker items will be injected by JavaScript -->
      </div>
    </div>
  </section>

  <!-- FAQ Section -->
  <section id="faq" class="relative py-20">
    <div class="max-w-3xl mx-auto px-4 sm:px-6 lg:px-8">
      <!-- Section Header -->
      <div class="text-center mb-12">
        <h2 class="text-3xl font-bold text-white mb-4">Frequently Asked Questions</h2>
        <p class="text-slate-400">Everything you need to know about SkillShield</p>
      </div>
      
      <!-- FAQ Items -->
      <div class="space-y-4" id="faq-container">
        <!-- FAQ 1 -->
        <div class="faq-item rounded-xl bg-slate-900 border border-slate-800 overflow-hidden">
          <button class="faq-trigger w-full px-6 py-4 flex items-center justify-between text-left">
            <span class="font-medium text-white">What is a SKILL.md file?</span>
            <i data-lucide="chevron-down" class="w-5 h-5 text-slate-500 transition-transform faq-icon"></i>
          </button>
          <div class="faq-content px-6 pb-4">
            <p class="text-slate-400 text-sm">
              A SKILL.md file is a standardized documentation format that describes how an AI model should perform a specific task or use a particular tool. It contains instructions, examples, constraints, and safety guidelines that help AI systems understand and execute the skill correctly.
            </p>
          </div>
        </div>
        
        <!-- FAQ 2 -->
        <div class="faq-item rounded-xl bg-slate-900 border border-slate-800 overflow-hidden">
          <button class="faq-trigger w-full px-6 py-4 flex items-center justify-between text-left">
            <span class="font-medium text-white">How does the security scanning work?</span>
            <i data-lucide="chevron-down" class="w-5 h-5 text-slate-500 transition-transform faq-icon"></i>
          </button>
          <div class="faq-content px-6 pb-4">
            <p class="text-slate-400 text-sm">
              Our scanning process uses a combination of static analysis, pattern matching, and dynamic sandboxing. We check for malicious code patterns, prompt injection vulnerabilities, data exfiltration attempts, and unexpected behavior in isolated environments. Each scan generates a detailed security report.
            </p>
          </div>
        </div>
        
        <!-- FAQ 3 -->
        <div class="faq-item rounded-xl bg-slate-900 border border-slate-800 overflow-hidden">
          <button class="faq-trigger w-full px-6 py-4 flex items-center justify-between text-left">
            <span class="font-medium text-white">Can I submit my own skill?</span>
            <i data-lucide="chevron-down" class="w-5 h-5 text-slate-500 transition-transform faq-icon"></i>
          </button>
          <div class="faq-content px-6 pb-4">
            <p class="text-slate-400 text-sm">
              Absolutely! Anyone can submit a SKILL.md file for review. Simply create an account, upload your skill file, and our automated systems will begin the security scan. Once verified, your skill will be listed in the directory with full attribution.
            </p>
          </div>
        </div>
        
        <!-- FAQ 4 -->
        <div class="faq-item rounded-xl bg-slate-900 border border-slate-800 overflow-hidden">
          <button class="faq-trigger w-full px-6 py-4 flex items-center justify-between text-left">
            <span class="font-medium text-white">What happens if a skill fails the scan?</span>
            <i data-lucide="chevron-down" class="w-5 h-5 text-slate-500 transition-transform faq-icon"></i>
          </button>
          <div class="faq-content px-6 pb-4">
            <p class="text-slate-400 text-sm">
              Skills that fail our security checks are not listed in the public directory. The submitter receives a detailed report explaining what issues were found. Minor issues can often be fixed and resubmitted. Skills with serious security concerns are quarantined and flagged for manual review.
            </p>
          </div>
        </div>
        
        <!-- FAQ 5 -->
        <div class="faq-item rounded-xl bg-slate-900 border border-slate-800 overflow-hidden">
          <button class="faq-trigger w-full px-6 py-4 flex items-center justify-between text-left">
            <span class="font-medium text-white">Is SkillShield free to use?</span>
            <i data-lucide="chevron-down" class="w-5 h-5 text-slate-500 transition-transform faq-icon"></i>
          </button>
          <div class="faq-content px-6 pb-4">
            <p class="text-slate-400 text-sm">
              Yes! Browsing and using verified skills is completely free. We also offer free submissions for open-source skills. For commercial or high-volume submissions, we offer premium plans with priority scanning and additional features.
            </p>
          </div>
        </div>
      </div>
    </div>
  </section>

  <!-- CTA Section -->
  <section class="relative py-20">
    <div class="absolute inset-0 bg-gradient-to-b from-slate-950 via-emerald-950/20 to-slate-950"></div>
    <div class="absolute inset-0 grid-pattern opacity-30"></div>
    
    <div class="relative max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 text-center">
      <h2 class="text-3xl md:text-4xl font-bold text-white mb-4">
        Ready to Secure Your AI Skills?
      </h2>
      <p class="text-slate-400 mb-8 max-w-xl mx-auto">
        Join thousands of developers who trust SkillShield for verified, secure SKILL.md files.
      </p>
      <div class="flex flex-col sm:flex-row items-center justify-center gap-4">
        <a href="#browse" class="w-full sm:w-auto px-8 py-3 bg-emerald-600 hover:bg-emerald-500 text-white rounded-xl font-semibold transition-all hover:shadow-lg hover:shadow-emerald-500/25">
          Start Browsing
        </a>
        <button onclick="alert('Coming Soon! Skill submissions opening Q2 2026.')" class="w-full sm:w-auto px-8 py-3 bg-slate-800 hover:bg-slate-700 text-slate-300 hover:text-white rounded-xl font-semibold transition-all border border-slate-700">
          Submit a Skill
        </button>
      </div>
    </div>
  </section>

  <!-- Popular Safe Skills Section -->
  <section class="relative py-16 bg-slate-900/30">
    <div class="absolute inset-0 grid-pattern opacity-30"></div>
    <div class="relative max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
      <!-- Section Header -->
      <div class="text-center mb-12">
        <h2 class="text-3xl font-bold text-white mb-3">Popular Safe Skills</h2>
        <p class="text-slate-400 max-w-2xl mx-auto">
          Explore our collection of verified, secure skills with 100/100 security scores ‚Äî ready to install and use safely.
        </p>
      </div>
      
      <!-- Skills Grid by Category -->
      <div class="space-y-10">
        <!-- Developer Tools Category -->
        <div>
          <div class="flex items-center gap-2 mb-4">
            <i data-lucide="code" class="w-5 h-5 text-emerald-400"></i>
            <h3 class="text-xl font-semibold text-white">Developer Tools</h3>
            <span class="text-sm text-slate-500">(23 skills)</span>
          </div>
          <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-4">
            <!-- extract-errors -->
            <a href="?q=extract-errors" class="group p-4 rounded-lg bg-slate-800/50 border border-slate-700 hover:border-emerald-500/50 hover:bg-slate-800 transition-all">
              <div class="flex items-start justify-between mb-2">
                <h4 class="text-base font-medium text-white group-hover:text-emerald-400 transition-colors">extract-errors</h4>
                <span class="px-2 py-0.5 text-xs font-mono font-bold rounded bg-emerald-500/15 text-emerald-400 border border-emerald-500/30">100</span>
              </div>
              <div class="flex items-center gap-2">
                <span class="px-2 py-0.5 text-xs rounded bg-slate-700/50 text-slate-400">Developer Tools</span>
                <span class="px-2 py-0.5 text-xs font-semibold rounded bg-emerald-500/15 text-emerald-400">‚úì LOW</span>
              </div>
            </a>
            <!-- flags -->
            <a href="?q=flags" class="group p-4 rounded-lg bg-slate-800/50 border border-slate-700 hover:border-emerald-500/50 hover:bg-slate-800 transition-all">
              <div class="flex items-start justify-between mb-2">
                <h4 class="text-base font-medium text-white group-hover:text-emerald-400 transition-colors">flags</h4>
                <span class="px-2 py-0.5 text-xs font-mono font-bold rounded bg-emerald-500/15 text-emerald-400 border border-emerald-500/30">100</span>
              </div>
              <div class="flex items-center gap-2">
                <span class="px-2 py-0.5 text-xs rounded bg-slate-700/50 text-slate-400">Developer Tools</span>
                <span class="px-2 py-0.5 text-xs font-semibold rounded bg-emerald-500/15 text-emerald-400">‚úì LOW</span>
              </div>
            </a>
            <!-- verify -->
            <a href="?q=verify" class="group p-4 rounded-lg bg-slate-800/50 border border-slate-700 hover:border-emerald-500/50 hover:bg-slate-800 transition-all">
              <div class="flex items-start justify-between mb-2">
                <h4 class="text-base font-medium text-white group-hover:text-emerald-400 transition-colors">verify</h4>
                <span class="px-2 py-0.5 text-xs font-mono font-bold rounded bg-emerald-500/15 text-emerald-400 border border-emerald-500/30">100</span>
              </div>
              <div class="flex items-center gap-2">
                <span class="px-2 py-0.5 text-xs rounded bg-slate-700/50 text-slate-400">Developer Tools</span>
                <span class="px-2 py-0.5 text-xs font-semibold rounded bg-emerald-500/15 text-emerald-400">‚úì LOW</span>
              </div>
            </a>
            <!-- fix -->
            <a href="?q=fix" class="group p-4 rounded-lg bg-slate-800/50 border border-slate-700 hover:border-emerald-500/50 hover:bg-slate-800 transition-all">
              <div class="flex items-start justify-between mb-2">
                <h4 class="text-base font-medium text-white group-hover:text-emerald-400 transition-colors">fix</h4>
                <span class="px-2 py-0.5 text-xs font-mono font-bold rounded bg-emerald-500/15 text-emerald-400 border border-emerald-500/30">100</span>
              </div>
              <div class="flex items-center gap-2">
                <span class="px-2 py-0.5 text-xs rounded bg-slate-700/50 text-slate-400">Developer Tools</span>
                <span class="px-2 py-0.5 text-xs font-semibold rounded bg-emerald-500/15 text-emerald-400">‚úì LOW</span>
              </div>
            </a>
            <!-- things-mac -->
            <a href="?q=things-mac" class="group p-4 rounded-lg bg-slate-800/50 border border-slate-700 hover:border-emerald-500/50 hover:bg-slate-800 transition-all">
              <div class="flex items-start justify-between mb-2">
                <h4 class="text-base font-medium text-white group-hover:text-emerald-400 transition-colors">things-mac</h4>
                <span class="px-2 py-0.5 text-xs font-mono font-bold rounded bg-emerald-500/15 text-emerald-400 border border-emerald-500/30">100</span>
              </div>
              <div class="flex items-center gap-2">
                <span class="px-2 py-0.5 text-xs rounded bg-slate-700/50 text-slate-400">Developer Tools</span>
                <span class="px-2 py-0.5 text-xs font-semibold rounded bg-emerald-500/15 text-emerald-400">‚úì LOW</span>
              </div>
            </a>
            <!-- video-frames -->
            <a href="?q=video-frames" class="group p-4 rounded-lg bg-slate-800/50 border border-slate-700 hover:border-emerald-500/50 hover:bg-slate-800 transition-all">
              <div class="flex items-start justify-between mb-2">
                <h4 class="text-base font-medium text-white group-hover:text-emerald-400 transition-colors">video-frames</h4>
                <span class="px-2 py-0.5 text-xs font-mono font-bold rounded bg-emerald-500/15 text-emerald-400 border border-emerald-500/30">100</span>
              </div>
              <div class="flex items-center gap-2">
                <span class="px-2 py-0.5 text-xs rounded bg-slate-700/50 text-slate-400">Developer Tools</span>
                <span class="px-2 py-0.5 text-xs font-semibold rounded bg-emerald-500/15 text-emerald-400">‚úì LOW</span>
              </div>
            </a>
            <!-- blucli -->
            <a href="?q=blucli" class="group p-4 rounded-lg bg-slate-800/50 border border-slate-700 hover:border-emerald-500/50 hover:bg-slate-800 transition-all">
              <div class="flex items-start justify-between mb-2">
                <h4 class="text-base font-medium text-white group-hover:text-emerald-400 transition-colors">blucli</h4>
                <span class="px-2 py-0.5 text-xs font-mono font-bold rounded bg-emerald-500/15 text-emerald-400 border border-emerald-500/30">100</span>
              </div>
              <div class="flex items-center gap-2">
                <span class="px-2 py-0.5 text-xs rounded bg-slate-700/50 text-slate-400">Developer Tools</span>
                <span class="px-2 py-0.5 text-xs font-semibold rounded bg-emerald-500/15 text-emerald-400">‚úì LOW</span>
              </div>
            </a>
            <!-- nano-pdf -->
            <a href="?q=nano-pdf" class="group p-4 rounded-lg bg-slate-800/50 border border-slate-700 hover:border-emerald-500/50 hover:bg-slate-800 transition-all">
              <div class="flex items-start justify-between mb-2">
                <h4 class="text-base font-medium text-white group-hover:text-emerald-400 transition-colors">nano-pdf</h4>
                <span class="px-2 py-0.5 text-xs font-mono font-bold rounded bg-emerald-500/15 text-emerald-400 border border-emerald-500/30">100</span>
              </div>
              <div class="flex items-center gap-2">
                <span class="px-2 py-0.5 text-xs rounded bg-slate-700/50 text-slate-400">Developer Tools</span>
                <span class="px-2 py-0.5 text-xs font-semibold rounded bg-emerald-500/15 text-emerald-400">‚úì LOW</span>
              </div>
            </a>
            <!-- sonoscli -->
            <a href="?q=sonoscli" class="group p-4 rounded-lg bg-slate-800/50 border border-slate-700 hover:border-emerald-500/50 hover:bg-slate-800 transition-all">
              <div class="flex items-start justify-between mb-2">
                <h4 class="text-base font-medium text-white group-hover:text-emerald-400 transition-colors">sonoscli</h4>
                <span class="px-2 py-0.5 text-xs font-mono font-bold rounded bg-emerald-500/15 text-emerald-400 border border-emerald-500/30">100</span>
              </div>
              <div class="flex items-center gap-2">
                <span class="px-2 py-0.5 text-xs rounded bg-slate-700/50 text-slate-400">Developer Tools</span>
                <span class="px-2 py-0.5 text-xs font-semibold rounded bg-emerald-500/15 text-emerald-400">‚úì LOW</span>
              </div>
            </a>
            <!-- blogwatcher -->
            <a href="?q=blogwatcher" class="group p-4 rounded-lg bg-slate-800/50 border border-slate-700 hover:border-emerald-500/50 hover:bg-slate-800 transition-all">
              <div class="flex items-start justify-between mb-2">
                <h4 class="text-base font-medium text-white group-hover:text-emerald-400 transition-colors">blogwatcher</h4>
                <span class="px-2 py-0.5 text-xs font-mono font-bold rounded bg-emerald-500/15 text-emerald-400 border border-emerald-500/30">100</span>
              </div>
              <div class="flex items-center gap-2">
                <span class="px-2 py-0.5 text-xs rounded bg-slate-700/50 text-slate-400">Developer Tools</span>
                <span class="px-2 py-0.5 text-xs font-semibold rounded bg-emerald-500/15 text-emerald-400">‚úì LOW</span>
              </div>
            </a>
            <!-- songsee -->
            <a href="?q=songsee" class="group p-4 rounded-lg bg-slate-800/50 border border-slate-700 hover:border-emerald-500/50 hover:bg-slate-800 transition-all">
              <div class="flex items-start justify-between mb-2">
                <h4 class="text-base font-medium text-white group-hover:text-emerald-400 transition-colors">songsee</h4>
                <span class="px-2 py-0.5 text-xs font-mono font-bold rounded bg-emerald-500/15 text-emerald-400 border border-emerald-500/30">100</span>
              </div>
              <div class="flex items-center gap-2">
                <span class="px-2 py-0.5 text-xs rounded bg-slate-700/50 text-slate-400">Developer Tools</span>
                <span class="px-2 py-0.5 text-xs font-semibold rounded bg-emerald-500/15 text-emerald-400">‚úì LOW</span>
              </div>
            </a>
            <!-- mcporter -->
            <a href="?q=mcporter" class="group p-4 rounded-lg bg-slate-800/50 border border-slate-700 hover:border-emerald-500/50 hover:bg-slate-800 transition-all">
              <div class="flex items-start justify-between mb-2">
                <h4 class="text-base font-medium text-white group-hover:text-emerald-400 transition-colors">mcporter</h4>
                <span class="px-2 py-0.5 text-xs font-mono font-bold rounded bg-emerald-500/15 text-emerald-400 border border-emerald-500/30">100</span>
              </div>
              <div class="flex items-center gap-2">
                <span class="px-2 py-0.5 text-xs rounded bg-slate-700/50 text-slate-400">Developer Tools</span>
                <span class="px-2 py-0.5 text-xs font-semibold rounded bg-emerald-500/15 text-emerald-400">‚úì LOW</span>
              </div>
            </a>
            <!-- clawhub -->
            <a href="?q=clawhub" class="group p-4 rounded-lg bg-slate-800/50 border border-slate-700 hover:border-emerald-500/50 hover:bg-slate-800 transition-all">
              <div class="flex items-start justify-between mb-2">
                <h4 class="text-base font-medium text-white group-hover:text-emerald-400 transition-colors">clawhub</h4>
                <span class="px-2 py-0.5 text-xs font-mono font-bold rounded bg-emerald-500/15 text-emerald-400 border border-emerald-500/30">100</span>
              </div>
              <div class="flex items-center gap-2">
                <span class="px-2 py-0.5 text-xs rounded bg-slate-700/50 text-slate-400">Developer Tools</span>
                <span class="px-2 py-0.5 text-xs font-semibold rounded bg-emerald-500/15 text-emerald-400">‚úì LOW</span>
              </div>
            </a>
            <!-- imsg -->
            <a href="?q=imsg" class="group p-4 rounded-lg bg-slate-800/50 border border-slate-700 hover:border-emerald-500/50 hover:bg-slate-800 transition-all">
              <div class="flex items-start justify-between mb-2">
                <h4 class="text-base font-medium text-white group-hover:text-emerald-400 transition-colors">imsg</h4>
                <span class="px-2 py-0.5 text-xs font-mono font-bold rounded bg-emerald-500/15 text-emerald-400 border border-emerald-500/30">100</span>
              </div>
              <div class="flex items-center gap-2">
                <span class="px-2 py-0.5 text-xs rounded bg-slate-700/50 text-slate-400">Developer Tools</span>
                <span class="px-2 py-0.5 text-xs font-semibold rounded bg-emerald-500/15 text-emerald-400">‚úì LOW</span>
              </div>
            </a>
            <!-- food-order -->
            <a href="?q=food-order" class="group p-4 rounded-lg bg-slate-800/50 border border-slate-700 hover:border-emerald-500/50 hover:bg-slate-800 transition-all">
              <div class="flex items-start justify-between mb-2">
                <h4 class="text-base font-medium text-white group-hover:text-emerald-400 transition-colors">food-order</h4>
                <span class="px-2 py-0.5 text-xs font-mono font-bold rounded bg-emerald-500/15 text-emerald-400 border border-emerald-500/30">100</span>
              </div>
              <div class="flex items-center gap-2">
                <span class="px-2 py-0.5 text-xs rounded bg-slate-700/50 text-slate-400">Developer Tools</span>
                <span class="px-2 py-0.5 text-xs font-semibold rounded bg-emerald-500/15 text-emerald-400">‚úì LOW</span>
              </div>
            </a>
            <!-- openhue -->
            <a href="?q=openhue" class="group p-4 rounded-lg bg-slate-800/50 border border-slate-700 hover:border-emerald-500/50 hover:bg-slate-800 transition-all">
              <div class="flex items-start justify-between mb-2">
                <h4 class="text-base font-medium text-white group-hover:text-emerald-400 transition-colors">openhue</h4>
                <span class="px-2 py-0.5 text-xs font-mono font-bold rounded bg-emerald-500/15 text-emerald-400 border border-emerald-500/30">100</span>
              </div>
              <div class="flex items-center gap-2">
                <span class="px-2 py-0.5 text-xs rounded bg-slate-700/50 text-slate-400">Developer Tools</span>
                <span class="px-2 py-0.5 text-xs font-semibold rounded bg-emerald-500/15 text-emerald-400">‚úì LOW</span>
              </div>
            </a>
            <!-- ordercli -->
            <a href="?q=ordercli" class="group p-4 rounded-lg bg-slate-800/50 border border-slate-700 hover:border-emerald-500/50 hover:bg-slate-800 transition-all">
              <div class="flex items-start justify-between mb-2">
                <h4 class="text-base font-medium text-white group-hover:text-emerald-400 transition-colors">ordercli</h4>
                <span class="px-2 py-0.5 text-xs font-mono font-bold rounded bg-emerald-500/15 text-emerald-400 border border-emerald-500/30">100</span>
              </div>
              <div class="flex items-center gap-2">
                <span class="px-2 py-0.5 text-xs rounded bg-slate-700/50 text-slate-400">Developer Tools</span>
                <span class="px-2 py-0.5 text-xs font-semibold rounded bg-emerald-500/15 text-emerald-400">‚úì LOW</span>
              </div>
            </a>
            <!-- wacli -->
            <a href="?q=wacli" class="group p-4 rounded-lg bg-slate-800/50 border border-slate-700 hover:border-emerald-500/50 hover:bg-slate-800 transition-all">
              <div class="flex items-start justify-between mb-2">
                <h4 class="text-base font-medium text-white group-hover:text-emerald-400 transition-colors">wacli</h4>
                <span class="px-2 py-0.5 text-xs font-mono font-bold rounded bg-emerald-500/15 text-emerald-400 border border-emerald-500/30">100</span>
              </div>
              <div class="flex items-center gap-2">
                <span class="px-2 py-0.5 text-xs rounded bg-slate-700/50 text-slate-400">Developer Tools</span>
                <span class="px-2 py-0.5 text-xs font-semibold rounded bg-emerald-500/15 text-emerald-400">‚úì LOW</span>
              </div>
            </a>
            <!-- apple-notes -->
            <a href="?q=apple-notes" class="group p-4 rounded-lg bg-slate-800/50 border border-slate-700 hover:border-emerald-500/50 hover:bg-slate-800 transition-all">
              <div class="flex items-start justify-between mb-2">
                <h4 class="text-base font-medium text-white group-hover:text-emerald-400 transition-colors">apple-notes</h4>
                <span class="px-2 py-0.5 text-xs font-mono font-bold rounded bg-emerald-500/15 text-emerald-400 border border-emerald-500/30">100</span>
              </div>
              <div class="flex items-center gap-2">
                <span class="px-2 py-0.5 text-xs rounded bg-slate-700/50 text-slate-400">Developer Tools</span>
                <span class="px-2 py-0.5 text-xs font-semibold rounded bg-emerald-500/15 text-emerald-400">‚úì LOW</span>
              </div>
            </a>
            <!-- release-note-generation -->
            <a href="?q=release-note-generation" class="group p-4 rounded-lg bg-slate-800/50 border border-slate-700 hover:border-emerald-500/50 hover:bg-slate-800 transition-all">
              <div class="flex items-start justify-between mb-2">
                <h4 class="text-base font-medium text-white group-hover:text-emerald-400 transition-colors">release-note-generation</h4>
                <span class="px-2 py-0.5 text-xs font-mono font-bold rounded bg-emerald-500/15 text-emerald-400 border border-emerald-500/30">100</span>
              </div>
              <div class="flex items-center gap-2">
                <span class="px-2 py-0.5 text-xs rounded bg-slate-700/50 text-slate-400">Developer Tools</span>
                <span class="px-2 py-0.5 text-xs font-semibold rounded bg-emerald-500/15 text-emerald-400">‚úì LOW</span>
              </div>
            </a>
            <!-- github -->
            <a href="?q=github" class="group p-4 rounded-lg bg-slate-800/50 border border-slate-700 hover:border-emerald-500/50 hover:bg-slate-800 transition-all">
              <div class="flex items-start justify-between mb-2">
                <h4 class="text-base font-medium text-white group-hover:text-emerald-400 transition-colors">github</h4>
                <span class="px-2 py-0.5 text-xs font-mono font-bold rounded bg-emerald-500/15 text-emerald-400 border border-emerald-500/30">100</span>
              </div>
              <div class="flex items-center gap-2">
                <span class="px-2 py-0.5 text-xs rounded bg-slate-700/50 text-slate-400">Developer Tools</span>
                <span class="px-2 py-0.5 text-xs font-semibold rounded bg-emerald-500/15 text-emerald-400">‚úì LOW</span>
              </div>
            </a>
            <!-- e2e-studio-tests -->
            <a href="?q=e2e-studio-tests" class="group p-4 rounded-lg bg-slate-800/50 border border-slate-700 hover:border-emerald-500/50 hover:bg-slate-800 transition-all">
              <div class="flex items-start justify-between mb-2">
                <h4 class="text-base font-medium text-white group-hover:text-emerald-400 transition-colors">e2e-studio-tests</h4>
                <span class="px-2 py-0.5 text-xs font-mono font-bold rounded bg-emerald-500/15 text-emerald-400 border border-emerald-500/30">100</span>
              </div>
              <div class="flex items-center gap-2">
                <span class="px-2 py-0.5 text-xs rounded bg-slate-700/50 text-slate-400">Developer Tools</span>
                <span class="px-2 py-0.5 text-xs font-semibold rounded bg-emerald-500/15 text-emerald-400">‚úì LOW</span>
              </div>
            </a>
            <!-- at-dispatch-v2 -->
            <a href="?q=at-dispatch-v2" class="group p-4 rounded-lg bg-slate-800/50 border border-slate-700 hover:border-emerald-500/50 hover:bg-slate-800 transition-all">
              <div class="flex items-start justify-between mb-2">
                <h4 class="text-base font-medium text-white group-hover:text-emerald-400 transition-colors">at-dispatch-v2</h4>
                <span class="px-2 py-0.5 text-xs font-mono font-bold rounded bg-emerald-500/15 text-emerald-400 border border-emerald-500/30">100</span>
              </div>
              <div class="flex items-center gap-2">
                <span class="px-2 py-0.5 text-xs rounded bg-slate-700/50 text-slate-400">Developer Tools</span>
                <span class="px-2 py-0.5 text-xs font-semibold rounded bg-emerald-500/15 text-emerald-400">‚úì LOW</span>
              </div>
            </a>
          </div>
        </div>
        
        <!-- AI & ML Category -->
        <div>
          <div class="flex items-center gap-2 mb-4">
            <i data-lucide="brain" class="w-5 h-5 text-emerald-400"></i>
            <h3 class="text-xl font-semibold text-white">AI & Machine Learning</h3>
            <span class="text-sm text-slate-500">(3 skills)</span>
          </div>
          <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-4">
            <!-- obsidian -->
            <a href="?q=obsidian" class="group p-4 rounded-lg bg-slate-800/50 border border-slate-700 hover:border-emerald-500/50 hover:bg-slate-800 transition-all">
              <div class="flex items-start justify-between mb-2">
                <h4 class="text-base font-medium text-white group-hover:text-emerald-400 transition-colors">obsidian</h4>
                <span class="px-2 py-0.5 text-xs font-mono font-bold rounded bg-emerald-500/15 text-emerald-400 border border-emerald-500/30">100</span>
              </div>
              <div class="flex items-center gap-2">
                <span class="px-2 py-0.5 text-xs rounded bg-slate-700/50 text-slate-400">AI & ML</span>
                <span class="px-2 py-0.5 text-xs font-semibold rounded bg-emerald-500/15 text-emerald-400">‚úì LOW</span>
              </div>
            </a>
            <!-- gog -->
            <a href="?q=gog" class="group p-4 rounded-lg bg-slate-800/50 border border-slate-700 hover:border-emerald-500/50 hover:bg-slate-800 transition-all">
              <div class="flex items-start justify-between mb-2">
                <h4 class="text-base font-medium text-white group-hover:text-emerald-400 transition-colors">gog</h4>
                <span class="px-2 py-0.5 text-xs font-mono font-bold rounded bg-emerald-500/15 text-emerald-400 border border-emerald-500/30">100</span>
              </div>
              <div class="flex items-center gap-2">
                <span class="px-2 py-0.5 text-xs rounded bg-slate-700/50 text-slate-400">AI & ML</span>
                <span class="px-2 py-0.5 text-xs font-semibold rounded bg-emerald-500/15 text-emerald-400">‚úì LOW</span>
              </div>
            </a>
            <!-- openai-whisper -->
            <a href="?q=openai-whisper" class="group p-4 rounded-lg bg-slate-800/50 border border-slate-700 hover:border-emerald-500/50 hover:bg-slate-800 transition-all">
              <div class="flex items-start justify-between mb-2">
                <h4 class="text-base font-medium text-white group-hover:text-emerald-400 transition-colors">openai-whisper</h4>
                <span class="px-2 py-0.5 text-xs font-mono font-bold rounded bg-emerald-500/15 text-emerald-400 border border-emerald-500/30">100</span>
              </div>
              <div class="flex items-center gap-2">
                <span class="px-2 py-0.5 text-xs rounded bg-slate-700/50 text-slate-400">AI & ML</span>
                <span class="px-2 py-0.5 text-xs font-semibold rounded bg-emerald-500/15 text-emerald-400">‚úì LOW</span>
              </div>
            </a>
          </div>
        </div>
        
        <!-- Other Categories (4 skills combined) -->
        <div>
          <div class="flex items-center gap-2 mb-4">
            <i data-lucide="grid" class="w-5 h-5 text-emerald-400"></i>
            <h3 class="text-xl font-semibold text-white">More Safe Skills</h3>
            <span class="text-sm text-slate-500">(4 skills)</span>
          </div>
          <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-4">
            <!-- add-uint-support (Media & Content) -->
            <a href="?q=add-uint-support" class="group p-4 rounded-lg bg-slate-800/50 border border-slate-700 hover:border-emerald-500/50 hover:bg-slate-800 transition-all">
              <div class="flex items-start justify-between mb-2">
                <h4 class="text-base font-medium text-white group-hover:text-emerald-400 transition-colors">add-uint-support</h4>
                <span class="px-2 py-0.5 text-xs font-mono font-bold rounded bg-emerald-500/15 text-emerald-400 border border-emerald-500/30">100</span>
              </div>
              <div class="flex items-center gap-2">
                <span class="px-2 py-0.5 text-xs rounded bg-slate-700/50 text-slate-400">Media & Content</span>
                <span class="px-2 py-0.5 text-xs font-semibold rounded bg-emerald-500/15 text-emerald-400">‚úì LOW</span>
              </div>
            </a>
            <!-- update-docs (Other) -->
            <a href="?q=update-docs" class="group p-4 rounded-lg bg-slate-800/50 border border-slate-700 hover:border-emerald-500/50 hover:bg-slate-800 transition-all">
              <div class="flex items-start justify-between mb-2">
                <h4 class="text-base font-medium text-white group-hover:text-emerald-400 transition-colors">update-docs</h4>
                <span class="px-2 py-0.5 text-xs font-mono font-bold rounded bg-emerald-500/15 text-emerald-400 border border-emerald-500/30">100</span>
              </div>
              <div class="flex items-center gap-2">
                <span class="px-2 py-0.5 text-xs rounded bg-slate-700/50 text-slate-400">Other</span>
                <span class="px-2 py-0.5 text-xs font-semibold rounded bg-emerald-500/15 text-emerald-400">‚úì LOW</span>
              </div>
            </a>
            <!-- docstring (Other) -->
            <a href="?q=docstring" class="group p-4 rounded-lg bg-slate-800/50 border border-slate-700 hover:border-emerald-500/50 hover:bg-slate-800 transition-all">
              <div class="flex items-start justify-between mb-2">
                <h4 class="text-base font-medium text-white group-hover:text-emerald-400 transition-colors">docstring</h4>
                <span class="px-2 py-0.5 text-xs font-mono font-bold rounded bg-emerald-500/15 text-emerald-400 border border-emerald-500/30">100</span>
              </div>
              <div class="flex items-center gap-2">
                <span class="px-2 py-0.5 text-xs rounded bg-slate-700/50 text-slate-400">Other</span>
                <span class="px-2 py-0.5 text-xs font-semibold rounded bg-emerald-500/15 text-emerald-400">‚úì LOW</span>
              </div>
            </a>
            <!-- metal-kernel (Smart Home & IoT) -->
            <a href="?q=metal-kernel" class="group p-4 rounded-lg bg-slate-800/50 border border-slate-700 hover:border-emerald-500/50 hover:bg-slate-800 transition-all">
              <div class="flex items-start justify-between mb-2">
                <h4 class="text-base font-medium text-white group-hover:text-emerald-400 transition-colors">metal-kernel</h4>
                <span class="px-2 py-0.5 text-xs font-mono font-bold rounded bg-emerald-500/15 text-emerald-400 border border-emerald-500/30">100</span>
              </div>
              <div class="flex items-center gap-2">
                <span class="px-2 py-0.5 text-xs rounded bg-slate-700/50 text-slate-400">Smart Home & IoT</span>
                <span class="px-2 py-0.5 text-xs font-semibold rounded bg-emerald-500/15 text-emerald-400">‚úì LOW</span>
              </div>
            </a>
          </div>
        </div>
      </div>
      
      <!-- View All Link -->
      <div class="text-center mt-10">
        <a href="#browse" class="inline-flex items-center gap-2 px-6 py-3 bg-emerald-600 hover:bg-emerald-500 text-white rounded-lg font-medium transition-all hover:shadow-lg hover:shadow-emerald-500/25">
          <i data-lucide="arrow-right" class="w-4 h-4"></i>
          Browse All Verified Skills
        </a>
      </div>
    </div>
  </section>

  <!-- Footer -->
  <footer class="relative py-12 border-t border-slate-800">
    <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
      <div class="grid grid-cols-2 md:grid-cols-4 gap-8 mb-8">
        <!-- Brand -->
        <div class="col-span-2 md:col-span-1">
          <a href="#" class="flex items-center gap-2 mb-4">
            <div class="w-8 h-8 rounded-lg bg-gradient-to-br from-emerald-500 to-emerald-700 flex items-center justify-center">
              <i data-lucide="shield-check" class="w-5 h-5 text-white"></i>
            </div>
            <span class="font-bold text-xl text-white">
              Skill<span class="text-emerald-400">Shield</span>
            </span>
          </a>
          <p class="text-sm text-slate-500">
            The only skill marketplace with mandatory security scanning.
          </p>
        </div>
        
        <!-- Links -->
        <div>
          <h4 class="font-semibold text-white mb-4">Product</h4>
          <ul class="space-y-2">
            <li><a href="#browse" class="text-sm text-slate-400 hover:text-white transition-colors">Browse Skills</a></li>
            <li><a href="javascript:void(0)" onclick="alert('Coming Soon! Skill submissions opening Q2 2026.')" class="text-sm text-slate-400 hover:text-white transition-colors">Submit Skill</a></li>
            <li><a href="#security" class="text-sm text-slate-400 hover:text-white transition-colors">API</a></li>
            <li><a href="javascript:void(0)" onclick="alert('Coming Soon! Pricing details launching Q2 2026.')" class="text-sm text-slate-400 hover:text-white transition-colors">Pricing</a></li>
          </ul>
        </div>
        
        <div>
          <h4 class="font-semibold text-white mb-4">Security</h4>
          <ul class="space-y-2">
            <li><a href="#security" class="text-sm text-slate-400 hover:text-white transition-colors">How It Works</a></li>
            <li><a href="#security" class="text-sm text-slate-400 hover:text-white transition-colors">Methodology</a></li>
            <li><a href="javascript:void(0)" onclick="document.getElementById('security-report-btn').click()" class="text-sm text-slate-400 hover:text-white transition-colors">Security Report</a></li>
            <li><a href="#security" class="text-sm text-slate-400 hover:text-white transition-colors">Vulnerability Disclosure</a></li>
          </ul>
        </div>
        
        <div>
          <h4 class="font-semibold text-white mb-4">Legal</h4>
          <ul class="space-y-2">
            <li><a href="/privacy" class="text-sm text-slate-400 hover:text-white transition-colors">Privacy Policy</a></li>
            <li><a href="/terms" class="text-sm text-slate-400 hover:text-white transition-colors">Terms of Service</a></li>
            <li><a href="/faq" class="text-sm text-slate-400 hover:text-white transition-colors">FAQ</a></li>
            <li><a href="https://x.com/charlescsturt" target="_blank" class="text-sm text-slate-400 hover:text-white transition-colors">Contact on X</a></li>
          </ul>
        </div>
      </div>
      
      <!-- Popular Skills Section -->
      <div class="pt-8 border-t border-slate-800 mb-8">
        <h3 class="text-xl font-bold text-white mb-4 flex items-center gap-2">
          <i data-lucide="sparkles" class="w-5 h-5 text-emerald-400"></i>
          Featured Safe Skills
        </h3>
        <p class="text-sm text-slate-500 mb-6">Explore our top-rated, security-verified skills for AI agents</p>
        
        <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-4">
          <!-- extract-errors -->
          <a href="?q=extract-errors" class="group block p-4 bg-slate-900 border border-slate-800 rounded-lg hover:border-emerald-500/50 hover:bg-slate-800/80 transition-all">
            <div class="flex items-start justify-between mb-2">
              <h4 class="font-medium text-white group-hover:text-emerald-400 transition-colors text-sm">extract-errors</h4>
              <span class="px-2 py-0.5 text-xs font-bold rounded bg-emerald-500/15 text-emerald-400 border border-emerald-500/30">100</span>
            </div>
            <div class="flex items-center gap-2 text-xs">
              <span class="text-slate-500">Developer Tools</span>
              <span class="w-1 h-1 rounded-full bg-slate-700"></span>
              <span class="text-emerald-400 font-medium">LOW</span>
            </div>
          </a>
          
          <!-- flags -->
          <a href="?q=flags" class="group block p-4 bg-slate-900 border border-slate-800 rounded-lg hover:border-emerald-500/50 hover:bg-slate-800/80 transition-all">
            <div class="flex items-start justify-between mb-2">
              <h4 class="font-medium text-white group-hover:text-emerald-400 transition-colors text-sm">flags</h4>
              <span class="px-2 py-0.5 text-xs font-bold rounded bg-emerald-500/15 text-emerald-400 border border-emerald-500/30">100</span>
            </div>
            <div class="flex items-center gap-2 text-xs">
              <span class="text-slate-500">Developer Tools</span>
              <span class="w-1 h-1 rounded-full bg-slate-700"></span>
              <span class="text-emerald-400 font-medium">LOW</span>
            </div>
          </a>
          
          <!-- verify -->
          <a href="?q=verify" class="group block p-4 bg-slate-900 border border-slate-800 rounded-lg hover:border-emerald-500/50 hover:bg-slate-800/80 transition-all">
            <div class="flex items-start justify-between mb-2">
              <h4 class="font-medium text-white group-hover:text-emerald-400 transition-colors text-sm">verify</h4>
              <span class="px-2 py-0.5 text-xs font-bold rounded bg-emerald-500/15 text-emerald-400 border border-emerald-500/30">100</span>
            </div>
            <div class="flex items-center gap-2 text-xs">
              <span class="text-slate-500">Developer Tools</span>
              <span class="w-1 h-1 rounded-full bg-slate-700"></span>
              <span class="text-emerald-400 font-medium">LOW</span>
            </div>
          </a>
          
          <!-- fix -->
          <a href="?q=fix" class="group block p-4 bg-slate-900 border border-slate-800 rounded-lg hover:border-emerald-500/50 hover:bg-slate-800/80 transition-all">
            <div class="flex items-start justify-between mb-2">
              <h4 class="font-medium text-white group-hover:text-emerald-400 transition-colors text-sm">fix</h4>
              <span class="px-2 py-0.5 text-xs font-bold rounded bg-emerald-500/15 text-emerald-400 border border-emerald-500/30">100</span>
            </div>
            <div class="flex items-center gap-2 text-xs">
              <span class="text-slate-500">Developer Tools</span>
              <span class="w-1 h-1 rounded-full bg-slate-700"></span>
              <span class="text-emerald-400 font-medium">LOW</span>
            </div>
          </a>
          
          <!-- things-mac -->
          <a href="?q=things-mac" class="group block p-4 bg-slate-900 border border-slate-800 rounded-lg hover:border-emerald-500/50 hover:bg-slate-800/80 transition-all">
            <div class="flex items-start justify-between mb-2">
              <h4 class="font-medium text-white group-hover:text-emerald-400 transition-colors text-sm">things-mac</h4>
              <span class="px-2 py-0.5 text-xs font-bold rounded bg-emerald-500/15 text-emerald-400 border border-emerald-500/30">100</span>
            </div>
            <div class="flex items-center gap-2 text-xs">
              <span class="text-slate-500">Developer Tools</span>
              <span class="w-1 h-1 rounded-full bg-slate-700"></span>
              <span class="text-emerald-400 font-medium">LOW</span>
            </div>
          </a>
          
          <!-- video-frames -->
          <a href="?q=video-frames" class="group block p-4 bg-slate-900 border border-slate-800 rounded-lg hover:border-emerald-500/50 hover:bg-slate-800/80 transition-all">
            <div class="flex items-start justify-between mb-2">
              <h4 class="font-medium text-white group-hover:text-emerald-400 transition-colors text-sm">video-frames</h4>
              <span class="px-2 py-0.5 text-xs font-bold rounded bg-emerald-500/15 text-emerald-400 border border-emerald-500/30">100</span>
            </div>
            <div class="flex items-center gap-2 text-xs">
              <span class="text-slate-500">Developer Tools</span>
              <span class="w-1 h-1 rounded-full bg-slate-700"></span>
              <span class="text-emerald-400 font-medium">LOW</span>
            </div>
          </a>
          
          <!-- blucli -->
          <a href="?q=blucli" class="group block p-4 bg-slate-900 border border-slate-800 rounded-lg hover:border-emerald-500/50 hover:bg-slate-800/80 transition-all">
            <div class="flex items-start justify-between mb-2">
              <h4 class="font-medium text-white group-hover:text-emerald-400 transition-colors text-sm">blucli</h4>
              <span class="px-2 py-0.5 text-xs font-bold rounded bg-emerald-500/15 text-emerald-400 border border-emerald-500/30">100</span>
            </div>
            <div class="flex items-center gap-2 text-xs">
              <span class="text-slate-500">Developer Tools</span>
              <span class="w-1 h-1 rounded-full bg-slate-700"></span>
              <span class="text-emerald-400 font-medium">LOW</span>
            </div>
          </a>
          
          <!-- nano-pdf -->
          <a href="?q=nano-pdf" class="group block p-4 bg-slate-900 border border-slate-800 rounded-lg hover:border-emerald-500/50 hover:bg-slate-800/80 transition-all">
            <div class="flex items-start justify-between mb-2">
              <h4 class="font-medium text-white group-hover:text-emerald-400 transition-colors text-sm">nano-pdf</h4>
              <span class="px-2 py-0.5 text-xs font-bold rounded bg-emerald-500/15 text-emerald-400 border border-emerald-500/30">100</span>
            </div>
            <div class="flex items-center gap-2 text-xs">
              <span class="text-slate-500">Developer Tools</span>
              <span class="w-1 h-1 rounded-full bg-slate-700"></span>
              <span class="text-emerald-400 font-medium">LOW</span>
            </div>
          </a>
          
          <!-- sonoscli -->
          <a href="?q=sonoscli" class="group block p-4 bg-slate-900 border border-slate-800 rounded-lg hover:border-emerald-500/50 hover:bg-slate-800/80 transition-all">
            <div class="flex items-start justify-between mb-2">
              <h4 class="font-medium text-white group-hover:text-emerald-400 transition-colors text-sm">sonoscli</h4>
              <span class="px-2 py-0.5 text-xs font-bold rounded bg-emerald-500/15 text-emerald-400 border border-emerald-500/30">100</span>
            </div>
            <div class="flex items-center gap-2 text-xs">
              <span class="text-slate-500">Developer Tools</span>
              <span class="w-1 h-1 rounded-full bg-slate-700"></span>
              <span class="text-emerald-400 font-medium">LOW</span>
            </div>
          </a>
          
          <!-- blogwatcher -->
          <a href="?q=blogwatcher" class="group block p-4 bg-slate-900 border border-slate-800 rounded-lg hover:border-emerald-500/50 hover:bg-slate-800/80 transition-all">
            <div class="flex items-start justify-between mb-2">
              <h4 class="font-medium text-white group-hover:text-emerald-400 transition-colors text-sm">blogwatcher</h4>
              <span class="px-2 py-0.5 text-xs font-bold rounded bg-emerald-500/15 text-emerald-400 border border-emerald-500/30">100</span>
            </div>
            <div class="flex items-center gap-2 text-xs">
              <span class="text-slate-500">Developer Tools</span>
              <span class="w-1 h-1 rounded-full bg-slate-700"></span>
              <span class="text-emerald-400 font-medium">LOW</span>
            </div>
          </a>
          
          <!-- songsee -->
          <a href="?q=songsee" class="group block p-4 bg-slate-900 border border-slate-800 rounded-lg hover:border-emerald-500/50 hover:bg-slate-800/80 transition-all">
            <div class="flex items-start justify-between mb-2">
              <h4 class="font-medium text-white group-hover:text-emerald-400 transition-colors text-sm">songsee</h4>
              <span class="px-2 py-0.5 text-xs font-bold rounded bg-emerald-500/15 text-emerald-400 border border-emerald-500/30">100</span>
            </div>
            <div class="flex items-center gap-2 text-xs">
              <span class="text-slate-500">Developer Tools</span>
              <span class="w-1 h-1 rounded-full bg-slate-700"></span>
              <span class="text-emerald-400 font-medium">LOW</span>
            </div>
          </a>
          
          <!-- mcporter -->
          <a href="?q=mcporter" class="group block p-4 bg-slate-900 border border-slate-800 rounded-lg hover:border-emerald-500/50 hover:bg-slate-800/80 transition-all">
            <div class="flex items-start justify-between mb-2">
              <h4 class="font-medium text-white group-hover:text-emerald-400 transition-colors text-sm">mcporter</h4>
              <span class="px-2 py-0.5 text-xs font-bold rounded bg-emerald-500/15 text-emerald-400 border border-emerald-500/30">100</span>
            </div>
            <div class="flex items-center gap-2 text-xs">
              <span class="text-slate-500">Developer Tools</span>
              <span class="w-1 h-1 rounded-full bg-slate-700"></span>
              <span class="text-emerald-400 font-medium">LOW</span>
            </div>
          </a>
          
          <!-- clawhub -->
          <a href="?q=clawhub" class="group block p-4 bg-slate-900 border border-slate-800 rounded-lg hover:border-emerald-500/50 hover:bg-slate-800/80 transition-all">
            <div class="flex items-start justify-between mb-2">
              <h4 class="font-medium text-white group-hover:text-emerald-400 transition-colors text-sm">clawhub</h4>
              <span class="px-2 py-0.5 text-xs font-bold rounded bg-emerald-500/15 text-emerald-400 border border-emerald-500/30">100</span>
            </div>
            <div class="flex items-center gap-2 text-xs">
              <span class="text-slate-500">Developer Tools</span>
              <span class="w-1 h-1 rounded-full bg-slate-700"></span>
              <span class="text-emerald-400 font-medium">LOW</span>
            </div>
          </a>
          
          <!-- imsg -->
          <a href="?q=imsg" class="group block p-4 bg-slate-900 border border-slate-800 rounded-lg hover:border-emerald-500/50 hover:bg-slate-800/80 transition-all">
            <div class="flex items-start justify-between mb-2">
              <h4 class="font-medium text-white group-hover:text-emerald-400 transition-colors text-sm">imsg</h4>
              <span class="px-2 py-0.5 text-xs font-bold rounded bg-emerald-500/15 text-emerald-400 border border-emerald-500/30">100</span>
            </div>
            <div class="flex items-center gap-2 text-xs">
              <span class="text-slate-500">Developer Tools</span>
              <span class="w-1 h-1 rounded-full bg-slate-700"></span>
              <span class="text-emerald-400 font-medium">LOW</span>
            </div>
          </a>
          
          <!-- food-order -->
          <a href="?q=food-order" class="group block p-4 bg-slate-900 border border-slate-800 rounded-lg hover:border-emerald-500/50 hover:bg-slate-800/80 transition-all">
            <div class="flex items-start justify-between mb-2">
              <h4 class="font-medium text-white group-hover:text-emerald-400 transition-colors text-sm">food-order</h4>
              <span class="px-2 py-0.5 text-xs font-bold rounded bg-emerald-500/15 text-emerald-400 border border-emerald-500/30">100</span>
            </div>
            <div class="flex items-center gap-2 text-xs">
              <span class="text-slate-500">Developer Tools</span>
              <span class="w-1 h-1 rounded-full bg-slate-700"></span>
              <span class="text-emerald-400 font-medium">LOW</span>
            </div>
          </a>
          
          <!-- obsidian -->
          <a href="?q=obsidian" class="group block p-4 bg-slate-900 border border-slate-800 rounded-lg hover:border-emerald-500/50 hover:bg-slate-800/80 transition-all">
            <div class="flex items-start justify-between mb-2">
              <h4 class="font-medium text-white group-hover:text-emerald-400 transition-colors text-sm">obsidian</h4>
              <span class="px-2 py-0.5 text-xs font-bold rounded bg-emerald-500/15 text-emerald-400 border border-emerald-500/30">100</span>
            </div>
            <div class="flex items-center gap-2 text-xs">
              <span class="text-slate-500">AI & ML</span>
              <span class="w-1 h-1 rounded-full bg-slate-700"></span>
              <span class="text-emerald-400 font-medium">LOW</span>
            </div>
          </a>
          
          <!-- gog -->
          <a href="?q=gog" class="group block p-4 bg-slate-900 border border-slate-800 rounded-lg hover:border-emerald-500/50 hover:bg-slate-800/80 transition-all">
            <div class="flex items-start justify-between mb-2">
              <h4 class="font-medium text-white group-hover:text-emerald-400 transition-colors text-sm">gog</h4>
              <span class="px-2 py-0.5 text-xs font-bold rounded bg-emerald-500/15 text-emerald-400 border border-emerald-500/30">100</span>
            </div>
            <div class="flex items-center gap-2 text-xs">
              <span class="text-slate-500">AI & ML</span>
              <span class="w-1 h-1 rounded-full bg-slate-700"></span>
              <span class="text-emerald-400 font-medium">LOW</span>
            </div>
          </a>
          
          <!-- openhue -->
          <a href="?q=openhue" class="group block p-4 bg-slate-900 border border-slate-800 rounded-lg hover:border-emerald-500/50 hover:bg-slate-800/80 transition-all">
            <div class="flex items-start justify-between mb-2">
              <h4 class="font-medium text-white group-hover:text-emerald-400 transition-colors text-sm">openhue</h4>
              <span class="px-2 py-0.5 text-xs font-bold rounded bg-emerald-500/15 text-emerald-400 border border-emerald-500/30">100</span>
            </div>
            <div class="flex items-center gap-2 text-xs">
              <span class="text-slate-500">Developer Tools</span>
              <span class="w-1 h-1 rounded-full bg-slate-700"></span>
              <span class="text-emerald-400 font-medium">LOW</span>
            </div>
          </a>
          
          <!-- ordercli -->
          <a href="?q=ordercli" class="group block p-4 bg-slate-900 border border-slate-800 rounded-lg hover:border-emerald-500/50 hover:bg-slate-800/80 transition-all">
            <div class="flex items-start justify-between mb-2">
              <h4 class="font-medium text-white group-hover:text-emerald-400 transition-colors text-sm">ordercli</h4>
              <span class="px-2 py-0.5 text-xs font-bold rounded bg-emerald-500/15 text-emerald-400 border border-emerald-500/30">100</span>
            </div>
            <div class="flex items-center gap-2 text-xs">
              <span class="text-slate-500">Developer Tools</span>
              <span class="w-1 h-1 rounded-full bg-slate-700"></span>
              <span class="text-emerald-400 font-medium">LOW</span>
            </div>
          </a>
          
          <!-- openai-whisper -->
          <a href="?q=openai-whisper" class="group block p-4 bg-slate-900 border border-slate-800 rounded-lg hover:border-emerald-500/50 hover:bg-slate-800/80 transition-all">
            <div class="flex items-start justify-between mb-2">
              <h4 class="font-medium text-white group-hover:text-emerald-400 transition-colors text-sm">openai-whisper</h4>
              <span class="px-2 py-0.5 text-xs font-bold rounded bg-emerald-500/15 text-emerald-400 border border-emerald-500/30">100</span>
            </div>
            <div class="flex items-center gap-2 text-xs">
              <span class="text-slate-500">AI & ML</span>
              <span class="w-1 h-1 rounded-full bg-slate-700"></span>
              <span class="text-emerald-400 font-medium">LOW</span>
            </div>
          </a>
          
          <!-- wacli -->
          <a href="?q=wacli" class="group block p-4 bg-slate-900 border border-slate-800 rounded-lg hover:border-emerald-500/50 hover:bg-slate-800/80 transition-all">
            <div class="flex items-start justify-between mb-2">
              <h4 class="font-medium text-white group-hover:text-emerald-400 transition-colors text-sm">wacli</h4>
              <span class="px-2 py-0.5 text-xs font-bold rounded bg-emerald-500/15 text-emerald-400 border border-emerald-500/30">100</span>
            </div>
            <div class="flex items-center gap-2 text-xs">
              <span class="text-slate-500">Developer Tools</span>
              <span class="w-1 h-1 rounded-full bg-slate-700"></span>
              <span class="text-emerald-400 font-medium">LOW</span>
            </div>
          </a>
          
          <!-- apple-notes -->
          <a href="?q=apple-notes" class="group block p-4 bg-slate-900 border border-slate-800 rounded-lg hover:border-emerald-500/50 hover:bg-slate-800/80 transition-all">
            <div class="flex items-start justify-between mb-2">
              <h4 class="font-medium text-white group-hover:text-emerald-400 transition-colors text-sm">apple-notes</h4>
              <span class="px-2 py-0.5 text-xs font-bold rounded bg-emerald-500/15 text-emerald-400 border border-emerald-500/30">100</span>
            </div>
            <div class="flex items-center gap-2 text-xs">
              <span class="text-slate-500">Developer Tools</span>
              <span class="w-1 h-1 rounded-full bg-slate-700"></span>
              <span class="text-emerald-400 font-medium">LOW</span>
            </div>
          </a>
          
          <!-- update-docs -->
          <a href="?q=update-docs" class="group block p-4 bg-slate-900 border border-slate-800 rounded-lg hover:border-emerald-500/50 hover:bg-slate-800/80 transition-all">
            <div class="flex items-start justify-between mb-2">
              <h4 class="font-medium text-white group-hover:text-emerald-400 transition-colors text-sm">update-docs</h4>
              <span class="px-2 py-0.5 text-xs font-bold rounded bg-emerald-500/15 text-emerald-400 border border-emerald-500/30">100</span>
            </div>
            <div class="flex items-center gap-2 text-xs">
              <span class="text-slate-500">Other</span>
              <span class="w-1 h-1 rounded-full bg-slate-700"></span>
              <span class="text-emerald-400 font-medium">LOW</span>
            </div>
          </a>
          
          <!-- release-note-generation -->
          <a href="?q=release-note-generation" class="group block p-4 bg-slate-900 border border-slate-800 rounded-lg hover:border-emerald-500/50 hover:bg-slate-800/80 transition-all">
            <div class="flex items-start justify-between mb-2">
              <h4 class="font-medium text-white group-hover:text-emerald-400 transition-colors text-sm">release-note-generation</h4>
              <span class="px-2 py-0.5 text-xs font-bold rounded bg-emerald-500/15 text-emerald-400 border border-emerald-500/30">100</span>
            </div>
            <div class="flex items-center gap-2 text-xs">
              <span class="text-slate-500">Developer Tools</span>
              <span class="w-1 h-1 rounded-full bg-slate-700"></span>
              <span class="text-emerald-400 font-medium">LOW</span>
            </div>
          </a>
          
          <!-- github -->
          <a href="?q=github" class="group block p-4 bg-slate-900 border border-slate-800 rounded-lg hover:border-emerald-500/50 hover:bg-slate-800/80 transition-all">
            <div class="flex items-start justify-between mb-2">
              <h4 class="font-medium text-white group-hover:text-emerald-400 transition-colors text-sm">github</h4>
              <span class="px-2 py-0.5 text-xs font-bold rounded bg-emerald-500/15 text-emerald-400 border border-emerald-500/30">100</span>
            </div>
            <div class="flex items-center gap-2 text-xs">
              <span class="text-slate-500">Developer Tools</span>
              <span class="w-1 h-1 rounded-full bg-slate-700"></span>
              <span class="text-emerald-400 font-medium">LOW</span>
            </div>
          </a>
          
          <!-- e2e-studio-tests -->
          <a href="?q=e2e-studio-tests" class="group block p-4 bg-slate-900 border border-slate-800 rounded-lg hover:border-emerald-500/50 hover:bg-slate-800/80 transition-all">
            <div class="flex items-start justify-between mb-2">
              <h4 class="font-medium text-white group-hover:text-emerald-400 transition-colors text-sm">e2e-studio-tests</h4>
              <span class="px-2 py-0.5 text-xs font-bold rounded bg-emerald-500/15 text-emerald-400 border border-emerald-500/30">100</span>
            </div>
            <div class="flex items-center gap-2 text-xs">
              <span class="text-slate-500">Developer Tools</span>
              <span class="w-1 h-1 rounded-full bg-slate-700"></span>
              <span class="text-emerald-400 font-medium">LOW</span>
            </div>
          </a>
          
          <!-- add-uint-support -->
          <a href="?q=add-uint-support" class="group block p-4 bg-slate-900 border border-slate-800 rounded-lg hover:border-emerald-500/50 hover:bg-slate-800/80 transition-all">
            <div class="flex items-start justify-between mb-2">
              <h4 class="font-medium text-white group-hover:text-emerald-400 transition-colors text-sm">add-uint-support</h4>
              <span class="px-2 py-0.5 text-xs font-bold rounded bg-emerald-500/15 text-emerald-400 border border-emerald-500/30">100</span>
            </div>
            <div class="flex items-center gap-2 text-xs">
              <span class="text-slate-500">Media & Content</span>
              <span class="w-1 h-1 rounded-full bg-slate-700"></span>
              <span class="text-emerald-400 font-medium">LOW</span>
            </div>
          </a>
          
          <!-- docstring -->
          <a href="?q=docstring" class="group block p-4 bg-slate-900 border border-slate-800 rounded-lg hover:border-emerald-500/50 hover:bg-slate-800/80 transition-all">
            <div class="flex items-start justify-between mb-2">
              <h4 class="font-medium text-white group-hover:text-emerald-400 transition-colors text-sm">docstring</h4>
              <span class="px-2 py-0.5 text-xs font-bold rounded bg-emerald-500/15 text-emerald-400 border border-emerald-500/30">100</span>
            </div>
            <div class="flex items-center gap-2 text-xs">
              <span class="text-slate-500">Other</span>
              <span class="w-1 h-1 rounded-full bg-slate-700"></span>
              <span class="text-emerald-400 font-medium">LOW</span>
            </div>
          </a>
          
          <!-- metal-kernel -->
          <a href="?q=metal-kernel" class="group block p-4 bg-slate-900 border border-slate-800 rounded-lg hover:border-emerald-500/50 hover:bg-slate-800/80 transition-all">
            <div class="flex items-start justify-between mb-2">
              <h4 class="font-medium text-white group-hover:text-emerald-400 transition-colors text-sm">metal-kernel</h4>
              <span class="px-2 py-0.5 text-xs font-bold rounded bg-emerald-500/15 text-emerald-400 border border-emerald-500/30">100</span>
            </div>
            <div class="flex items-center gap-2 text-xs">
              <span class="text-slate-500">Smart Home & IoT</span>
              <span class="w-1 h-1 rounded-full bg-slate-700"></span>
              <span class="text-emerald-400 font-medium">LOW</span>
            </div>
          </a>
          
          <!-- at-dispatch-v2 -->
          <a href="?q=at-dispatch-v2" class="group block p-4 bg-slate-900 border border-slate-800 rounded-lg hover:border-emerald-500/50 hover:bg-slate-800/80 transition-all">
            <div class="flex items-start justify-between mb-2">
              <h4 class="font-medium text-white group-hover:text-emerald-400 transition-colors text-sm">at-dispatch-v2</h4>
              <span class="px-2 py-0.5 text-xs font-bold rounded bg-emerald-500/15 text-emerald-400 border border-emerald-500/30">100</span>
            </div>
            <div class="flex items-center gap-2 text-xs">
              <span class="text-slate-500">Developer Tools</span>
              <span class="w-1 h-1 rounded-full bg-slate-700"></span>
              <span class="text-emerald-400 font-medium">LOW</span>
            </div>
          </a>
        </div>
      </div>
      
      <!-- Bottom Bar -->
      <div class="pt-8 border-t border-slate-800 flex flex-col md:flex-row items-center justify-between gap-4">
        <p class="text-sm text-slate-500">
          ¬© 2026 SkillShield. All rights reserved.
        </p>
        <div class="flex items-center gap-4">
          <a href="/privacy" class="text-sm text-slate-500 hover:text-white transition-colors">Privacy</a>
          <a href="/terms" class="text-sm text-slate-500 hover:text-white transition-colors">Terms</a>
          <span class="text-sm text-slate-600">No cookies used</span>
        </div>
      </div>
    </div>
  </footer>

  <!-- Security Report Modal -->
  <div id="security-modal" class="fixed inset-0 z-50 hidden">
    <div class="absolute inset-0 bg-slate-950/80 backdrop-blur-sm" id="modal-backdrop"></div>
    <div class="relative z-10 flex items-center justify-center min-h-screen p-4">
      <div class="w-full max-w-2xl bg-slate-900 border border-slate-700 rounded-2xl shadow-2xl overflow-hidden">
        <!-- Modal Header -->
        <div class="px-6 py-4 border-b border-slate-800 flex items-center justify-between">
          <div class="flex items-center gap-3">
            <div class="w-10 h-10 rounded-lg bg-emerald-500/10 flex items-center justify-center">
              <i data-lucide="file-text" class="w-5 h-5 text-emerald-400"></i>
            </div>
            <div>
              <h3 class="font-semibold text-white">Security Report</h3>
              <p class="text-xs text-slate-500">Real-time scan statistics</p>
            </div>
          </div>
          <button id="close-modal" class="p-2 text-slate-400 hover:text-white transition-colors">
            <i data-lucide="x" class="w-5 h-5"></i>
          </button>
        </div>
        
        <!-- Modal Content -->
        <div class="p-6 space-y-6">
          <!-- Stats Grid -->
          <div class="grid grid-cols-2 gap-4">
            <div class="p-4 rounded-xl bg-slate-800/50 border border-slate-700">
              <div class="text-2xl font-bold text-emerald-400 font-mono">33,746</div>
              <div class="text-sm text-slate-500">Total AI Extensions Scanned</div>
            </div>
            <div class="p-4 rounded-xl bg-slate-800/50 border border-slate-700">
              <div class="text-2xl font-bold text-emerald-400 font-mono">980</div>
              <div class="text-sm text-slate-500">Verified Clean (LOW)</div>
            </div>
            <div class="p-4 rounded-xl bg-slate-800/50 border border-slate-700">
              <div class="text-2xl font-bold text-amber-400 font-mono">163</div>
              <div class="text-sm text-slate-500">Medium Risk</div>
            </div>
            <div class="p-4 rounded-xl bg-slate-800/50 border border-slate-700">
              <div class="text-2xl font-bold text-red-400 font-mono">533</div>
              <div class="text-sm text-slate-500">Blocked (HIGH + CRITICAL)</div>
            </div>
          </div>
          
          <!-- Scan Types -->
          <div>
            <h4 class="text-sm font-medium text-white mb-3">Scan Breakdown</h4>
            <div class="space-y-3">
              <div class="flex items-center justify-between">
                <span class="text-sm text-slate-400">Static Analysis</span>
                <div class="flex items-center gap-2">
                  <div class="w-32 h-2 bg-slate-700 rounded-full overflow-hidden">
                    <div class="h-full bg-emerald-500 rounded-full" style="width: 100%"></div>
                  </div>
                  <span class="text-xs text-emerald-400">100%</span>
                </div>
              </div>
              <div class="flex items-center justify-between">
                <span class="text-sm text-slate-400">Prompt Injection Tests</span>
                <div class="flex items-center gap-2">
                  <div class="w-32 h-2 bg-slate-700 rounded-full overflow-hidden">
                    <div class="h-full bg-emerald-500 rounded-full" style="width: 100%"></div>
                  </div>
                  <span class="text-xs text-emerald-400">100%</span>
                </div>
              </div>
              <div class="flex items-center justify-between">
                <span class="text-sm text-slate-400">Sandbox Execution</span>
                <div class="flex items-center gap-2">
                  <div class="w-32 h-2 bg-slate-700 rounded-full overflow-hidden">
                    <div class="h-full bg-emerald-500 rounded-full" style="width: 98%"></div>
                  </div>
                  <span class="text-xs text-emerald-400">98%</span>
                </div>
              </div>
            </div>
          </div>
          
          <!-- Last Updated -->
          <div class="p-4 rounded-xl bg-emerald-500/10 border border-emerald-500/30">
            <div class="flex items-center gap-2 text-emerald-400">
              <i data-lucide="check-circle" class="w-5 h-5"></i>
              <span class="text-sm font-medium">All systems operational</span>
            </div>
            <p class="text-xs text-emerald-400/70 mt-1">
              Last updated: <span id="modal-timestamp">Just now</span>
            </p>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- Skill Detail Modal -->
  <div id="skill-detail-modal" class="skill-modal-overlay fixed inset-0 z-[60] hidden" aria-modal="true" role="dialog">
    <div class="absolute inset-0 bg-slate-950/85 backdrop-blur-sm" id="skill-modal-backdrop"></div>
    <div class="relative z-10 flex items-start sm:items-center justify-center min-h-screen p-0 sm:p-4">
      <div class="skill-modal-panel w-full max-w-2xl bg-slate-900 border border-slate-700 sm:rounded-2xl shadow-2xl overflow-hidden">
        <!-- Modal Header -->
        <div class="px-5 py-4 border-b border-slate-800 flex items-center justify-between bg-slate-900 sticky top-0 z-10">
          <div class="flex items-center gap-3 min-w-0">
            <div id="sdm-icon" class="w-10 h-10 rounded-lg flex items-center justify-center flex-shrink-0">
              <i data-lucide="shield" class="w-5 h-5"></i>
            </div>
            <div class="min-w-0">
              <h3 id="sdm-title" class="font-semibold text-white text-lg truncate"></h3>
              <p id="sdm-author" class="text-xs text-slate-500 truncate"></p>
            </div>
          </div>
          <button id="close-skill-modal" class="p-2 text-slate-400 hover:text-white transition-colors rounded-lg hover:bg-slate-800 flex-shrink-0" aria-label="Close">
            <i data-lucide="x" class="w-5 h-5"></i>
          </button>
        </div>
        
        <!-- Modal Body -->
        <div class="skill-modal-body p-5 space-y-5" id="sdm-body">
          <!-- Score + Risk Row -->
          <div class="flex items-center gap-5">
            <!-- Score Ring -->
            <div class="flex-shrink-0 relative w-24 h-24">
              <svg class="score-ring w-24 h-24" viewBox="0 0 100 100">
                <circle class="score-ring-track" cx="50" cy="50" r="45" fill="none" stroke-width="8"/>
                <circle id="sdm-ring" class="score-ring-fill" cx="50" cy="50" r="45" fill="none" stroke-width="8" stroke-dashoffset="283"/>
              </svg>
              <div class="absolute inset-0 flex flex-col items-center justify-center">
                <span id="sdm-score" class="text-2xl font-bold font-mono"></span>
                <span class="text-[10px] text-slate-500 uppercase tracking-wider">Score</span>
              </div>
            </div>
            <!-- Risk + Source + Date -->
            <div class="flex-1 space-y-2">
              <div class="flex items-center gap-2 flex-wrap">
                <span id="sdm-risk-badge" class="px-3 py-1 rounded-full text-xs font-bold border"></span>
                <span id="sdm-source-badge" class="px-3 py-1 rounded-full text-xs border"></span>
              </div>
              <p id="sdm-desc" class="text-sm text-slate-400 line-clamp-3"></p>
              <div class="flex items-center gap-3 text-xs text-slate-500">
                <span id="sdm-scan-date" class="flex items-center gap-1">
                  <i data-lucide="clock" class="w-3 h-3"></i>
                  <span></span>
                </span>
                <a id="sdm-source-link" href="#" target="_blank" rel="noopener noreferrer" class="flex items-center gap-1 text-emerald-400 hover:text-emerald-300 transition-colors">
                  <i data-lucide="external-link" class="w-3 h-3"></i>
                  <span>View on source</span>
                </a>
              </div>
            </div>
          </div>

          <!-- Verdict Banner -->
          <div id="sdm-verdict" class="p-4 rounded-xl border flex items-center gap-3">
            <i id="sdm-verdict-icon" data-lucide="check-circle" class="w-6 h-6 flex-shrink-0"></i>
            <div>
              <p id="sdm-verdict-text" class="text-sm font-medium"></p>
              <p id="sdm-verdict-sub" class="text-xs mt-0.5 opacity-70"></p>
            </div>
          </div>

          <!-- Issues Section -->
          <div id="sdm-issues-section">
            <div class="flex items-center justify-between mb-3">
              <h4 class="text-sm font-semibold text-white flex items-center gap-2">
                <i data-lucide="bug" class="w-4 h-4 text-slate-400"></i>
                Issues Detected
              </h4>
              <span id="sdm-issue-count" class="text-xs px-2 py-0.5 rounded-full bg-slate-800 text-slate-400 font-mono"></span>
            </div>
            <!-- Preview issues (first 3) - always visible -->
            <div id="sdm-issues-preview" class="space-y-2">
              <!-- Dynamically filled -->
            </div>
            <!-- Expand button (pill style) -->
            <div id="sdm-expand-btn-wrapper" class="mt-3 hidden">
              <button id="sdm-expand-btn" class="expand-issues-btn inline-flex items-center gap-2 px-4 py-2 rounded-full border border-slate-600 bg-slate-800/50 text-sm text-emerald-400 font-medium cursor-pointer hover:bg-emerald-500/10 hover:border-emerald-500/40 transition-all">
                <span id="sdm-expand-text">Show all issues</span>
                <i data-lucide="chevron-down" class="w-4 h-4 chevron"></i>
              </button>
            </div>
            <!-- Expanded full issue list -->
            <div id="sdm-issues-expanded" class="issues-expand-wrapper mt-3">
              <div id="sdm-issues-full" class="issues-scrollable space-y-3 pr-1">
                <!-- Dynamically filled with grouped issues -->
              </div>
            </div>
          </div>

          <!-- Security Analysis Details -->
          <div class="grid grid-cols-1 sm:grid-cols-2 gap-3">
            <div class="p-3 rounded-lg bg-slate-800/50 border border-slate-700/50">
              <div class="text-xs text-slate-500 mb-1 flex items-center gap-1">
                <i data-lucide="code-2" class="w-3 h-3"></i> Static Analysis
              </div>
              <div id="sdm-static" class="text-sm font-medium"></div>
            </div>
            <div class="p-3 rounded-lg bg-slate-800/50 border border-slate-700/50">
              <div class="text-xs text-slate-500 mb-1 flex items-center gap-1">
                <i data-lucide="alert-triangle" class="w-3 h-3"></i> Prompt Injection
              </div>
              <div id="sdm-injection" class="text-sm font-medium"></div>
            </div>
            <div class="p-3 rounded-lg bg-slate-800/50 border border-slate-700/50">
              <div class="text-xs text-slate-500 mb-1 flex items-center gap-1">
                <i data-lucide="container" class="w-3 h-3"></i> Sandbox Test
              </div>
              <div id="sdm-sandbox" class="text-sm font-medium"></div>
            </div>
            <div class="p-3 rounded-lg bg-slate-800/50 border border-slate-700/50">
              <div class="text-xs text-slate-500 mb-1 flex items-center gap-1">
                <i data-lucide="shield" class="w-3 h-3"></i> Overall Grade
              </div>
              <div id="sdm-grade" class="text-sm font-bold"></div>
            </div>
          </div>

          <!-- Request Re-scan -->
          <div class="pt-2 border-t border-slate-800 flex items-center justify-between">
            <div class="text-xs text-slate-500 flex items-center gap-1">
              <i data-lucide="info" class="w-3 h-3"></i>
              <span>Scan results may be outdated if the skill was updated.</span>
            </div>
            <button id="sdm-rescan-btn" onclick="requestRescan()" class="flex items-center gap-2 px-4 py-2 rounded-lg text-sm font-medium border border-emerald-500/40 text-emerald-400 bg-emerald-500/5 hover:bg-emerald-500/15 hover:border-emerald-500/70 transition-all flex-shrink-0">
              <i data-lucide="refresh-cw" class="w-4 h-4"></i>
              <span>Request Re-scan</span>
            </button>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- Real scan data -->
  <script src="skills-data-slim.js"></script>
  
  <script>
    // Initialize Lucide icons
    lucide.createIcons();
    
    // ============================================
    // STATE
    // ============================================
    const API_BASE = 'https://skillshield-api.charlessturt1795.workers.dev/api/v1';
    const API_ENDPOINT = `${API_BASE}/extensions`;
    const PAGE_SIZE = 50;

    let currentRiskFilter = 'all';
    let currentSourceFilter = 'all';
    let currentTypeFilter = 'all';
    let currentSearch = '';
    let currentSort = 'security';
    let currentCategoryFilter = 'all';

    let currentOffset = 0;
    let totalAvailable = 0;
    let isLoading = false;
    let hasMore = true;
    let loadedSkills = [];
    let currentResults = [];
    let autoLoadCount = 0; // Track auto-loads before switching to manual
    const MAX_AUTO_LOADS = 3; // Auto-load first 3 pages (150 items), then manual

    // ============================================
    // CATEGORY SYSTEM
    // ============================================
    const CATEGORIES = {
      'finance-crypto': {
        name: 'Finance & Crypto',
        icon: 'wallet',
        priority: 1,
        keys: [
          'wallet','crypto','defi','token','swap','trade','trading','stock','stocks',
          'payment','pay','invoice','bank','finance','financial','bitcoin','ethereum',
          'eth','solana','stripe','paypal','coinbase','binance','ledger','mint','nft',
          'blockchain','portfolio','price','ticker','cryptocurrency','decentralized',
          'exchange','staking','yield','lending','borrowing','liquidity','fiat',
          'money','currency','accounting','budget'
        ]
      },
      'smart-home-iot': {
        name: 'Smart Home & IoT',
        icon: 'home',
        priority: 2,
        keys: [
          'home-assistant','homeassistant','hue','sonos','alexa','smartthings',
          'zigbee','mqtt','iot','thermostat','weather','forecast','temperature',
          'climate','map','maps','transit','flight','flights','workout','fitness',
          'health','sleep','exercise','garmin','fitbit','smart home','home automation',
          'apple homekit','google home','philips hue','heart rate','step count',
          'location tracking','gps','geolocation','navigation'
        ]
      },
      'security-auth': {
        name: 'Security & Auth',
        icon: 'shield-alert',
        priority: 3,
        keys: [
          'security','auth','oauth','jwt','credential','encrypt','decrypt',
          'cipher','hash','password','vault','secret','scanner','firewall',
          'ssl','tls','certificate','2fa','mfa','totp','sso','saml','ldap',
          'rbac','permission','authentication','authorization','vulnerability',
          'penetration','security audit','access control','identity provider',
          'key management','zero trust','pentest','cybersecurity'
        ]
      },
      'ai-llm': {
        name: 'AI & LLM',
        icon: 'brain',
        priority: 4,
        keys: [
          'ai','llm','gpt','claude','openai','anthropic','gemini','ollama',
          'prompt','embedding','vector','rag','agent','mcp','langchain',
          'llamaindex','huggingface','model','inference','chatbot','copilot',
          'language model','machine learning','natural language','neural network',
          'fine-tune','transformer','context window','ai agent','model integration',
          'groq','mistral','perplexity','deepseek','cohere','replicate'
        ]
      },
      'communication': {
        name: 'Communication',
        icon: 'message-circle',
        priority: 5,
        keys: [
          'email','mail','smtp','imap','telegram','whatsapp','discord','slack',
          'imessage','sms','twilio','sendgrid','mailgun','teams','matrix',
          'signal','messenger','chat','notification','notify','push','inbox',
          'send message','receive message','messaging','webex','zoom'
        ]
      },
      'social-media': {
        name: 'Social Media',
        icon: 'share-2',
        priority: 6,
        keys: [
          'twitter','tweet','x-api','linkedin','instagram','tiktok','reddit',
          'mastodon','bluesky','social media','social network','social post',
          'follower','timeline','feed','retweet','hashtag','outreach','influencer'
        ]
      },
      'media-content': {
        name: 'Media & Content',
        icon: 'play-circle',
        priority: 7,
        keys: [
          'spotify','youtube','video','audio','music','image','photo','camera',
          'screenshot','gif','svg','media','podcast','stream','player','movie',
          'game','gaming','entertainment','draw','canvas','art','ffmpeg','plex',
          'sonarr','radarr','media player','video player','image processing',
          'audio processing','content creation','screen capture','music streaming',
          'graphic','animation','render','thumbnail'
        ]
      },
      'documentation': {
        name: 'Documentation',
        icon: 'file-text',
        priority: 8,
        keys: [
          'documentation','changelog','release-note','release note','readme',
          'wiki','jsdoc','typedoc','storybook','docusaurus','mkdocs','swagger',
          'openapi','api-doc','javadoc','documentation generator','generate docs',
          'release notes','api documentation','markdown documentation',
          'technical writing','changelog generation'
        ]
      },
      'data-search': {
        name: 'Data & Search',
        icon: 'database',
        priority: 9,
        keys: [
          'database','postgres','mysql','sqlite','mongo','redis','elastic',
          'search','scrape','scraper','crawl','spider','csv','xml','pdf',
          'excel','spreadsheet','analytics','sql','graphql','supabase',
          'firebase','prisma','drizzle','query','dataset','data processing',
          'data pipeline','web scraping','search engine','data extraction',
          'database query','data transform','etl','data warehouse','bigquery',
          'snowflake','pinecone','weaviate','qdrant'
        ]
      },
      'productivity': {
        name: 'Productivity',
        icon: 'calendar',
        priority: 10,
        keys: [
          'todo','task','calendar','schedule','reminder','note','notes','notion',
          'obsidian','trello','jira','asana','todoist','planner','kanban',
          'pomodoro','timer','time-track','bookmark','clipboard','organiz',
          'task management','project management','note taking','time tracking',
          'habit tracker','productivity tool','workflow automation',
          'personal organizer','airtable','monday','clickup','basecamp'
        ]
      },
      'system-cli': {
        name: 'System & CLI',
        icon: 'terminal',
        priority: 11,
        keys: [
          'terminal','shell','bash','zsh','cli','command-line','ssh','sftp',
          'ftp','monitor','system','process','daemon','cron','systemd',
          'server','dns','nginx','apache','syslog','system monitor',
          'file manager','disk usage','system administration','command line',
          'shell script','process manager','server management','uptime',
          'htop','neofetch'
        ]
      },
      'developer-tools': {
        name: 'Developer Tools',
        icon: 'code-2',
        priority: 12,
        keys: [
          'git','github','gitlab','bitbucket','ci','cd','jenkins','build',
          'deploy','test','lint','eslint','prettier','webpack','vite','rollup',
          'npm','yarn','pnpm','pip','cargo','debug','debugger','compiler',
          'formatter','bundler','template','scaffold','boilerplate','env',
          'dotenv','docker','container','vercel','netlify','cloudflare','aws',
          'azure','gcp','terraform','ansible','pulumi','api','rest','grpc',
          'sdk','library','package','publish','release','version','semver',
          'code','coding','dev','developer','programming','regex','diff',
          'merge','branch','commit','pull-request','issue','review','refactor',
          'migrate','upgrade','kubernetes','k8s','helm','ci/cd','pipeline',
          'jest','mocha','cypress','playwright','storybook','figma','mock',
          'swagger','postman','insomnia','http','fetch','json','yaml','toml',
          'markdown','snippet','repl','sandbox','editor'
        ]
      },
      'other': {
        name: 'Other',
        icon: 'package',
        priority: 99,
        keys: []  // Fallback ‚Äî matches nothing (catches everything else)
      }
    };

    // Order for display (by priority, with 'other' last)
    const CATEGORY_ORDER = [
      'developer-tools','security-auth','data-search','ai-llm',
      'productivity','media-content','communication','finance-crypto',
      'system-cli','documentation','smart-home-iot','social-media','other'
    ];

    /**
     * Categorize a skill based on its name + description keywords.
     * Returns the category key (e.g., 'developer-tools', 'ai-llm').
     * Uses priority ordering ‚Äî most specific category wins.
     */
    // Map pre-assigned category names (from Haiku LLM) to internal keys
    const CAT_NAME_TO_KEY = {};
    for (const [key, cat] of Object.entries(CATEGORIES)) {
      CAT_NAME_TO_KEY[cat.name.toLowerCase()] = key;
    }
    // Extra mappings for Haiku category names ‚Üí internal keys
    CAT_NAME_TO_KEY['ai & ml'] = 'ai-llm';
    CAT_NAME_TO_KEY['security'] = 'security-auth';
    CAT_NAME_TO_KEY['smart home & iot'] = 'smart-home-iot';
    CAT_NAME_TO_KEY['data & analytics'] = 'data-search';
    CAT_NAME_TO_KEY['search & research'] = 'data-search';
    CAT_NAME_TO_KEY['system & devops'] = 'system-cli';
    CAT_NAME_TO_KEY['education'] = 'other';
    CAT_NAME_TO_KEY['health & wellness'] = 'smart-home-iot';
    CAT_NAME_TO_KEY['entertainment'] = 'media-content';

    function categorizeSkill(skill) {
      // Prefer pre-assigned category from skills-data.js (LLM-categorized)
      if (skill.cat) {
        const key = CAT_NAME_TO_KEY[skill.cat.toLowerCase()];
        if (key && CATEGORIES[key]) return key;
      }

      // Fallback: keyword matching
      const text = ((skill.n || '') + ' ' + (skill.d || '') + ' ' + (skill.desc || '')).toLowerCase();
      for (const catKey of CATEGORY_ORDER) {
        if (catKey === 'other') continue;
        const cat = CATEGORIES[catKey];
        for (const keyword of cat.keys) {
          if (text.includes(keyword)) {
            return catKey;
          }
        }
      }

      return 'other';
    }

    // Pre-compute categories for all skills on load (for performance)
    let categoryCounts = {};
    function computeCategories() {
      categoryCounts = {};
      CATEGORY_ORDER.forEach(k => { categoryCounts[k] = 0; });
      (TOP_SKILLS || []).forEach(skill => {
        skill._cat = categorizeSkill(skill);
        categoryCounts[skill._cat] = (categoryCounts[skill._cat] || 0) + 1;
      });
    }

    // ============================================
    // ADVANCED SEARCH ENGINE
    // ============================================

    // --- Fuzzy matching: Bounded Levenshtein Distance ---
    function levenshteinBounded(a, b, maxDist) {
      const la = a.length;
      const lb = b.length;
      // Quick exits
      if (Math.abs(la - lb) > maxDist) return maxDist + 1;
      if (a === b) return 0;
      if (la === 0) return lb <= maxDist ? lb : maxDist + 1;
      if (lb === 0) return la <= maxDist ? la : maxDist + 1;

      // Use two rows
      let prev = new Array(lb + 1);
      let curr = new Array(lb + 1);
      for (let j = 0; j <= lb; j++) prev[j] = j;

      for (let i = 1; i <= la; i++) {
        curr[0] = i;
        let rowMin = i; // Track minimum in row for early exit
        for (let j = 1; j <= lb; j++) {
          const cost = a[i - 1] === b[j - 1] ? 0 : 1;
          curr[j] = Math.min(
            prev[j] + 1,      // deletion
            curr[j - 1] + 1,  // insertion
            prev[j - 1] + cost // substitution
          );
          if (curr[j] < rowMin) rowMin = curr[j];
        }
        // Early exit: if minimum in this row exceeds maxDist, no point continuing
        if (rowMin > maxDist) return maxDist + 1;
        [prev, curr] = [curr, prev];
      }
      return prev[lb];
    }

    // --- Search Index ---
    let searchIndex = null;

    function buildSearchIndex() {
      searchIndex = (TOP_SKILLS || []).map((skill, i) => {
        const nameLower = (skill.d || skill.n || '').toLowerCase();
        const slugLower = (skill.n || '').toLowerCase();
        const authorLower = (skill.a || '').toLowerCase();
        const longDescLower = (skill.desc || '').toLowerCase();
        // Tokenize: split on hyphens, underscores, spaces, camelCase boundaries
        const nameTokens = nameLower.split(/[-_\s]+/).filter(t => t.length > 0);
        const slugTokens = slugLower.split(/[-_\s]+/).filter(t => t.length > 0);
        return {
          idx: i,
          nameLower,
          slugLower,
          authorLower,
          longDescLower,
          nameTokens,
          slugTokens,
          skill,
        };
      });
    }

    // --- Search Categories ---
    const SEARCH_CATEGORIES = [
      { keywords: ['crypto', 'bitcoin', 'blockchain', 'wallet', 'eth', 'token', 'defi'],
        label: 'üí∞ Crypto & Blockchain', searchTerm: 'crypto' },
      { keywords: ['weather', 'forecast', 'temperature', 'climate'],
        label: 'üå§Ô∏è Weather & Climate', searchTerm: 'weather' },
      { keywords: ['file', 'filesystem', 'directory', 'folder', 'disk', 'storage'],
        label: 'üìÅ File Management', searchTerm: 'file' },
      { keywords: ['network', 'http', 'api', 'request', 'dns', 'socket', 'fetch', 'url'],
        label: 'üåê Network & API', searchTerm: 'network' },
      { keywords: ['inject', 'injection', 'prompt', 'jailbreak', 'override', 'manipulation'],
        label: 'üíâ Prompt Injection', searchTerm: 'injection' },
      { keywords: ['shell', 'command', 'exec', 'terminal', 'bash', 'subprocess', 'sudo'],
        label: 'üñ•Ô∏è Shell & Command', searchTerm: 'shell' },
      { keywords: ['credential', 'password', 'ssh', 'key', 'token', 'secret', 'auth', 'login'],
        label: 'üîë Credentials & Auth', searchTerm: 'credential' },
      { keywords: ['email', 'mail', 'smtp', 'inbox', 'message'],
        label: 'üìß Email & Messaging', searchTerm: 'email' },
      { keywords: ['image', 'photo', 'vision', 'screenshot', 'camera', 'picture'],
        label: 'üì∑ Image & Vision', searchTerm: 'image' },
      { keywords: ['database', 'sql', 'db', 'query', 'data', 'mongo', 'redis'],
        label: 'üóÑÔ∏è Database', searchTerm: 'database' },
      { keywords: ['sms', 'text', 'phone', 'call', 'voip', 'telegram', 'whatsapp'],
        label: 'üì± SMS & Phone', searchTerm: 'sms' },
      { keywords: ['git', 'github', 'repo', 'commit', 'code', 'dev'],
        label: 'üíª Developer Tools', searchTerm: 'git' },
    ];

    const POPULAR_SEARCHES = [
      'crypto', 'weather', 'file manager', 'network', 'prompt injection', 'API helper',
      'credential', 'shell', 'email'
    ];

    // --- Main Fuzzy Search Function ---
    function fuzzySearchSkills(query) {
      if (!searchIndex) buildSearchIndex();
      const q = query.toLowerCase().trim();
      if (q.length < 2) return [];

      const results = [];
      const maxFuzzyDist = q.length <= 4 ? 1 : 2;

      for (let i = 0; i < searchIndex.length; i++) {
        const entry = searchIndex[i];
        let score = 0;
        let matched = false;

        // 1) Exact name match
        if (entry.nameLower === q || entry.slugLower === q) {
          score = 100;
          matched = true;
        }

        // 2) Name starts-with
        if (!matched && (entry.nameLower.startsWith(q) || entry.slugLower.startsWith(q))) {
          score = 90;
          matched = true;
        }

        // 3) Any word token starts-with
        if (!matched) {
          const allTokens = [...entry.nameTokens, ...entry.slugTokens];
          for (const token of allTokens) {
            if (token.startsWith(q)) {
              score = 80;
              matched = true;
              break;
            }
          }
        }

        // 4) Substring in name
        if (!matched && (entry.nameLower.includes(q) || entry.slugLower.includes(q))) {
          score = 65;
          matched = true;
        }

        // 5) Fuzzy match on name tokens (only for queries >= 3 chars)
        if (!matched && q.length >= 3) {
          const allTokens = [...entry.nameTokens, ...entry.slugTokens];
          let bestDist = maxFuzzyDist + 1;
          for (const token of allTokens) {
            // Only compare tokens of similar length
            if (Math.abs(token.length - q.length) > maxFuzzyDist) continue;
            const dist = levenshteinBounded(q, token, maxFuzzyDist);
            if (dist < bestDist) bestDist = dist;
            if (dist <= 1) break; // Good enough
          }
          if (bestDist <= maxFuzzyDist) {
            score = bestDist === 1 ? 70 : 55;
            matched = true;
          }
        }

        // 6) Fuzzy on whole name (for multi-word queries)
        if (!matched && q.length >= 4) {
          const dist = levenshteinBounded(q, entry.nameLower.substring(0, q.length + 2), maxFuzzyDist);
          if (dist <= maxFuzzyDist) {
            score = dist === 1 ? 65 : 50;
            matched = true;
          }
        }

        // 7) Author match
        if (!matched && entry.authorLower.includes(q)) {
          score = 35;
          matched = true;
        }

        // 8) Description substring
        if (!matched && entry.longDescLower.includes(q)) {
          score = 40;
          matched = true;
        }

        // 9) Fuzzy on description words (expensive ‚Äî only if few results so far)
        // Skipped in the fast path; only done in post-processing if needed

        if (matched) {
          results.push({ score, entry });
        }
      }

      // Sort: by score desc, then by risk severity (CRITICAL first for danger visibility)
      const riskOrder = { CRITICAL: 0, HIGH: 1, MEDIUM: 2, LOW: 3 };
      results.sort((a, b) => {
        if (b.score !== a.score) return b.score - a.score;
        const ra = riskOrder[a.entry.skill.r] ?? 4;
        const rb = riskOrder[b.entry.skill.r] ?? 4;
        return ra - rb;
      });

      return results;
    }

    // --- Match Categories ---
    function matchCategories(query) {
      const q = query.toLowerCase().trim();
      if (q.length < 2) return [];

      const matched = [];
      for (const cat of SEARCH_CATEGORIES) {
        for (const kw of cat.keywords) {
          if (kw.startsWith(q) || q.startsWith(kw) || levenshteinBounded(q, kw, 2) <= 1) {
            // Count how many skills match this category
            const count = fuzzySearchSkills(cat.searchTerm).length;
            matched.push({ ...cat, count });
            break;
          }
        }
      }
      return matched;
    }

    // --- Dropdown State ---
    let dropdownOpen = false;
    let dropdownActiveIdx = -1;
    let dropdownItems = []; // Array of { type: 'skill'|'category'|'showall'|'popular', data: ... }
    let dropdownQuery = '';
    let lastDropdownResults = null;

    function getDropdownEl() {
      return document.getElementById('search-dropdown');
    }

    function getSearchInput() {
      return document.getElementById('hero-search');
    }

    // --- Render Dropdown ---
    function renderSearchDropdown(query) {
      const dropdown = getDropdownEl();
      const input = getSearchInput();
      if (!dropdown) return;

      dropdownQuery = query;
      dropdownActiveIdx = -1;
      dropdownItems = [];

      const q = (query || '').trim();

      // Empty query ‚Üí popular searches
      if (q.length === 0) {
        let html = '<div class="sdd-section-label"><i data-lucide="trending-up" style="width:14px;height:14px;"></i> Popular Searches</div>';
        html += '<div class="sdd-popular-pills">';
        POPULAR_SEARCHES.forEach((term, i) => {
          html += `<span class="sdd-popular-pill" data-action="popular" data-idx="${i}" data-term="${escapeHtml(term)}">${escapeHtml(term)}</span>`;
          dropdownItems.push({ type: 'popular', data: term });
        });
        html += '</div>';
        dropdown.innerHTML = html;
        showDropdown();
        lucide.createIcons();
        attachDropdownListeners();
        return;
      }

      // Less than 2 chars ‚Üí hide
      if (q.length < 2) {
        hideSearchDropdown();
        return;
      }

      // Search
      const results = fuzzySearchSkills(q);
      const categories = matchCategories(q);
      lastDropdownResults = results;

      let html = '';
      let itemIdx = 0;

      // Categories section
      if (categories.length > 0) {
        html += '<div class="sdd-section-label"><i data-lucide="folder" style="width:14px;height:14px;"></i> Categories</div>';
        categories.forEach((cat, ci) => {
          html += `<div class="sdd-category" data-action="category" data-didx="${itemIdx}" data-term="${escapeHtml(cat.searchTerm)}" role="option" aria-selected="false">
            <span class="sdd-category-label">${cat.label}</span>
            <span class="sdd-category-count">${cat.count} skills</span>
          </div>`;
          dropdownItems.push({ type: 'category', data: cat });
          itemIdx++;
        });
        html += '<div class="sdd-separator"></div>';
      }

      // Skills section
      if (results.length > 0) {
        const topResults = results.slice(0, 8);
        html += '<div class="sdd-section-label"><i data-lucide="search" style="width:14px;height:14px;"></i> Skills</div>';

        topResults.forEach((r, ri) => {
          const skill = r.entry.skill;
          const riskClass = skill.r.toLowerCase();
          const displayName = highlightMatch(skill.d || skill.n, q);
          const scorePill = skill.sc >= 0 ? skill.sc + '/100' : 'N/A';
          const srcLabel = skill.src || 'unknown';

          html += `<div class="sdd-item" data-action="skill" data-didx="${itemIdx}" data-skill-global-idx="${r.entry.idx}" role="option" aria-selected="false">
            <span class="sdd-risk-dot ${riskClass}" title="${skill.r}"></span>
            <div style="flex:1;min-width:0;">
              <div class="sdd-item-name">${displayName}</div>
              <div class="sdd-item-meta">@${escapeHtml(skill.a)} ¬∑ ${escapeHtml(srcLabel)}</div>
            </div>
            <span class="sdd-risk-badge ${riskClass}">${skill.r}</span>
            <span class="sdd-score-pill ${riskClass}">${scorePill}</span>
          </div>`;
          dropdownItems.push({ type: 'skill', data: r });
          itemIdx++;
        });

        // "Show all X results" button
        if (results.length > 0) {
          html += `<div class="sdd-show-all" data-action="showall" data-didx="${itemIdx}" role="option" aria-selected="false">
            <span>Show all ${results.length} results</span>
            <i data-lucide="arrow-right" style="width:14px;height:14px;"></i>
          </div>`;
          dropdownItems.push({ type: 'showall', data: { count: results.length, query: q } });
          itemIdx++;
        }
      } else {
        // No results
        html += `<div class="sdd-no-results">
          <div class="sdd-no-results-title">No skills found for "<strong>${escapeHtml(q)}</strong>"</div>
          <div class="sdd-no-results-suggestions">
            Try: ${POPULAR_SEARCHES.slice(0, 4).map(t => `<a data-action="popular" data-term="${escapeHtml(t)}">${escapeHtml(t)}</a>`).join(', ')}
          </div>
        </div>`;
      }

      dropdown.innerHTML = html;
      showDropdown();
      lucide.createIcons();
      attachDropdownListeners();
    }

    // --- Highlight matching text ---
    function highlightMatch(text, query) {
      if (!query || query.length < 2) return escapeHtml(text);
      const escaped = escapeHtml(text);
      const q = query.toLowerCase();
      const lower = text.toLowerCase();
      const idx = lower.indexOf(q);
      if (idx === -1) return escaped;

      const before = escapeHtml(text.substring(0, idx));
      const match = escapeHtml(text.substring(idx, idx + query.length));
      const after = escapeHtml(text.substring(idx + query.length));
      return `${before}<span class="sdd-highlight">${match}</span>${after}`;
    }

    // --- Show/Hide Dropdown ---
    function showDropdown() {
      const dropdown = getDropdownEl();
      const input = getSearchInput();
      if (!dropdown) return;
      dropdown.classList.add('open');
      dropdownOpen = true;
      input.setAttribute('aria-expanded', 'true');
    }

    function hideSearchDropdown() {
      const dropdown = getDropdownEl();
      const input = getSearchInput();
      if (!dropdown) return;
      dropdown.classList.remove('open');
      dropdownOpen = false;
      dropdownActiveIdx = -1;
      input.setAttribute('aria-expanded', 'false');
    }

    // --- Attach click listeners to dropdown items ---
    function attachDropdownListeners() {
      const dropdown = getDropdownEl();
      if (!dropdown) return;

      // Skill items
      dropdown.querySelectorAll('[data-action="skill"]').forEach(el => {
        el.addEventListener('click', (e) => {
          e.stopPropagation();
          const globalIdx = parseInt(el.dataset.skillGlobalIdx, 10);
          hideSearchDropdown();
          openSkillModalByGlobalIndex(globalIdx);
        });
      });

      // Category items
      dropdown.querySelectorAll('[data-action="category"]').forEach(el => {
        el.addEventListener('click', (e) => {
          e.stopPropagation();
          const term = el.dataset.term;
          applySearchAndScroll(term);
        });
      });

      // Show all button
      dropdown.querySelectorAll('[data-action="showall"]').forEach(el => {
        el.addEventListener('click', (e) => {
          e.stopPropagation();
          applySearchAndScroll(dropdownQuery);
        });
      });

      // Popular pills
      dropdown.querySelectorAll('[data-action="popular"]').forEach(el => {
        el.addEventListener('click', (e) => {
          e.stopPropagation();
          const term = el.dataset.term;
          const input = getSearchInput();
          input.value = term;
          renderSearchDropdown(term);
        });
      });

      // No-results suggestion links
      dropdown.querySelectorAll('.sdd-no-results-suggestions a').forEach(el => {
        el.addEventListener('click', (e) => {
          e.preventDefault();
          e.stopPropagation();
          const term = el.dataset.term;
          const input = getSearchInput();
          input.value = term;
          renderSearchDropdown(term);
        });
      });
    }

    // --- Open skill modal by global ALL_SKILLS index ---
    function openSkillModalByGlobalIndex(globalIdx) {
      const skill = (TOP_SKILLS || [])[globalIdx];
      if (!skill) return;

      // We need to create a temporary card-like element to pass to openSkillModal
      // Instead, let's refactor to accept skill directly.
      // But to not modify openSkillModal heavily, we'll use a workaround:
      // Set the search/filters so the skill appears, then find its position.

      // Simpler: extract modal logic to accept a skill object.
      openSkillModalDirect(skill);
    }

    // --- Direct skill modal open (no dependency on filtered grid index) ---
    function openSkillModalDirect(skill) {
      currentModalSkill = skill;
      trackSkillView(skill.n || skill.d);

      const riskColor = getRiskColor(skill.r);
      const cm = colorMap[riskColor] || colorMap.slate;
      const srcBadge = getSourceBadge(skill.src);
      const scoreCol = getScoreColor(skill.sc);
      const grade = getScoreGrade(skill.sc);

      // Header
      document.getElementById('sdm-title').textContent = skill.d || skill.n;
      document.getElementById('sdm-author').textContent = '@' + skill.a;
      const iconWrap = document.getElementById('sdm-icon');
      iconWrap.className = 'w-10 h-10 rounded-lg flex items-center justify-center flex-shrink-0 ' + cm.bg;
      iconWrap.innerHTML = '<i data-lucide="shield" class="w-5 h-5 ' + cm.text + '"></i>';

      // Score ring
      const ring = document.getElementById('sdm-ring');
      const circumference = 283;
      const unscanned = isUnscanned(skill);
      const scoreEl = document.getElementById('sdm-score');

      if (unscanned) {
        ring.style.stroke = '#64748b';
        ring.style.strokeDashoffset = circumference;
        scoreEl.textContent = '‚Äî';
        scoreEl.className = 'text-2xl font-bold font-mono text-slate-400';
      } else {
        const pct = Math.max(0, Math.min(100, skill.sc)) / 100;
        ring.style.stroke = scoreCol.stroke;
        ring.style.strokeDashoffset = circumference;
        requestAnimationFrame(() => {
          requestAnimationFrame(() => {
            ring.style.strokeDashoffset = circumference - (circumference * pct);
          });
        });
        scoreEl.textContent = skill.sc;
        scoreEl.className = 'text-2xl font-bold font-mono ' + scoreCol.text;
      }

      // Risk badge
      const riskBadge = document.getElementById('sdm-risk-badge');
      riskBadge.textContent = getRiskLabel(skill.r);
      riskBadge.className = 'px-3 py-1 rounded-full text-xs font-bold border ' + cm.bg + ' ' + cm.text + ' ' + cm.border;

      // Source badge
      const sourceBadge = document.getElementById('sdm-source-badge');
      sourceBadge.textContent = srcBadge.emoji + ' ' + skill.src;
      sourceBadge.className = 'px-3 py-1 rounded-full text-xs border ' + srcBadge.cls;

      // Description
      document.getElementById('sdm-desc').textContent = skill.desc || 'No description available';

      // Scan date
      const scanDateEl = document.getElementById('sdm-scan-date');
      scanDateEl.innerHTML = '<i data-lucide="clock" class="w-3 h-3"></i><span>Scanned: Feb 6, 2026</span>';

      // Source link
      const srcLink = document.getElementById('sdm-source-link');
      if (skill.url) {
        srcLink.href = skill.url;
        srcLink.querySelector('span').textContent = 'View on ' + skill.src;
        srcLink.style.display = '';
      } else {
        srcLink.style.display = 'none';
      }

      // Verdict
      const verdictEl = document.getElementById('sdm-verdict');
      const verdictText = document.getElementById('sdm-verdict-text');
      const verdictSub = document.getElementById('sdm-verdict-sub');

      if (skill.r === 'LOW' && skill.ic <= 1) {
        verdictEl.className = 'p-4 rounded-xl border flex items-center gap-3 bg-emerald-500/10 border-emerald-500/30';
        document.getElementById('sdm-verdict-icon').outerHTML = '<i id="sdm-verdict-icon" data-lucide="check-circle" class="w-6 h-6 flex-shrink-0 text-emerald-400"></i>';
        verdictText.className = 'text-sm font-medium text-emerald-400';
        verdictText.textContent = 'This skill is safe to install';
        verdictSub.className = 'text-xs mt-0.5 text-emerald-400/70';
        verdictSub.textContent = 'All security checks passed with minimal findings.';
      } else if (skill.r === 'MEDIUM' || (skill.r === 'LOW' && skill.ic > 1)) {
        verdictEl.className = 'p-4 rounded-xl border flex items-center gap-3 bg-amber-500/10 border-amber-500/30';
        document.getElementById('sdm-verdict-icon').outerHTML = '<i id="sdm-verdict-icon" data-lucide="alert-triangle" class="w-6 h-6 flex-shrink-0 text-amber-400"></i>';
        verdictText.className = 'text-sm font-medium text-amber-400';
        verdictText.textContent = 'Caution: ' + skill.ic + ' issue' + (skill.ic !== 1 ? 's' : '') + ' detected';
        verdictSub.className = 'text-xs mt-0.5 text-amber-400/70';
        verdictSub.textContent = 'Review the issues below before installing this skill.';
      } else {
        verdictEl.className = 'p-4 rounded-xl border flex items-center gap-3 bg-red-500/10 border-red-500/30';
        document.getElementById('sdm-verdict-icon').outerHTML = '<i id="sdm-verdict-icon" data-lucide="shield-off" class="w-6 h-6 flex-shrink-0 text-red-400"></i>';
        verdictText.className = 'text-sm font-medium text-red-400';
        verdictText.textContent = 'DO NOT install ‚Äî ' + skill.ic + ' issue' + (skill.ic !== 1 ? 's' : '') + ' detected';
        verdictSub.className = 'text-xs mt-0.5 text-red-400/70';
        verdictSub.textContent = skill.r === 'CRITICAL' ? 'Critical security threats found. This skill is dangerous.' : 'Significant security concerns detected.';
      }

      // Issues list
      const issuesSection = document.getElementById('sdm-issues-section');
      const issuesPreview = document.getElementById('sdm-issues-preview');
      const issuesFull = document.getElementById('sdm-issues-full');
      const issuesExpanded = document.getElementById('sdm-issues-expanded');
      const expandBtnWrapper = document.getElementById('sdm-expand-btn-wrapper');
      const expandBtn = document.getElementById('sdm-expand-btn');
      const expandText = document.getElementById('sdm-expand-text');
      const issueCountEl = document.getElementById('sdm-issue-count');
      const issues = skill.ti || [];

      // Reset expand state
      issuesExpanded.classList.remove('expanded');
      expandBtn.classList.remove('expanded');
      expandText.textContent = 'Show all issues';

      if (skill.ic === 0) {
        issuesSection.style.display = 'none';
      } else {
        issuesSection.style.display = '';
        issueCountEl.textContent = skill.ic + ' total';

        const issueCounts = {};
        issues.forEach(t => { issueCounts[t] = (issueCounts[t] || 0) + 1; });
        const uniqueIssues = Object.keys(issueCounts);

        const severityOrder = { CRITICAL: 0, HIGH: 1, MEDIUM: 2, LOW: 3 };
        const sortedIssues = uniqueIssues.slice().sort((a, b) => {
          const sevA = getIssueSeverity(a);
          const sevB = getIssueSeverity(b);
          return severityOrder[sevA.level] - severityOrder[sevB.level];
        });

        const previewIssues = sortedIssues.slice(0, 3);
        issuesPreview.innerHTML = previewIssues.map(issueText => {
          const sev = getIssueSeverity(issueText);
          const sevCm = colorMap[sev.color] || colorMap.slate;
          const count = issueCounts[issueText];
          return renderIssueItem(issueText, sev, sevCm, count);
        }).join('');

        const hiddenCount = sortedIssues.length - 3;
        if (hiddenCount > 0) {
          expandBtnWrapper.classList.remove('hidden');
          expandText.textContent = `Show all ${sortedIssues.length} issues`;
          issuesFull.innerHTML = renderGroupedIssues(sortedIssues, issueCounts);
        } else {
          expandBtnWrapper.classList.add('hidden');
          issuesFull.innerHTML = '';
        }

        expandBtn.onclick = () => {
          const isExpanded = issuesExpanded.classList.contains('expanded');
          if (isExpanded) {
            issuesExpanded.classList.remove('expanded');
            expandBtn.classList.remove('expanded');
            expandText.textContent = `Show all ${sortedIssues.length} issues`;
          } else {
            issuesExpanded.classList.add('expanded');
            expandBtn.classList.add('expanded');
            expandText.textContent = 'Show less';
          }
        };
      }

      // Security analysis boxes
      const isClean = skill.r === 'LOW';
      const isMed = skill.r === 'MEDIUM';

      document.getElementById('sdm-static').innerHTML = isClean
        ? '<span class="text-emerald-400">‚úì Passed</span>'
        : isMed
          ? '<span class="text-amber-400">‚ö† Warnings found</span>'
          : '<span class="text-red-400">‚úó Issues found</span>';

      const hasInjection = issues.some(t => /inject|override|manipul|hidden|jailbreak/i.test(t));
      document.getElementById('sdm-injection').innerHTML = hasInjection
        ? '<span class="text-red-400">‚úó Detected</span>'
        : '<span class="text-emerald-400">‚úì None detected</span>';

      const hasExfil = issues.some(t => /exfil|network|http|dns|credential|steal/i.test(t));
      document.getElementById('sdm-sandbox').innerHTML = hasExfil
        ? '<span class="text-red-400">‚úó Suspicious activity</span>'
        : isClean
          ? '<span class="text-emerald-400">‚úì Clean execution</span>'
          : '<span class="text-amber-400">‚ö† Review recommended</span>';

      const gradeEl = document.getElementById('sdm-grade');
      if (unscanned) {
        gradeEl.innerHTML = '<span class="text-slate-400 text-lg">‚Äî</span><span class="text-slate-500 text-xs ml-1">Not yet scanned</span>';
      } else {
        gradeEl.innerHTML = '<span class="' + scoreCol.text + ' text-lg">' + grade + '</span><span class="text-slate-500 text-xs ml-1">(' + skill.sc + '/100)</span>';
      }

      updateRescanButton(skill);

      // Show modal
      skillDetailModal.classList.remove('hidden');
      document.body.style.overflow = 'hidden';
      requestAnimationFrame(() => {
        skillDetailModal.classList.add('open');
      });

      lucide.createIcons();
    }

    // --- Apply search to main grid and scroll to browse section ---
    function applySearchAndScroll(query) {
      const input = getSearchInput();
      input.value = query;
      currentSearch = query;
      hideSearchDropdown();
      fetchExtensions({ reset: true });

      // Scroll to browse section
      const browseSection = document.getElementById('browse');
      if (browseSection) {
        browseSection.scrollIntoView({ behavior: 'smooth', block: 'start' });
      }
    }

    // --- Keyboard Navigation ---
    function handleSearchKeydown(e) {
      if (!dropdownOpen) {
        // Open dropdown on any key if input has value
        if (e.key !== 'Escape' && e.key !== 'Tab') {
          return; // Let the input handler deal with it
        }
        return;
      }

      switch (e.key) {
        case 'ArrowDown':
          e.preventDefault();
          navigateDropdown(1);
          break;

        case 'ArrowUp':
          e.preventDefault();
          navigateDropdown(-1);
          break;

        case 'Enter':
          e.preventDefault();
          if (dropdownActiveIdx >= 0 && dropdownActiveIdx < dropdownItems.length) {
            selectDropdownItem(dropdownActiveIdx);
          } else {
            // No item selected ‚Äî apply search
            applySearchAndScroll(dropdownQuery);
          }
          break;

        case 'Escape':
          e.preventDefault();
          hideSearchDropdown();
          break;

        case 'Tab':
          hideSearchDropdown();
          break;
      }
    }

    function navigateDropdown(direction) {
      const dropdown = getDropdownEl();
      if (!dropdown || dropdownItems.length === 0) return;

      // Remove current highlight
      const currentActive = dropdown.querySelector('.sdd-active');
      if (currentActive) {
        currentActive.classList.remove('sdd-active');
        currentActive.setAttribute('aria-selected', 'false');
      }

      // Calculate new index
      dropdownActiveIdx += direction;
      if (dropdownActiveIdx < 0) dropdownActiveIdx = dropdownItems.length - 1;
      if (dropdownActiveIdx >= dropdownItems.length) dropdownActiveIdx = 0;

      // Highlight new item
      const newActive = dropdown.querySelector(`[data-didx="${dropdownActiveIdx}"]`);
      if (newActive) {
        newActive.classList.add('sdd-active');
        newActive.setAttribute('aria-selected', 'true');
        newActive.scrollIntoView({ block: 'nearest', behavior: 'smooth' });
      }

      // For popular pills, use a different selector
      if (!newActive) {
        const pills = dropdown.querySelectorAll('.sdd-popular-pill');
        if (dropdownActiveIdx < pills.length) {
          pills[dropdownActiveIdx].classList.add('sdd-active');
        }
      }
    }

    function selectDropdownItem(idx) {
      if (idx < 0 || idx >= dropdownItems.length) return;
      const item = dropdownItems[idx];

      switch (item.type) {
        case 'skill':
          hideSearchDropdown();
          openSkillModalByGlobalIndex(item.data.entry.idx);
          break;

        case 'category':
          applySearchAndScroll(item.data.searchTerm);
          break;

        case 'showall':
          applySearchAndScroll(item.data.query);
          break;

        case 'popular':
          const input = getSearchInput();
          input.value = item.data;
          renderSearchDropdown(item.data);
          break;
      }
    }

    // --- Click Outside Handler ---
    function handleClickOutside(e) {
      const wrapper = document.getElementById('search-wrapper');
      if (!wrapper) return;
      if (!wrapper.contains(e.target)) {
        hideSearchDropdown();
      }
    }

    // --- Debounce Utility ---
    function debounce(fn, ms) {
      let timer;
      return function (...args) {
        clearTimeout(timer);
        timer = setTimeout(() => fn.apply(this, args), ms);
      };
    }

    // --- Initialize Search Dropdown System ---
    function initSearchDropdown() {
      // Build search index
      buildSearchIndex();

      const input = getSearchInput();
      if (!input) return;

      // Debounced search handler
      const debouncedSearch = debounce((value) => {
        renderSearchDropdown(value);
        currentSearch = value;
        fetchExtensions({ reset: true });
      }, 300);

      // Input handler ‚Äî replace existing one
      input.addEventListener('input', (e) => {
        debouncedSearch(e.target.value);
      });

      // Focus handler ‚Äî show popular searches when empty
      input.addEventListener('focus', () => {
        const val = input.value.trim();
        if (val.length === 0) {
          renderSearchDropdown('');
        } else if (val.length >= 2) {
          renderSearchDropdown(val);
        }
      });

      // Keyboard handler
      input.addEventListener('keydown', handleSearchKeydown);

      // Click outside
      document.addEventListener('click', handleClickOutside);

      // Also handle the existing ‚åòK shortcut to open dropdown
      // (The existing handler focuses the input ‚Äî focus event will open dropdown)
    }
    
    // ============================================
    // UTILITY FUNCTIONS
    // ============================================
    function formatNumber(num) {
      return num.toString().replace(/\B(?=(\d{3})+(?!\d))/g, ',');
    }
    
    function animateCounter(element, target, duration = 2000) {
      const start = 0;
      const increment = target / (duration / 16);
      let current = start;
      const timer = setInterval(() => {
        current += increment;
        if (current >= target) {
          current = target;
          clearInterval(timer);
        }
        element.textContent = formatNumber(Math.floor(current));
      }, 16);
    }
    
    // Color maps
    const colorMap = {
      emerald: { border: 'border-emerald-500/30', borderHover: 'hover:border-emerald-500', bg: 'bg-emerald-500/10', text: 'text-emerald-400', badge: 'bg-emerald-500', hoverText: 'group-hover:text-emerald-400' },
      amber: { border: 'border-amber-500/30', borderHover: 'hover:border-amber-500', bg: 'bg-amber-500/10', text: 'text-amber-400', badge: 'bg-amber-500', hoverText: 'group-hover:text-amber-400' },
      orange: { border: 'border-orange-500/30', borderHover: 'hover:border-orange-500', bg: 'bg-orange-500/10', text: 'text-orange-400', badge: 'bg-orange-500', hoverText: 'group-hover:text-orange-400' },
      red: { border: 'border-red-500/30', borderHover: 'hover:border-red-500', bg: 'bg-red-500/10', text: 'text-red-400', badge: 'bg-red-500', hoverText: 'group-hover:text-red-400' },
      slate: { border: 'border-slate-500/30', borderHover: 'hover:border-slate-500', bg: 'bg-slate-500/10', text: 'text-slate-400', badge: 'bg-slate-500', hoverText: 'group-hover:text-slate-400' },
    };
    
    function getRiskColor(risk) {
      switch (risk) {
        case 'CRITICAL': return 'red';
        case 'HIGH': return 'orange';
        case 'MEDIUM': return 'amber';
        case 'LOW': return 'emerald';
        default: return 'slate';
      }
    }
    
    function getRiskLabel(risk) {
      switch (risk) {
        case 'CRITICAL': return 'üî¥ CRITICAL';
        case 'HIGH': return 'üü† HIGH';
        case 'MEDIUM': return '‚ö†Ô∏è MEDIUM';
        case 'LOW': return '‚úÖ LOW';
        case 'UNSCANNED': return 'UNSCANNED';
        default: return 'UNSCANNED';
      }
    }

    function getScoreGrade(score) {
      if (score === null || score === undefined || score < 0) return '‚Äî';
      if (score >= 90) return 'A+';
      if (score >= 80) return 'A';
      if (score >= 70) return 'B+';
      if (score >= 60) return 'B';
      if (score >= 50) return 'C';
      if (score >= 30) return 'D';
      return 'F';
    }
    
    function getSourceBadge(src) {
      const badges = {
        'clawhub.ai': { emoji: 'üî•', cls: 'bg-purple-500/20 text-purple-300 border-purple-500/30' },
        'skillsmp.com': { emoji: 'üì¶', cls: 'bg-blue-500/20 text-blue-300 border-blue-500/30' },
        'skills.lc': { emoji: 'üîó', cls: 'bg-cyan-500/20 text-cyan-300 border-cyan-500/30' },
        'mcpregistry.ai': { emoji: 'üõ∞Ô∏è', cls: 'bg-slate-500/20 text-slate-300 border-slate-500/30' },
        'mcpmarket.com': { emoji: '‚ö°', cls: 'bg-amber-500/20 text-amber-300 border-amber-500/30' },
        'awesome-mcp': { emoji: '‚ú®', cls: 'bg-indigo-500/20 text-indigo-300 border-indigo-500/30' }
      };
      return badges[src] || { emoji: '‚ùì', cls: 'bg-slate-500/20 text-slate-300 border-slate-500/30' };
    }
    
    function escapeHtml(str) {
      const div = document.createElement('div');
      div.textContent = str;
      return div.innerHTML;
    }

    // ============================================
    // ANALYTICS TRACKING
    // ============================================
    const TRACKING_ENDPOINT = '/api/logs/event';
    let lastTrackedQuery = '';
    let lastTrackedResults = -1;

    function trackEvent(payload) {
      fetch(TRACKING_ENDPOINT, {
        method: 'POST',
        headers: { 'Content-Type': 'application/json' },
        body: JSON.stringify(payload),
      }).catch(() => {});
    }

    function trackPageView() {
      trackEvent({ type: 'pageview', path: location.pathname, referrer: document.referrer });
    }

    function trackSkillView(skillId) {
      if (!skillId) return;
      trackEvent({ type: 'skill_view', skill_id: skillId });
    }

    function trackSearch(query, resultsCount) {
      const normalized = (query || '').trim();
      if (!normalized || normalized.length < 2) return;
      if (normalized === lastTrackedQuery && resultsCount === lastTrackedResults) return;
      lastTrackedQuery = normalized;
      lastTrackedResults = resultsCount;
      trackEvent({ type: 'search', query: normalized, results_count: resultsCount });
    }
    
    // ============================================
    // FILTER AND RENDER (API-backed)
    // ============================================
    function normalizeExtension(item) {
      if (!item) return null;
      return {
        id: item.id,
        n: item.slug,
        d: item.display_name,
        a: item.author,
        desc: item.description,
        src: item.source,
        url: item.url,
        type: item.type,
        cat: item.category,
        sc: item.score ?? -1,
        r: item.risk || 'UNSCANNED',
        ic: item.issue_count ?? 0,
        ti: item.top_issues || [],
        extra: item.extra || {},
        created_at: item.created_at,
        updated_at: item.updated_at
      };
    }

    function isUnscanned(skill) {
      return skill.sc === null || skill.sc === undefined || skill.sc < 0 || skill.r === 'UNSCANNED';
    }

    function applySort(list) {
      const items = [...list];
      if (currentSort === 'security') {
        const riskOrder = { CRITICAL: 0, HIGH: 1, MEDIUM: 2, LOW: 3, UNSCANNED: 4 };
        
        // First, sort by risk level (worst first), then by score (worst first)
        items.sort((a, b) => {
          const ra = riskOrder[a.r] ?? 5;
          const rb = riskOrder[b.r] ?? 5;
          if (ra !== rb) return ra - rb;
          return (a.sc || 0) - (b.sc || 0);
        });
        
        // Then interleave skills and MCPs within each risk level for better visibility
        // This ensures MCPs appear in the initial scroll even if most are LOW risk
        if (currentTypeFilter === 'all') {
          const interleaved = [];
          const byRisk = { CRITICAL: [], HIGH: [], MEDIUM: [], LOW: [], UNSCANNED: [] };
          
          // Group by risk level
          items.forEach(item => {
            const risk = item.r || 'UNSCANNED';
            if (!byRisk[risk]) byRisk[risk] = [];
            byRisk[risk].push(item);
          });
          
          // For each risk level, interleave skills and MCPs
          ['CRITICAL', 'HIGH', 'MEDIUM', 'LOW', 'UNSCANNED'].forEach(risk => {
            const group = byRisk[risk] || [];
            const skills = group.filter(x => x.type === 'skill');
            const mcps = group.filter(x => x.type === 'mcp');
            
            // Interleave: alternate between skills and MCPs
            const maxLen = Math.max(skills.length, mcps.length);
            for (let i = 0; i < maxLen; i++) {
              if (i < skills.length) interleaved.push(skills[i]);
              if (i < mcps.length) interleaved.push(mcps[i]);
            }
          });
          
          return interleaved;
        }
      } else if (currentSort === 'score-asc') {
        items.sort((a, b) => (a.sc || 0) - (b.sc || 0));
      } else if (currentSort === 'score-desc') {
        items.sort((a, b) => (b.sc || 0) - (a.sc || 0));
      } else if (currentSort === 'name') {
        items.sort((a, b) => (a.d || a.n || '').localeCompare(b.d || b.n || ''));
      }
      return items;
    }

    function setLoadingState(active) {
      const loadingEl = document.getElementById('loading-more');
      if (!loadingEl) return;
      if (active) {
        loadingEl.classList.remove('hidden');
        loadingEl.classList.add('flex');
      } else {
        loadingEl.classList.add('hidden');
        loadingEl.classList.remove('flex');
      }
    }

    async function fetchExtensions({ reset = false } = {}) {
      if (isLoading || (!hasMore && !reset)) return;

      isLoading = true;
      setLoadingState(true);

      if (reset) {
        currentOffset = 0;
        loadedSkills = [];
        currentResults = [];
        totalAvailable = 0;
        hasMore = true;
        autoLoadCount = 0;
      }

      const params = new URLSearchParams();
      params.set('limit', PAGE_SIZE);
      params.set('offset', currentOffset);

      if (currentSearch && currentSearch.trim().length > 0) {
        params.set('q', currentSearch.trim());
      }
      if (currentRiskFilter !== 'all') params.set('risk', currentRiskFilter);
      if (currentTypeFilter !== 'all') params.set('type', currentTypeFilter);
      if (currentCategoryFilter !== 'all') {
        const cat = CATEGORIES[currentCategoryFilter];
        params.set('category', cat ? cat.name : currentCategoryFilter);
      }
      if (currentSourceFilter !== 'all') params.set('source', currentSourceFilter);

      try {
        const res = await fetch(`${API_ENDPOINT}?${params.toString()}`);
        const payload = await res.json();

        const newItems = (payload.data || []).map(normalizeExtension).filter(Boolean);
        loadedSkills = reset ? newItems : [...loadedSkills, ...newItems];
        totalAvailable = payload.meta?.total ?? loadedSkills.length;
        currentOffset = loadedSkills.length;
        hasMore = loadedSkills.length < totalAvailable;

        if (payload.stats) {
          updateStatsFromApi(payload.stats);
        }

        if (payload.meta?.total && currentTypeFilter === 'all' && (!currentSearch || currentSearch.trim().length === 0)) {
          const countAll = document.getElementById('count-type-all');
          if (countAll) countAll.textContent = formatNumber(payload.meta.total);
        }

        renderSkills();

        if (currentSearch && currentSearch.trim().length >= 2) {
          trackSearch(currentSearch, totalAvailable || loadedSkills.length);
        }
      } catch (err) {
        console.error('Failed to fetch extensions', err);
      } finally {
        isLoading = false;
        setLoadingState(false);
      }
    }

    function renderSkills() {
      const grid = document.getElementById('skills-grid');
      let skillsToRender = applySort(loadedSkills);

      if (currentSourceFilter !== 'all') {
        skillsToRender = skillsToRender.filter(s => s.src === currentSourceFilter);
      }

      currentResults = skillsToRender;

      if (!skillsToRender.length && !isLoading) {
        grid.innerHTML = '<div class="col-span-full flex flex-col items-center justify-center py-16 text-center"><i data-lucide="search-x" class="w-12 h-12 text-slate-600 mb-4"></i><h3 class="text-lg font-semibold text-slate-400 mb-2">No results found</h3><p class="text-sm text-slate-500">Try adjusting your filters or search query.</p></div>';
        lucide.createIcons();
        updateLoadMore(0, totalAvailable || 0);
        return { total: totalAvailable || 0, shown: 0 };
      }

      grid.innerHTML = skillsToRender.map((skill, idx) => {
        const unscanned = isUnscanned(skill);
        const riskColor = getRiskColor(skill.r);
        const cm = colorMap[riskColor] || colorMap.slate;
        const grade = getScoreGrade(skill.sc);
        const srcBadge = getSourceBadge(skill.src);
        const issueText = skill.ic > 0
          ? `<span class="${cm.text}">${skill.ic} issue${skill.ic > 1 ? 's' : ''} found</span>`
          : unscanned ? '<span class="text-slate-400">Pending scan</span>' : '<span class="text-emerald-400">All checks passed</span>';
        const topIssues = (skill.ti || []).slice(0, 2);
        const srcLabel = skill.src ? skill.src.replace(/\.\w+$/, '') : 'source';
        const typeBadge = skill.type === 'mcp'
          ? '<span class="px-2 py-0.5 rounded-full text-xs font-semibold bg-amber-500/10 text-amber-300 border border-amber-500/30">‚ö° MCP</span>'
          : '<span class="px-2 py-0.5 rounded-full text-xs font-semibold bg-indigo-500/10 text-indigo-300 border border-indigo-500/30">üîå SKILL</span>';
        const scoreBadge = unscanned
          ? '<span class="px-2 py-0.5 rounded text-xs font-mono border border-dashed border-slate-600 text-slate-400" title="Not yet scanned">‚Äî</span>'
          : `<span class="px-2 py-0.5 rounded text-xs font-mono ${cm.bg} ${cm.text}">${skill.sc}/100</span>`;

        return `
          <div data-skill-idx="${idx}" onclick="openSkillModal(this)" class="skill-card group relative block p-6 rounded-xl bg-slate-900 border-2 ${cm.border} ${cm.borderHover} transition-all hover-glow cursor-pointer select-none">
            <!-- External link button -->
            ${skill.url ? `<a href="${escapeHtml(skill.url)}" target="_blank" rel="noopener noreferrer" onclick="event.stopPropagation()" title="View on ${escapeHtml(skill.src)}" class="card-ext-link absolute top-3 right-3 z-10 w-8 h-8 flex items-center justify-center rounded-lg bg-slate-800/80 border border-slate-700 text-slate-400 hover:text-emerald-400"><i data-lucide="external-link" class="w-4 h-4"></i></a>` : ''}
            
            <div class="flex items-start justify-between mb-3 pr-8">
              <div class="flex items-center gap-3 min-w-0">
                <div class="w-10 h-10 rounded-lg ${cm.bg} flex items-center justify-center flex-shrink-0">
                  <i data-lucide="file-code" class="w-5 h-5 ${cm.text}"></i>
                </div>
                <div class="min-w-0">
                  <h3 class="font-semibold text-white ${cm.hoverText} transition-colors truncate">${escapeHtml(skill.d || skill.n)}</h3>
                  <p class="text-xs text-slate-500 truncate">@${escapeHtml(skill.a || 'unknown')}</p>
                </div>
              </div>
              <div class="flex items-center gap-1 px-2 py-1 rounded-full ${unscanned ? 'bg-slate-800/60 border border-dashed border-slate-600' : cm.bg + ' border ' + cm.border} flex-shrink-0">
                <i data-lucide="shield" class="w-3 h-3 ${unscanned ? 'text-slate-400' : cm.text}"></i>
                <span class="text-xs font-bold ${unscanned ? 'text-slate-400' : cm.text}">${grade}</span>
              </div>
            </div>
            
            <p class="text-sm text-slate-400 mb-3 line-clamp-2">${escapeHtml(skill.desc || 'No description')}</p>
            
            <div class="flex items-center gap-2 mb-3 flex-wrap">
              ${typeBadge}
              <span class="px-2 py-0.5 rounded-full text-xs border border-slate-700/60 text-slate-400 bg-slate-800/50">${escapeHtml(skill.src || 'source')}</span>
              ${scoreBadge}
            </div>
            
            <div class="flex items-center justify-between text-xs text-slate-500 mb-3">
              <span class="flex items-center gap-1">
                <i data-lucide="shield-alert" class="w-3 h-3"></i>
                ${unscanned ? 'UNSCANNED' : skill.r}
              </span>
              <span class="flex items-center gap-1">
                <i data-lucide="bug" class="w-3 h-3"></i>
                ${skill.ic || 0} issue${skill.ic !== 1 ? 's' : ''}
              </span>
            </div>
            
            <div class="security-preview pt-3 border-t border-slate-800">
              <div class="flex items-center justify-between text-xs mb-1">
                <span class="text-slate-500">Security:</span>
                ${issueText}
              </div>
              ${topIssues.length > 0 ? '<div class="mt-1 space-y-0.5">' + topIssues.map(t => '<div class="text-xs text-slate-500 truncate">‚Ä¢ ' + escapeHtml(t) + '</div>').join('') + '</div>' : ''}
            </div>
            
            <!-- View Scan Report Badge -->
            <div class="mt-4 flex items-center justify-center gap-2">
              <span class="inline-flex items-center gap-1.5 px-3 py-1.5 rounded-full text-xs font-medium bg-emerald-500/10 text-emerald-400 border border-emerald-500/30">
                <i data-lucide="file-search" class="w-3.5 h-3.5"></i>
                View Scan Report
              </span>
              ${skill.url ? `<a href="${escapeHtml(skill.url)}" target="_blank" rel="noopener noreferrer" onclick="event.stopPropagation()" class="inline-flex items-center gap-1.5 px-3 py-1.5 rounded-full text-xs font-medium bg-slate-800 text-slate-300 border border-slate-700 hover:text-emerald-400 hover:border-emerald-500/50 transition-all">
                <i data-lucide="external-link" class="w-3.5 h-3.5"></i>
                ${escapeHtml(srcLabel)}
              </a>` : ''}
            </div>
          </div>
        `;
      }).join('');

      lucide.createIcons();
      updateLoadMore(skillsToRender.length, totalAvailable || skillsToRender.length);
      return { total: totalAvailable || skillsToRender.length, shown: skillsToRender.length };
    }

    function updateLoadMore(shown, total) {
      const btn = document.getElementById('load-more');
      if (!btn) return;
      const displayTotal = total || 0;
      
      if (!hasMore && shown >= displayTotal && displayTotal > 0) {
        // All items loaded - show completion message and allow footer access
        btn.innerHTML = `
          <div class="flex flex-col items-center gap-2">
            <span class="text-slate-400">Showing all ${formatNumber(displayTotal)} items</span>
            <span class="text-xs text-slate-500">Scroll down to see footer</span>
          </div>
        `;
      } else if (autoLoadCount >= MAX_AUTO_LOADS && hasMore) {
        // Manual mode - button is handled by showManualLoadButton
        // Don't overwrite here
      } else {
        btn.innerHTML = `Showing ${formatNumber(shown)} of ${formatNumber(displayTotal)}`;
      }
    }
    
    // Render ticker from real data
    function renderTicker() {
      const ticker = document.getElementById('scan-ticker');
      // Pick a mix of scan results for the ticker
      const sampleIndices = [];
      const base = TOP_SKILLS || [];
      const step = Math.max(1, Math.floor(base.length / 16));
      for (let i = 0; i < 16 && i * step < base.length; i++) {
        sampleIndices.push(i * step);
      }
      const samples = sampleIndices.map(i => base[i]).filter(Boolean);
      const items = [...samples, ...samples];
      
      ticker.innerHTML = items.map(scan => {
        const isClean = scan.r === 'LOW';
        const icon = isClean ? 'check-circle' : (scan.r === 'CRITICAL' ? 'alert-octagon' : 'alert-triangle');
        const color = isClean ? 'emerald' : (scan.r === 'CRITICAL' ? 'red' : 'amber');
        const cm = colorMap[color];
        
        return `
          <div class="flex items-center gap-3 px-4 py-2 rounded-full bg-slate-900 border border-slate-800 flex-shrink-0">
            <span class="text-sm text-slate-400">Scanned:</span>
            <span class="text-sm font-medium text-white">${escapeHtml(scan.n)}</span>
            <span class="text-sm text-slate-500">@${escapeHtml(scan.a)}</span>
            <span class="flex items-center gap-1 ${cm.text}">
              <i data-lucide="${icon}" class="w-4 h-4"></i>
              ${scan.r}
            </span>
          </div>
        `;
      }).join('');
      
      lucide.createIcons();
    }
    
    // ============================================
    // INTERACTIVITY
    // ============================================
    
    // Risk filter tabs
    document.querySelectorAll('.filter-tab').forEach(tab => {
      tab.addEventListener('click', () => {
        document.querySelectorAll('.filter-tab').forEach(t => {
          t.classList.remove('active', 'bg-emerald-600', 'text-white');
          t.classList.add('bg-slate-800', 'text-slate-400');
        });
        tab.classList.add('active', 'bg-emerald-600', 'text-white');
        tab.classList.remove('bg-slate-800', 'text-slate-400');
        
        currentRiskFilter = tab.dataset.filter;
        fetchExtensions({ reset: true });
      });
    });
    
    // Source pills
    document.querySelectorAll('.source-pill').forEach(pill => {
      pill.addEventListener('click', () => {
        document.querySelectorAll('.source-pill').forEach(p => p.classList.remove('active'));
        pill.classList.add('active');
        
        currentSourceFilter = pill.dataset.source;
        fetchExtensions({ reset: true });
      });
    });

    // Type filter pills
    document.querySelectorAll('.type-pill').forEach(pill => {
      pill.addEventListener('click', () => {
        document.querySelectorAll('.type-pill').forEach(p => p.classList.remove('active'));
        pill.classList.add('active');

        currentTypeFilter = pill.dataset.type;
        fetchExtensions({ reset: true });
      });
    });
    
    // ============================================
    // CATEGORY DROPDOWN
    // ============================================
    const categoryDropdown = document.getElementById('category-dropdown');
    const categoryTrigger = document.getElementById('category-trigger');
    const categoryPanel = document.getElementById('category-panel');
    const categoryTriggerLabel = document.getElementById('category-trigger-label');
    const categoryClearBtn = document.getElementById('category-clear-btn');

    function renderCategoryDropdown() {
      let html = '';

      // "All Categories" option
      html += `
        <div class="category-option ${currentCategoryFilter === 'all' ? 'selected' : ''}"
             data-category="all" role="option" aria-selected="${currentCategoryFilter === 'all'}">
          <i data-lucide="layers" class="cat-icon"></i>
          <span class="cat-name">All Categories</span>
          <span class="cat-count">${formatNumber(SCAN_STATS.total || (TOP_SKILLS || []).length)}</span>
        </div>
        <div class="category-divider"></div>
      `;

      // Each category
      CATEGORY_ORDER.forEach(catKey => {
        const cat = CATEGORIES[catKey];
        const count = categoryCounts[catKey] || 0;
        const isSelected = currentCategoryFilter === catKey;

        html += `
          <div class="category-option ${isSelected ? 'selected' : ''}"
               data-category="${catKey}" role="option" aria-selected="${isSelected}">
            <i data-lucide="${cat.icon}" class="cat-icon"></i>
            <span class="cat-name">${cat.name}</span>
            <span class="cat-count">${count}</span>
          </div>
        `;
      });

      categoryPanel.innerHTML = html;
      lucide.createIcons();

      // Bind click on each option
      categoryPanel.querySelectorAll('.category-option').forEach(opt => {
        opt.addEventListener('click', (e) => {
          e.stopPropagation();
          const cat = opt.dataset.category;
          selectCategory(cat);
          closeCategoryPanel();
        });
      });
    }

    function selectCategory(catKey) {
      currentCategoryFilter = catKey;

      // Update trigger display
      if (catKey === 'all') {
        categoryTriggerLabel.textContent = 'All Categories';
        categoryTrigger.classList.remove('active');
        categoryClearBtn.classList.add('hidden');
        // Reset icon to layers
        const iconEl = categoryTrigger.querySelector('i:first-child');
        if (iconEl) {
          iconEl.setAttribute('data-lucide', 'layers');
          iconEl.style.color = '#64748b';
        }
      } else {
        const cat = CATEGORIES[catKey];
        categoryTriggerLabel.textContent = cat.name;
        categoryTrigger.classList.add('active');
        categoryClearBtn.classList.remove('hidden');
        // Update icon to category icon
        const iconEl = categoryTrigger.querySelector('i:first-child');
        if (iconEl) {
          iconEl.setAttribute('data-lucide', cat.icon);
          iconEl.style.color = '#34d399';
        }
      }

      lucide.createIcons();

      // Update selected state in panel
      categoryPanel.querySelectorAll('.category-option').forEach(opt => {
        opt.classList.toggle('selected', opt.dataset.category === catKey);
        opt.setAttribute('aria-selected', opt.dataset.category === catKey);
      });

      fetchExtensions({ reset: true });
    }

    function openCategoryPanel() {
      categoryPanel.classList.add('open');
      categoryTrigger.classList.add('open');
      categoryTrigger.setAttribute('aria-expanded', 'true');
    }

    function closeCategoryPanel() {
      categoryPanel.classList.remove('open');
      categoryTrigger.classList.remove('open');
      categoryTrigger.setAttribute('aria-expanded', 'false');
    }

    function toggleCategoryPanel() {
      if (categoryPanel.classList.contains('open')) {
        closeCategoryPanel();
      } else {
        openCategoryPanel();
      }
    }

    // Trigger click ‚Äî toggle panel
    categoryTrigger.addEventListener('click', (e) => {
      // If clicking the clear button, don't toggle panel
      if (e.target === categoryClearBtn || categoryClearBtn.contains(e.target)) {
        return;
      }
      toggleCategoryPanel();
    });

    // Clear button ‚Äî reset to "All"
    categoryClearBtn.addEventListener('click', (e) => {
      e.stopPropagation();
      selectCategory('all');
      closeCategoryPanel();
    });

    // Click outside to close
    document.addEventListener('click', (e) => {
      if (!categoryDropdown.contains(e.target)) {
        closeCategoryPanel();
      }
    });

    // Escape to close
    document.addEventListener('keydown', (e) => {
      if (e.key === 'Escape' && categoryPanel.classList.contains('open')) {
        closeCategoryPanel();
        e.stopPropagation();
      }
    });
    
    // Search functionality ‚Äî handled by initSearchDropdown() in initialization
    
    // Keyboard shortcut for search
    document.addEventListener('keydown', (e) => {
      if ((e.metaKey || e.ctrlKey) && e.key === 'k') {
        e.preventDefault();
        searchInput.focus();
      }
    });
    
    // Sort functionality
    document.getElementById('sort-select').addEventListener('change', (e) => {
      currentSort = e.target.value;
      renderSkills();
    });
    
    // Mobile menu
    const mobileMenuBtn = document.getElementById('mobile-menu-btn');
    const mobileMenu = document.getElementById('mobile-menu');
    
    mobileMenuBtn.addEventListener('click', () => {
      mobileMenu.classList.toggle('open');
    });
    
    mobileMenu.querySelectorAll('a').forEach(link => {
      link.addEventListener('click', () => {
        mobileMenu.classList.remove('open');
      });
    });
    
    // FAQ Accordion
    document.querySelectorAll('.faq-trigger').forEach(trigger => {
      trigger.addEventListener('click', () => {
        const item = trigger.closest('.faq-item');
        const content = item.querySelector('.faq-content');
        const icon = item.querySelector('.faq-icon');
        
        document.querySelectorAll('.faq-content').forEach(c => {
          if (c !== content) c.classList.remove('open');
        });
        document.querySelectorAll('.faq-icon').forEach(i => {
          if (i !== icon) i.style.transform = 'rotate(0deg)';
        });
        
        content.classList.toggle('open');
        icon.style.transform = content.classList.contains('open') ? 'rotate(180deg)' : 'rotate(0deg)';
      });
    });
    
    // Security Modal
    const securityModal = document.getElementById('security-modal');
    const securityReportBtn = document.getElementById('security-report-btn');
    const closeModalBtn = document.getElementById('close-modal');
    const modalBackdrop = document.getElementById('modal-backdrop');
    
    function openModal() {
      securityModal.classList.remove('hidden');
      document.body.style.overflow = 'hidden';
    }
    
    function closeModal() {
      securityModal.classList.add('hidden');
      document.body.style.overflow = '';
    }
    
    securityReportBtn.addEventListener('click', openModal);
    closeModalBtn.addEventListener('click', closeModal);
    modalBackdrop.addEventListener('click', closeModal);
    
    document.addEventListener('keydown', (e) => {
      if (e.key === 'Escape') {
        if (!skillDetailModal.classList.contains('hidden')) {
          closeSkillModal();
        } else if (dropdownOpen) {
          hideSearchDropdown();
        } else if (!securityModal.classList.contains('hidden')) {
          closeModal();
        }
      }
    });
    
    // ============================================
    // SKILL DETAIL MODAL
    // ============================================
    const skillDetailModal = document.getElementById('skill-detail-modal');
    const skillModalBackdrop = document.getElementById('skill-modal-backdrop');
    const closeSkillModalBtn = document.getElementById('close-skill-modal');
    
    function getScoreColor(score) {
      if (score === null || score === undefined || score < 0) return { stroke: '#64748b', text: 'text-slate-400' };
      if (score >= 70) return { stroke: '#10b981', text: 'text-emerald-400' };
      if (score >= 40) return { stroke: '#f59e0b', text: 'text-amber-400' };
      return { stroke: '#ef4444', text: 'text-red-400' };
    }
    
    function getIssueSeverity(issueText) {
      const t = (issueText || '').toLowerCase();
      if (t.includes('credential') || t.includes('exfiltration') || t.includes('privilege') || t.includes('shell') || t.includes('remote code') || t.includes('backdoor')) {
        return { level: 'CRITICAL', color: 'red', icon: 'alert-octagon', desc: 'Potential data theft or system compromise' };
      }
      if (t.includes('injection') || t.includes('override') || t.includes('manipulation') || t.includes('hidden') || t.includes('obfuscated') || t.includes('encoded')) {
        return { level: 'HIGH', color: 'orange', icon: 'alert-triangle', desc: 'Attempts to manipulate agent behavior' };
      }
      if (t.includes('write') || t.includes('network') || t.includes('http') || t.includes('fetch') || t.includes('request') || t.includes('access')) {
        return { level: 'MEDIUM', color: 'amber', icon: 'info', desc: 'Elevated permissions or suspicious patterns' };
      }
      return { level: 'LOW', color: 'emerald', icon: 'info', desc: 'Minor concern or informational finding' };
    }
    
    // Render a single issue item HTML
    function renderIssueItem(issueText, sev, sevCm, count) {
      return `
        <div class="issue-item p-3 rounded-lg bg-slate-800/60 border border-slate-700/50">
          <div class="flex items-start gap-2">
            <div class="mt-0.5 w-5 h-5 rounded flex items-center justify-center flex-shrink-0 ${sevCm.bg}">
              <i data-lucide="${sev.icon}" class="w-3 h-3 ${sevCm.text}"></i>
            </div>
            <div class="flex-1 min-w-0">
              <div class="flex items-center gap-2">
                <span class="text-sm font-medium text-white">${escapeHtml(issueText)}</span>
                ${count > 1 ? '<span class="text-[10px] px-1.5 py-0.5 rounded bg-slate-700 text-slate-400 font-mono">√ó' + count + '</span>' : ''}
              </div>
              <p class="text-xs text-slate-500 mt-0.5">${escapeHtml(sev.desc)}</p>
            </div>
            <span class="text-[10px] font-bold px-1.5 py-0.5 rounded ${sevCm.bg} ${sevCm.text} flex-shrink-0">${sev.level}</span>
          </div>
        </div>
      `;
    }
    
    // Render grouped issues by severity
    function renderGroupedIssues(sortedIssues, issueCounts) {
      // Group by severity
      const groups = { CRITICAL: [], HIGH: [], MEDIUM: [], LOW: [] };
      sortedIssues.forEach(issueText => {
        const sev = getIssueSeverity(issueText);
        groups[sev.level].push(issueText);
      });
      
      const severityConfig = {
        CRITICAL: { label: 'Critical', color: 'red', bg: 'bg-red-500/10', text: 'text-red-400', border: 'border-red-500/30' },
        HIGH: { label: 'High', color: 'orange', bg: 'bg-orange-500/10', text: 'text-orange-400', border: 'border-orange-500/30' },
        MEDIUM: { label: 'Medium', color: 'amber', bg: 'bg-amber-500/10', text: 'text-amber-400', border: 'border-amber-500/30' },
        LOW: { label: 'Low', color: 'emerald', bg: 'bg-emerald-500/10', text: 'text-emerald-400', border: 'border-emerald-500/30' }
      };
      
      let html = '';
      const order = ['CRITICAL', 'HIGH', 'MEDIUM', 'LOW'];
      
      order.forEach(severity => {
        const issues = groups[severity];
        if (issues.length === 0) return;
        
        const cfg = severityConfig[severity];
        html += `
          <div class="severity-group">
            <div class="severity-group-header flex items-center gap-2 px-2 py-1.5 mb-2 rounded ${cfg.bg} ${cfg.border} border">
              <span class="${cfg.text} font-bold">${cfg.label}</span>
              <span class="${cfg.text}/70">(${issues.length})</span>
            </div>
            <div class="space-y-1.5 pl-2">
        `;
        
        html += issues.map(issueText => {
          const sev = getIssueSeverity(issueText);
          const sevCm = colorMap[sev.color] || colorMap.slate;
          const count = issueCounts[issueText];
          return renderIssueItem(issueText, sev, sevCm, count);
        }).join('');
        
        html += '</div></div>';
      });
      
      return html;
    }
    
    function openSkillModal(cardEl) {
      const idx = parseInt(cardEl.dataset.skillIdx, 10);
      const skill = currentResults[idx];
      if (!skill) return;

      currentModalSkill = skill;
      trackSkillView(skill.n || skill.d);
      
      const riskColor = getRiskColor(skill.r);
      const cm = colorMap[riskColor] || colorMap.slate;
      const srcBadge = getSourceBadge(skill.src);
      const scoreCol = getScoreColor(skill.sc);
      const grade = getScoreGrade(skill.sc);
      
      // Header
      document.getElementById('sdm-title').textContent = skill.d || skill.n;
      document.getElementById('sdm-author').textContent = '@' + skill.a;
      const iconWrap = document.getElementById('sdm-icon');
      iconWrap.className = 'w-10 h-10 rounded-lg flex items-center justify-center flex-shrink-0 ' + cm.bg;
      iconWrap.innerHTML = '<i data-lucide="shield" class="w-5 h-5 ' + cm.text + '"></i>';
      
      // Score ring
      const ring = document.getElementById('sdm-ring');
      const circumference = 283;
      const unscanned = isUnscanned(skill);
      const scoreEl = document.getElementById('sdm-score');

      if (unscanned) {
        ring.style.stroke = '#64748b';
        ring.style.strokeDashoffset = circumference;
        scoreEl.textContent = '‚Äî';
        scoreEl.className = 'text-2xl font-bold font-mono text-slate-400';
      } else {
        const pct = Math.max(0, Math.min(100, skill.sc)) / 100;
        ring.style.stroke = scoreCol.stroke;
        // Reset first for animation
        ring.style.strokeDashoffset = circumference;
        requestAnimationFrame(() => {
          requestAnimationFrame(() => {
            ring.style.strokeDashoffset = circumference - (circumference * pct);
          });
        });
        scoreEl.textContent = skill.sc;
        scoreEl.className = 'text-2xl font-bold font-mono ' + scoreCol.text;
      }
      
      // Risk badge
      const riskBadge = document.getElementById('sdm-risk-badge');
      riskBadge.textContent = getRiskLabel(skill.r);
      riskBadge.className = 'px-3 py-1 rounded-full text-xs font-bold border ' + cm.bg + ' ' + cm.text + ' ' + cm.border;
      
      // Source badge
      const sourceBadge = document.getElementById('sdm-source-badge');
      sourceBadge.textContent = srcBadge.emoji + ' ' + skill.src;
      sourceBadge.className = 'px-3 py-1 rounded-full text-xs border ' + srcBadge.cls;
      
      // Description
      document.getElementById('sdm-desc').textContent = skill.desc || 'No description available';
      
      // Scan date
      const scanDateEl = document.getElementById('sdm-scan-date');
      scanDateEl.innerHTML = '<i data-lucide="clock" class="w-3 h-3"></i><span>Scanned: Feb 6, 2026</span>';
      
      // Source link
      const srcLink = document.getElementById('sdm-source-link');
      if (skill.url) {
        srcLink.href = skill.url;
        srcLink.querySelector('span').textContent = 'View on ' + skill.src;
        srcLink.style.display = '';
      } else {
        srcLink.style.display = 'none';
      }
      
      // Verdict
      const verdictEl = document.getElementById('sdm-verdict');
      const verdictIcon = document.getElementById('sdm-verdict-icon');
      const verdictText = document.getElementById('sdm-verdict-text');
      const verdictSub = document.getElementById('sdm-verdict-sub');
      
      if (skill.r === 'LOW' && skill.ic <= 1) {
        verdictEl.className = 'p-4 rounded-xl border flex items-center gap-3 bg-emerald-500/10 border-emerald-500/30';
        verdictIcon.outerHTML = '<i id="sdm-verdict-icon" data-lucide="check-circle" class="w-6 h-6 flex-shrink-0 text-emerald-400"></i>';
        verdictText.className = 'text-sm font-medium text-emerald-400';
        verdictText.textContent = 'This skill is safe to install';
        verdictSub.className = 'text-xs mt-0.5 text-emerald-400/70';
        verdictSub.textContent = 'All security checks passed with minimal findings.';
      } else if (skill.r === 'MEDIUM' || (skill.r === 'LOW' && skill.ic > 1)) {
        verdictEl.className = 'p-4 rounded-xl border flex items-center gap-3 bg-amber-500/10 border-amber-500/30';
        verdictIcon.outerHTML = '<i id="sdm-verdict-icon" data-lucide="alert-triangle" class="w-6 h-6 flex-shrink-0 text-amber-400"></i>';
        verdictText.className = 'text-sm font-medium text-amber-400';
        verdictText.textContent = 'Caution: ' + skill.ic + ' issue' + (skill.ic !== 1 ? 's' : '') + ' detected';
        verdictSub.className = 'text-xs mt-0.5 text-amber-400/70';
        verdictSub.textContent = 'Review the issues below before installing this skill.';
      } else {
        verdictEl.className = 'p-4 rounded-xl border flex items-center gap-3 bg-red-500/10 border-red-500/30';
        verdictIcon.outerHTML = '<i id="sdm-verdict-icon" data-lucide="shield-off" class="w-6 h-6 flex-shrink-0 text-red-400"></i>';
        verdictText.className = 'text-sm font-medium text-red-400';
        verdictText.textContent = 'DO NOT install ‚Äî ' + skill.ic + ' issue' + (skill.ic !== 1 ? 's' : '') + ' detected';
        verdictSub.className = 'text-xs mt-0.5 text-red-400/70';
        verdictSub.textContent = skill.r === 'CRITICAL' ? 'Critical security threats found. This skill is dangerous.' : 'Significant security concerns detected.';
      }
      
      // Issues list
      const issuesSection = document.getElementById('sdm-issues-section');
      const issuesPreview = document.getElementById('sdm-issues-preview');
      const issuesFull = document.getElementById('sdm-issues-full');
      const issuesExpanded = document.getElementById('sdm-issues-expanded');
      const expandBtnWrapper = document.getElementById('sdm-expand-btn-wrapper');
      const expandBtn = document.getElementById('sdm-expand-btn');
      const expandText = document.getElementById('sdm-expand-text');
      const issueCountEl = document.getElementById('sdm-issue-count');
      const issues = skill.ti || [];
      
      // Reset expand state
      issuesExpanded.classList.remove('expanded');
      expandBtn.classList.remove('expanded');
      expandText.textContent = 'Show all issues';
      
      if (skill.ic === 0) {
        issuesSection.style.display = 'none';
      } else {
        issuesSection.style.display = '';
        issueCountEl.textContent = skill.ic + ' total';
        
        // Deduplicate and count issue occurrences
        const issueCounts = {};
        issues.forEach(t => { issueCounts[t] = (issueCounts[t] || 0) + 1; });
        const uniqueIssues = Object.keys(issueCounts);
        
        // Sort issues by severity: CRITICAL, HIGH, MEDIUM, LOW
        const severityOrder = { CRITICAL: 0, HIGH: 1, MEDIUM: 2, LOW: 3 };
        const sortedIssues = uniqueIssues.slice().sort((a, b) => {
          const sevA = getIssueSeverity(a);
          const sevB = getIssueSeverity(b);
          return severityOrder[sevA.level] - severityOrder[sevB.level];
        });
        
        // Render preview issues (first 3, always visible)
        const previewIssues = sortedIssues.slice(0, 3);
        issuesPreview.innerHTML = previewIssues.map(issueText => {
          const sev = getIssueSeverity(issueText);
          const sevCm = colorMap[sev.color] || colorMap.slate;
          const count = issueCounts[issueText];
          return renderIssueItem(issueText, sev, sevCm, count);
        }).join('');
        
        // Show/hide expand button based on if there are more issues
        const hiddenCount = sortedIssues.length - 3;
        if (hiddenCount > 0) {
          expandBtnWrapper.classList.remove('hidden');
          expandText.textContent = `Show all ${sortedIssues.length} issues`;
          
          // Render full issues list grouped by severity
          issuesFull.innerHTML = renderGroupedIssues(sortedIssues, issueCounts);
        } else {
          expandBtnWrapper.classList.add('hidden');
          issuesFull.innerHTML = '';
        }
        
        // Setup expand/collapse handler
        expandBtn.onclick = () => {
          const isExpanded = issuesExpanded.classList.contains('expanded');
          if (isExpanded) {
            issuesExpanded.classList.remove('expanded');
            expandBtn.classList.remove('expanded');
            expandText.textContent = `Show all ${sortedIssues.length} issues`;
          } else {
            issuesExpanded.classList.add('expanded');
            expandBtn.classList.add('expanded');
            expandText.textContent = 'Show less';
          }
        };
      }
      
      // Security analysis boxes
      const isClean = skill.r === 'LOW';
      const isMed = skill.r === 'MEDIUM';
      
      document.getElementById('sdm-static').innerHTML = isClean
        ? '<span class="text-emerald-400">‚úì Passed</span>'
        : isMed 
          ? '<span class="text-amber-400">‚ö† Warnings found</span>'
          : '<span class="text-red-400">‚úó Issues found</span>';
      
      const hasInjection = issues.some(t => /inject|override|manipul|hidden|override|jailbreak/i.test(t));
      document.getElementById('sdm-injection').innerHTML = hasInjection
        ? '<span class="text-red-400">‚úó Detected</span>'
        : '<span class="text-emerald-400">‚úì None detected</span>';
      
      const hasExfil = issues.some(t => /exfil|network|http|dns|credential|steal/i.test(t));
      document.getElementById('sdm-sandbox').innerHTML = hasExfil
        ? '<span class="text-red-400">‚úó Suspicious activity</span>'
        : isClean
          ? '<span class="text-emerald-400">‚úì Clean execution</span>'
          : '<span class="text-amber-400">‚ö† Review recommended</span>';
      
      const gradeEl = document.getElementById('sdm-grade');
      if (unscanned) {
        gradeEl.innerHTML = '<span class="text-slate-400 text-lg">‚Äî</span><span class="text-slate-500 text-xs ml-1">Not yet scanned</span>';
      } else {
        gradeEl.innerHTML = '<span class="' + scoreCol.text + ' text-lg">' + grade + '</span><span class="text-slate-500 text-xs ml-1">(' + skill.sc + '/100)</span>';
      }
      
      // Update rescan button state
      updateRescanButton(skill);

      // Show modal
      skillDetailModal.classList.remove('hidden');
      document.body.style.overflow = 'hidden';
      requestAnimationFrame(() => {
        skillDetailModal.classList.add('open');
      });
      
      lucide.createIcons();
    }
    
    // ============================================
    // RESCAN REQUESTS
    // ============================================
    let currentModalSkill = null;

    function getRescanRequests() {
      try {
        return JSON.parse(localStorage.getItem('skillshield_rescan_requests') || '{}');
      } catch { return {}; }
    }

    function saveRescanRequest(skillId, skill) {
      const requests = getRescanRequests();
      requests[skillId] = {
        name: skill.d || skill.n,
        author: skill.a,
        source: skill.src,
        url: skill.url || null,
        requestedAt: new Date().toISOString(),
        status: 'pending'
      };
      localStorage.setItem('skillshield_rescan_requests', JSON.stringify(requests));
    }

    function isRescanPending(skillId) {
      const requests = getRescanRequests();
      const req = requests[skillId];
      if (!req) return false;
      // Expire after 24 hours
      const age = Date.now() - new Date(req.requestedAt).getTime();
      if (age > 24 * 60 * 60 * 1000) {
        delete requests[skillId];
        localStorage.setItem('skillshield_rescan_requests', JSON.stringify(requests));
        return false;
      }
      return true;
    }

    function requestRescan() {
      if (!currentModalSkill) return;
      const skillId = currentModalSkill.src + '/' + currentModalSkill.n;
      const btn = document.getElementById('sdm-rescan-btn');

      if (isRescanPending(skillId)) return;

      // Save to localStorage
      saveRescanRequest(skillId, currentModalSkill);

      // Fire analytics event
      trackEvent({
        type: 'rescan_request',
        skill_id: skillId,
        skill_name: currentModalSkill.d || currentModalSkill.n,
        source: currentModalSkill.src,
        url: currentModalSkill.url || null
      });

      // Optional: fire to backend endpoint (future API)
      fetch('/api/scans/request', {
        method: 'POST',
        headers: { 'Content-Type': 'application/json' },
        body: JSON.stringify({
          skillId,
          name: currentModalSkill.d || currentModalSkill.n,
          author: currentModalSkill.a,
          source: currentModalSkill.src,
          url: currentModalSkill.url || null,
          requestedAt: new Date().toISOString()
        })
      }).catch(() => {}); // Silently fail ‚Äî localStorage is the primary store

      // Update button to confirmed state
      setRescanButtonConfirmed(btn);
    }

    function setRescanButtonConfirmed(btn) {
      btn.disabled = true;
      btn.classList.remove('border-emerald-500/40', 'text-emerald-400', 'bg-emerald-500/5', 'hover:bg-emerald-500/15', 'hover:border-emerald-500/70');
      btn.classList.add('border-emerald-500/20', 'text-emerald-500/80', 'bg-emerald-500/10', 'cursor-default');
      btn.innerHTML = '<i data-lucide="check-circle" class="w-4 h-4"></i><span>Scan requested ‚úì</span>';
      lucide.createIcons();
    }

    function updateRescanButton(skill) {
      const btn = document.getElementById('sdm-rescan-btn');
      const skillId = skill.src + '/' + skill.n;

      if (isRescanPending(skillId)) {
        setRescanButtonConfirmed(btn);
      } else {
        btn.disabled = false;
        btn.className = 'flex items-center gap-2 px-4 py-2 rounded-lg text-sm font-medium border border-emerald-500/40 text-emerald-400 bg-emerald-500/5 hover:bg-emerald-500/15 hover:border-emerald-500/70 transition-all flex-shrink-0';
        btn.innerHTML = '<i data-lucide="refresh-cw" class="w-4 h-4"></i><span>Request Re-scan</span>';
        lucide.createIcons();
      }
    }

    function closeSkillModal() {
      currentModalSkill = null;
      skillDetailModal.classList.remove('open');
      setTimeout(() => {
        skillDetailModal.classList.add('hidden');
        document.body.style.overflow = '';
      }, 250);
    }
    
    closeSkillModalBtn.addEventListener('click', closeSkillModal);
    skillModalBackdrop.addEventListener('click', closeSkillModal);
    
    // ============================================
    // INITIALIZATION
    // ============================================

    function updateStatsFromApi(stats) {
      if (!stats) return;
      const total = stats.total ?? SCAN_STATS.total;
      const skills = stats.skills ?? SCAN_STATS.skills;
      const mcps = stats.mcps ?? SCAN_STATS.mcps;

      const heroCounterEl = document.getElementById('hero-counter');
      if (heroCounterEl) heroCounterEl.textContent = formatNumber(total);
      const breakdownEl = document.getElementById('hero-breakdown');
      if (breakdownEl) breakdownEl.textContent = `${formatNumber(skills)} Skills ‚Ä¢ ${formatNumber(mcps)} MCP Servers`;

      const countAll = document.getElementById('count-type-all');
      const countSkill = document.getElementById('count-type-skill');
      const countMcp = document.getElementById('count-type-mcp');
      if (countAll) countAll.textContent = formatNumber(total);
      if (countSkill) countSkill.textContent = formatNumber(skills);
      if (countMcp) countMcp.textContent = formatNumber(mcps);

      const riskAll = document.getElementById('count-all');
      if (riskAll) riskAll.textContent = '(' + formatNumber(total) + ')';
    }

    // Animate hero counter ‚Äî real data
    const heroCounter = document.getElementById('hero-counter');
    animateCounter(heroCounter, SCAN_STATS.total, 2500);
    
    // Animate stat counters
    document.querySelectorAll('.counter-value[data-target]').forEach(counter => {
      const target = parseInt(counter.dataset.target);
      animateCounter(counter, target, 2000);
    });
    
    // Update filter counts
    if (document.getElementById('count-all')) {
      document.getElementById('count-all').textContent = '(' + formatNumber(SCAN_STATS.total) + ')';
      document.getElementById('count-critical').textContent = '';
      document.getElementById('count-high').textContent = '';
      document.getElementById('count-medium').textContent = '';
      document.getElementById('count-low').textContent = '';
    }

    updateStatsFromApi(SCAN_STATS);
    
    // Update last scan timestamp
    function updateTimestamp() {
      const now = new Date();
      const timeStr = now.toLocaleTimeString('en-US', { 
        hour: '2-digit', 
        minute: '2-digit',
        hour12: false 
      });
      document.getElementById('last-scan').textContent = timeStr;
      document.getElementById('modal-timestamp').textContent = timeStr;
    }
    updateTimestamp();
    setInterval(updateTimestamp, 60000);
    
    // Compute categories for all skills
    computeCategories();

    // Render category dropdown
    renderCategoryDropdown();
    
    // Initialize advanced search
    initSearchDropdown();
    
    // Render initial content
    fetchExtensions({ reset: true });
    renderTicker();
    trackPageView();

    // Deep-link support for sitemap URLs:
    // - /skills/<slug>/ (via _redirects rewrite to /index.html)
    // - /?skill=<slug> (or /?id=<slug>)
    async function openSkillFromDeepLink() {
      let slug = null;

      // Query param takes priority.
      try {
        const params = new URLSearchParams(location.search || '');
        slug = (params.get('skill') || params.get('id') || '').trim() || null;
      } catch (_) {}

      // Path-based: /skills/<slug>/ or /skill/<slug>/
      if (!slug) {
        const m = (location.pathname || '').match(/^\/skills\/([^/]+)\/?$/) || (location.pathname || '').match(/^\/skill\/([^/]+)\/?$/);
        if (m && m[1]) {
          try {
            slug = decodeURIComponent(m[1]);
          } catch (_) {
            slug = m[1];
          }
        }
      }

      if (!slug) return;

      try {
        const res = await fetch(`${API_BASE}/extensions/${encodeURIComponent(slug)}`);
        const payload = await res.json();
        if (!res.ok) return;
        const ext = normalizeExtension(payload);
        if (ext) openSkillModalDirect(ext);
      } catch (err) {
        console.error('Deep-link extension fetch failed', err);
      }
    }

    // Fire-and-forget: do not block initial render.
    openSkillFromDeepLink();

    // Infinite scroll observer
    const sentinel = document.getElementById('scroll-sentinel');
    if (sentinel) {
      const observer = new IntersectionObserver((entries) => {
        entries.forEach(entry => {
          if (entry.isIntersecting && hasMore && !isLoading) {
            if (autoLoadCount < MAX_AUTO_LOADS) {
              autoLoadCount++;
              fetchExtensions();
            } else {
              // Switch to manual mode - show load button
              showManualLoadButton();
            }
          }
        });
      }, { rootMargin: '200px' });
      observer.observe(sentinel);
    }

    // Manual load button handler
    function showManualLoadButton() {
      const loadMoreEl = document.getElementById('load-more');
      if (!loadMoreEl || loadMoreEl.querySelector('.manual-load-btn')) return;
      
      loadMoreEl.innerHTML = `
        <div class="flex flex-col items-center gap-3">
          <span class="text-slate-400">Showing ${formatNumber(loadedSkills.length)} of ${formatNumber(totalAvailable)}</span>
          <button class="manual-load-btn px-6 py-2.5 bg-slate-800 hover:bg-slate-700 text-white text-sm font-medium rounded-lg border border-slate-700 hover:border-slate-600 transition-colors flex items-center gap-2">
            <i data-lucide="chevron-down" class="w-4 h-4"></i>
            Load 50 More
          </button>
          <span class="text-xs text-slate-500">or scroll down to see footer</span>
        </div>
      `;
      lucide.createIcons();
      
      // Add click handler
      const btn = loadMoreEl.querySelector('.manual-load-btn');
      if (btn) {
        btn.addEventListener('click', () => {
          autoLoadCount = 0; // Reset counter for another burst
          fetchExtensions();
        });
      }
    }
    
    // Smooth scroll for anchor links
    document.querySelectorAll('a[href^="#"]').forEach(anchor => {
      anchor.addEventListener('click', function(e) {
        e.preventDefault();
        const target = document.querySelector(this.getAttribute('href'));
        if (target) {
          target.scrollIntoView({ behavior: 'smooth', block: 'start' });
        }
      });
    });
  </script>
  <!-- Cloudflare Web Analytics ‚Äî token will be auto-injected by CF Pages, or set manually -->
  <!-- To enable: CF Dashboard ‚Üí Pages ‚Üí skillshield ‚Üí Settings ‚Üí Web Analytics ‚Üí Enable -->
  
  <!-- Plausible Analytics (Privacy-friendly, no cookie banner needed) -->
  <script defer data-domain="skillshield.dev" src="https://plausible.io/js/script.js"></script>
  
  <!-- Custom Analytics Tracking -->
  <script>
    // Track meaningful user interactions
    (function() {
      const sessionId = Math.random().toString(36).substring(2, 15);
      let startTime = Date.now();
      let skillsViewed = 0;
      let searchesMade = 0;
      
      // Track skill card clicks
      document.addEventListener('click', function(e) {
        const card = e.target.closest('[data-skill-id]');
        if (card) {
          skillsViewed++;
          console.log('[Analytics] Skill viewed:', card.dataset.skillId);
        }
      });
      
      // Track search usage
      const searchInput = document.getElementById('search-input');
      if (searchInput) {
        let searchTimeout;
        searchInput.addEventListener('input', function() {
          clearTimeout(searchTimeout);
          searchTimeout = setTimeout(() => {
            if (this.value.length > 2) {
              searchesMade++;
              console.log('[Analytics] Search:', this.value);
            }
          }, 1000);
        });
      }
      
      // Send session summary on page unload
      window.addEventListener('beforeunload', function() {
        const duration = Math.round((Date.now() - startTime) / 1000);
        console.log('[Analytics] Session:', { sessionId, duration, skillsViewed, searchesMade });
      });
    })();
  </script>
</body>
</html>
